const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ProductManagement-C5Utwqij.js","assets/DeleteModal.vue_vue_type_script_setup_true_lang-C2_j-UUp.js","assets/OrderManagement-CRkhG4l4.js","assets/CouponManagement-CTTcI_Ta.js","assets/Login-DelS8mYs.js","assets/Login-Isk9Xtvf.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Fl(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const Ne={},cs=[],ln=()=>{},Lp=()=>!1,Ra=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Bl=t=>t.startsWith("onUpdate:"),yt=Object.assign,jl=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},pE=Object.prototype.hasOwnProperty,Se=(t,e)=>pE.call(t,e),he=Array.isArray,ls=t=>qi(t)==="[object Map]",ba=t=>qi(t)==="[object Set]",Jh=t=>qi(t)==="[object Date]",ge=t=>typeof t=="function",Qe=t=>typeof t=="string",_n=t=>typeof t=="symbol",Oe=t=>t!==null&&typeof t=="object",Mp=t=>(Oe(t)||ge(t))&&ge(t.then)&&ge(t.catch),Up=Object.prototype.toString,qi=t=>Up.call(t),gE=t=>qi(t).slice(8,-1),Fp=t=>qi(t)==="[object Object]",ql=t=>Qe(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,li=Fl(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Sa=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},mE=/-\w/g,Bt=Sa(t=>t.replace(mE,e=>e.slice(1).toUpperCase())),_E=/\B([A-Z])/g,Hr=Sa(t=>t.replace(_E,"-$1").toLowerCase()),Ca=Sa(t=>t.charAt(0).toUpperCase()+t.slice(1)),wc=Sa(t=>t?`on${Ca(t)}`:""),tr=(t,e)=>!Object.is(t,e),Po=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},Bp=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},$l=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Xh;const Pa=()=>Xh||(Xh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Hl(t){if(he(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=Qe(r)?IE(r):Hl(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(Qe(t)||Oe(t))return t}const yE=/;(?![^(]*\))/g,EE=/:([^]+)/,TE=/\/\*[^]*?\*\//g;function IE(t){const e={};return t.replace(TE,"").split(yE).forEach(n=>{if(n){const r=n.split(EE);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Wl(t){let e="";if(Qe(t))e=t;else if(he(t))for(let n=0;n<t.length;n++){const r=Wl(t[n]);r&&(e+=r+" ")}else if(Oe(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const vE="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",wE=Fl(vE);function jp(t){return!!t||t===""}function AE(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=Na(t[r],e[r]);return n}function Na(t,e){if(t===e)return!0;let n=Jh(t),r=Jh(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=_n(t),r=_n(e),n||r)return t===e;if(n=he(t),r=he(e),n||r)return n&&r?AE(t,e):!1;if(n=Oe(t),r=Oe(e),n||r){if(!n||!r)return!1;const s=Object.keys(t).length,i=Object.keys(e).length;if(s!==i)return!1;for(const o in t){const c=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(c&&!l||!c&&l||!Na(t[o],e[o]))return!1}}return String(t)===String(e)}function qp(t,e){return t.findIndex(n=>Na(n,e))}const $p=t=>!!(t&&t.__v_isRef===!0),Gl=t=>Qe(t)?t:t==null?"":he(t)||Oe(t)&&(t.toString===Up||!ge(t.toString))?$p(t)?Gl(t.value):JSON.stringify(t,Hp,2):String(t),Hp=(t,e)=>$p(e)?Hp(t,e.value):ls(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],i)=>(n[Ac(r,i)+" =>"]=s,n),{})}:ba(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Ac(n))}:_n(e)?Ac(e):Oe(e)&&!he(e)&&!Fp(e)?String(e):e,Ac=(t,e="")=>{var n;return _n(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};let Rt;class RE{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Rt,!e&&Rt&&(this.index=(Rt.scopes||(Rt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Rt;try{return Rt=this,e()}finally{Rt=n}}}on(){++this._on===1&&(this.prevScope=Rt,Rt=this)}off(){this._on>0&&--this._on===0&&(Rt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function bE(){return Rt}let ke;const Rc=new WeakSet;class Wp{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Rt&&Rt.active&&Rt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Rc.has(this)&&(Rc.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||zp(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Zh(this),Kp(this);const e=ke,n=zt;ke=this,zt=!0;try{return this.fn()}finally{Qp(this),ke=e,zt=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Ql(e);this.deps=this.depsTail=void 0,Zh(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Rc.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Yc(this)&&this.run()}get dirty(){return Yc(this)}}let Gp=0,ui,hi;function zp(t,e=!1){if(t.flags|=8,e){t.next=hi,hi=t;return}t.next=ui,ui=t}function zl(){Gp++}function Kl(){if(--Gp>0)return;if(hi){let e=hi;for(hi=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;ui;){let e=ui;for(ui=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function Kp(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Qp(t){let e,n=t.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),Ql(r),SE(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}t.deps=e,t.depsTail=n}function Yc(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Yp(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Yp(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Ri)||(t.globalVersion=Ri,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Yc(t))))return;t.flags|=2;const e=t.dep,n=ke,r=zt;ke=t,zt=!0;try{Kp(t);const s=t.fn(t._value);(e.version===0||tr(s,t._value))&&(t.flags|=128,t._value=s,e.version++)}catch(s){throw e.version++,s}finally{ke=n,zt=r,Qp(t),t.flags&=-3}}function Ql(t,e=!1){const{dep:n,prevSub:r,nextSub:s}=t;if(r&&(r.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)Ql(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function SE(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let zt=!0;const Jp=[];function Pn(){Jp.push(zt),zt=!1}function Nn(){const t=Jp.pop();zt=t===void 0?!0:t}function Zh(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=ke;ke=void 0;try{e()}finally{ke=n}}}let Ri=0;class CE{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Yl{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!ke||!zt||ke===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==ke)n=this.activeLink=new CE(ke,this),ke.deps?(n.prevDep=ke.depsTail,ke.depsTail.nextDep=n,ke.depsTail=n):ke.deps=ke.depsTail=n,Xp(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=ke.depsTail,n.nextDep=void 0,ke.depsTail.nextDep=n,ke.depsTail=n,ke.deps===n&&(ke.deps=r)}return n}trigger(e){this.version++,Ri++,this.notify(e)}notify(e){zl();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Kl()}}}function Xp(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)Xp(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Jc=new WeakMap,kr=Symbol(""),Xc=Symbol(""),bi=Symbol("");function pt(t,e,n){if(zt&&ke){let r=Jc.get(t);r||Jc.set(t,r=new Map);let s=r.get(n);s||(r.set(n,s=new Yl),s.map=r,s.key=n),s.track()}}function Rn(t,e,n,r,s,i){const o=Jc.get(t);if(!o){Ri++;return}const c=l=>{l&&l.trigger()};if(zl(),e==="clear")o.forEach(c);else{const l=he(t),u=l&&ql(n);if(l&&n==="length"){const f=Number(r);o.forEach((p,g)=>{(g==="length"||g===bi||!_n(g)&&g>=f)&&c(p)})}else switch((n!==void 0||o.has(void 0))&&c(o.get(n)),u&&c(o.get(bi)),e){case"add":l?u&&c(o.get("length")):(c(o.get(kr)),ls(t)&&c(o.get(Xc)));break;case"delete":l||(c(o.get(kr)),ls(t)&&c(o.get(Xc)));break;case"set":ls(t)&&c(o.get(kr));break}}Kl()}function es(t){const e=be(t);return e===t?e:(pt(e,"iterate",bi),Ft(t)?e:e.map(Yt))}function Da(t){return pt(t=be(t),"iterate",bi),t}function Wn(t,e){return Dn(t)?Vr(t)?Es(Yt(e)):Es(e):Yt(e)}const PE={__proto__:null,[Symbol.iterator](){return bc(this,Symbol.iterator,t=>Wn(this,t))},concat(...t){return es(this).concat(...t.map(e=>he(e)?es(e):e))},entries(){return bc(this,"entries",t=>(t[1]=Wn(this,t[1]),t))},every(t,e){return vn(this,"every",t,e,void 0,arguments)},filter(t,e){return vn(this,"filter",t,e,n=>n.map(r=>Wn(this,r)),arguments)},find(t,e){return vn(this,"find",t,e,n=>Wn(this,n),arguments)},findIndex(t,e){return vn(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return vn(this,"findLast",t,e,n=>Wn(this,n),arguments)},findLastIndex(t,e){return vn(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return vn(this,"forEach",t,e,void 0,arguments)},includes(...t){return Sc(this,"includes",t)},indexOf(...t){return Sc(this,"indexOf",t)},join(t){return es(this).join(t)},lastIndexOf(...t){return Sc(this,"lastIndexOf",t)},map(t,e){return vn(this,"map",t,e,void 0,arguments)},pop(){return Xs(this,"pop")},push(...t){return Xs(this,"push",t)},reduce(t,...e){return ef(this,"reduce",t,e)},reduceRight(t,...e){return ef(this,"reduceRight",t,e)},shift(){return Xs(this,"shift")},some(t,e){return vn(this,"some",t,e,void 0,arguments)},splice(...t){return Xs(this,"splice",t)},toReversed(){return es(this).toReversed()},toSorted(t){return es(this).toSorted(t)},toSpliced(...t){return es(this).toSpliced(...t)},unshift(...t){return Xs(this,"unshift",t)},values(){return bc(this,"values",t=>Wn(this,t))}};function bc(t,e,n){const r=Da(t),s=r[e]();return r!==t&&!Ft(t)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.done||(i.value=n(i.value)),i}),s}const NE=Array.prototype;function vn(t,e,n,r,s,i){const o=Da(t),c=o!==t&&!Ft(t),l=o[e];if(l!==NE[e]){const p=l.apply(t,i);return c?Yt(p):p}let u=n;o!==t&&(c?u=function(p,g){return n.call(this,Wn(t,p),g,t)}:n.length>2&&(u=function(p,g){return n.call(this,p,g,t)}));const f=l.call(o,u,r);return c&&s?s(f):f}function ef(t,e,n,r){const s=Da(t);let i=n;return s!==t&&(Ft(t)?n.length>3&&(i=function(o,c,l){return n.call(this,o,c,l,t)}):i=function(o,c,l){return n.call(this,o,Wn(t,c),l,t)}),s[e](i,...r)}function Sc(t,e,n){const r=be(t);pt(r,"iterate",bi);const s=r[e](...n);return(s===-1||s===!1)&&Zl(n[0])?(n[0]=be(n[0]),r[e](...n)):s}function Xs(t,e,n=[]){Pn(),zl();const r=be(t)[e].apply(t,n);return Kl(),Nn(),r}const DE=Fl("__proto__,__v_isRef,__isVue"),Zp=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(_n));function OE(t){_n(t)||(t=String(t));const e=be(this);return pt(e,"has",t),e.hasOwnProperty(t)}class eg{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?qE:sg:i?rg:ng).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=he(e);if(!s){let l;if(o&&(l=PE[n]))return l;if(n==="hasOwnProperty")return OE}const c=Reflect.get(e,n,_t(e)?e:r);if((_n(n)?Zp.has(n):DE(n))||(s||pt(e,"get",n),i))return c;if(_t(c)){const l=o&&ql(n)?c:c.value;return s&&Oe(l)?el(l):l}return Oe(c)?s?el(c):Oa(c):c}}class tg extends eg{constructor(e=!1){super(!1,e)}set(e,n,r,s){let i=e[n];const o=he(e)&&ql(n);if(!this._isShallow){const u=Dn(i);if(!Ft(r)&&!Dn(r)&&(i=be(i),r=be(r)),!o&&_t(i)&&!_t(r))return u||(i.value=r),!0}const c=o?Number(n)<e.length:Se(e,n),l=Reflect.set(e,n,r,_t(e)?e:s);return e===be(s)&&(c?tr(r,i)&&Rn(e,"set",n,r):Rn(e,"add",n,r)),l}deleteProperty(e,n){const r=Se(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&Rn(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!_n(n)||!Zp.has(n))&&pt(e,"has",n),r}ownKeys(e){return pt(e,"iterate",he(e)?"length":kr),Reflect.ownKeys(e)}}class kE extends eg{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const VE=new tg,xE=new kE,LE=new tg(!0);const Zc=t=>t,mo=t=>Reflect.getPrototypeOf(t);function ME(t,e,n){return function(...r){const s=this.__v_raw,i=be(s),o=ls(i),c=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,u=s[t](...r),f=n?Zc:e?Es:Yt;return!e&&pt(i,"iterate",l?Xc:kr),{next(){const{value:p,done:g}=u.next();return g?{value:p,done:g}:{value:c?[f(p[0]),f(p[1])]:f(p),done:g}},[Symbol.iterator](){return this}}}}function _o(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function UE(t,e){const n={get(s){const i=this.__v_raw,o=be(i),c=be(s);t||(tr(s,c)&&pt(o,"get",s),pt(o,"get",c));const{has:l}=mo(o),u=e?Zc:t?Es:Yt;if(l.call(o,s))return u(i.get(s));if(l.call(o,c))return u(i.get(c));i!==o&&i.get(s)},get size(){const s=this.__v_raw;return!t&&pt(be(s),"iterate",kr),s.size},has(s){const i=this.__v_raw,o=be(i),c=be(s);return t||(tr(s,c)&&pt(o,"has",s),pt(o,"has",c)),s===c?i.has(s):i.has(s)||i.has(c)},forEach(s,i){const o=this,c=o.__v_raw,l=be(c),u=e?Zc:t?Es:Yt;return!t&&pt(l,"iterate",kr),c.forEach((f,p)=>s.call(i,u(f),u(p),o))}};return yt(n,t?{add:_o("add"),set:_o("set"),delete:_o("delete"),clear:_o("clear")}:{add(s){!e&&!Ft(s)&&!Dn(s)&&(s=be(s));const i=be(this);return mo(i).has.call(i,s)||(i.add(s),Rn(i,"add",s,s)),this},set(s,i){!e&&!Ft(i)&&!Dn(i)&&(i=be(i));const o=be(this),{has:c,get:l}=mo(o);let u=c.call(o,s);u||(s=be(s),u=c.call(o,s));const f=l.call(o,s);return o.set(s,i),u?tr(i,f)&&Rn(o,"set",s,i):Rn(o,"add",s,i),this},delete(s){const i=be(this),{has:o,get:c}=mo(i);let l=o.call(i,s);l||(s=be(s),l=o.call(i,s)),c&&c.call(i,s);const u=i.delete(s);return l&&Rn(i,"delete",s,void 0),u},clear(){const s=be(this),i=s.size!==0,o=s.clear();return i&&Rn(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=ME(s,t,e)}),n}function Jl(t,e){const n=UE(t,e);return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(Se(n,s)&&s in r?n:r,s,i)}const FE={get:Jl(!1,!1)},BE={get:Jl(!1,!0)},jE={get:Jl(!0,!1)};const ng=new WeakMap,rg=new WeakMap,sg=new WeakMap,qE=new WeakMap;function $E(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function HE(t){return t.__v_skip||!Object.isExtensible(t)?0:$E(gE(t))}function Oa(t){return Dn(t)?t:Xl(t,!1,VE,FE,ng)}function ig(t){return Xl(t,!1,LE,BE,rg)}function el(t){return Xl(t,!0,xE,jE,sg)}function Xl(t,e,n,r,s){if(!Oe(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=HE(t);if(i===0)return t;const o=s.get(t);if(o)return o;const c=new Proxy(t,i===2?r:n);return s.set(t,c),c}function Vr(t){return Dn(t)?Vr(t.__v_raw):!!(t&&t.__v_isReactive)}function Dn(t){return!!(t&&t.__v_isReadonly)}function Ft(t){return!!(t&&t.__v_isShallow)}function Zl(t){return t?!!t.__v_raw:!1}function be(t){const e=t&&t.__v_raw;return e?be(e):t}function WE(t){return!Se(t,"__v_skip")&&Object.isExtensible(t)&&Bp(t,"__v_skip",!0),t}const Yt=t=>Oe(t)?Oa(t):t,Es=t=>Oe(t)?el(t):t;function _t(t){return t?t.__v_isRef===!0:!1}function tl(t){return ag(t,!1)}function og(t){return ag(t,!0)}function ag(t,e){return _t(t)?t:new GE(t,e)}class GE{constructor(e,n){this.dep=new Yl,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:be(e),this._value=n?e:Yt(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||Ft(e)||Dn(e);e=r?e:be(e),tr(e,n)&&(this._rawValue=e,this._value=r?e:Yt(e),this.dep.trigger())}}function xr(t){return _t(t)?t.value:t}const zE={get:(t,e,n)=>e==="__v_raw"?t:xr(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return _t(s)&&!_t(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function cg(t){return Vr(t)?t:new Proxy(t,zE)}class KE{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Yl(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ri-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&ke!==this)return zp(this,!0),!0}get value(){const e=this.dep.track();return Yp(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function QE(t,e,n=!1){let r,s;return ge(t)?r=t:(r=t.get,s=t.set),new KE(r,s,n)}const yo={},Jo=new WeakMap;let Cr;function YE(t,e=!1,n=Cr){if(n){let r=Jo.get(n);r||Jo.set(n,r=[]),r.push(t)}}function JE(t,e,n=Ne){const{immediate:r,deep:s,once:i,scheduler:o,augmentJob:c,call:l}=n,u=$=>s?$:Ft($)||s===!1||s===0?bn($,1):bn($);let f,p,g,w,P=!1,O=!1;if(_t(t)?(p=()=>t.value,P=Ft(t)):Vr(t)?(p=()=>u(t),P=!0):he(t)?(O=!0,P=t.some($=>Vr($)||Ft($)),p=()=>t.map($=>{if(_t($))return $.value;if(Vr($))return u($);if(ge($))return l?l($,2):$()})):ge(t)?e?p=l?()=>l(t,2):t:p=()=>{if(g){Pn();try{g()}finally{Nn()}}const $=Cr;Cr=f;try{return l?l(t,3,[w]):t(w)}finally{Cr=$}}:p=ln,e&&s){const $=p,te=s===!0?1/0:s;p=()=>bn($(),te)}const N=bE(),F=()=>{f.stop(),N&&N.active&&jl(N.effects,f)};if(i&&e){const $=e;e=(...te)=>{$(...te),F()}}let B=O?new Array(t.length).fill(yo):yo;const q=$=>{if(!(!(f.flags&1)||!f.dirty&&!$))if(e){const te=f.run();if(s||P||(O?te.some((G,T)=>tr(G,B[T])):tr(te,B))){g&&g();const G=Cr;Cr=f;try{const T=[te,B===yo?void 0:O&&B[0]===yo?[]:B,w];B=te,l?l(e,3,T):e(...T)}finally{Cr=G}}}else f.run()};return c&&c(q),f=new Wp(p),f.scheduler=o?()=>o(q,!1):q,w=$=>YE($,!1,f),g=f.onStop=()=>{const $=Jo.get(f);if($){if(l)l($,4);else for(const te of $)te();Jo.delete(f)}},e?r?q(!0):B=f.run():o?o(q.bind(null,!0),!0):f.run(),F.pause=f.pause.bind(f),F.resume=f.resume.bind(f),F.stop=F,F}function bn(t,e=1/0,n){if(e<=0||!Oe(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,_t(t))bn(t.value,e,n);else if(he(t))for(let r=0;r<t.length;r++)bn(t[r],e,n);else if(ba(t)||ls(t))t.forEach(r=>{bn(r,e,n)});else if(Fp(t)){for(const r in t)bn(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&bn(t[r],e,n)}return t}function $i(t,e,n,r){try{return r?t(...r):t()}catch(s){ka(s,e,n)}}function yn(t,e,n,r){if(ge(t)){const s=$i(t,e,n,r);return s&&Mp(s)&&s.catch(i=>{ka(i,e,n)}),s}if(he(t)){const s=[];for(let i=0;i<t.length;i++)s.push(yn(t[i],e,n,r));return s}}function ka(t,e,n,r=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Ne;if(e){let c=e.parent;const l=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;c;){const f=c.ec;if(f){for(let p=0;p<f.length;p++)if(f[p](t,l,u)===!1)return}c=c.parent}if(i){Pn(),$i(i,null,10,[t,l,u]),Nn();return}}XE(t,n,s,r,o)}function XE(t,e,n,r=!0,s=!1){if(s)throw t;console.error(t)}const At=[];let rn=-1;const us=[];let Gn=null,ts=0;const lg=Promise.resolve();let Xo=null;function ug(t){const e=Xo||lg;return t?e.then(this?t.bind(this):t):e}function ZE(t){let e=rn+1,n=At.length;for(;e<n;){const r=e+n>>>1,s=At[r],i=Si(s);i<t||i===t&&s.flags&2?e=r+1:n=r}return e}function eu(t){if(!(t.flags&1)){const e=Si(t),n=At[At.length-1];!n||!(t.flags&2)&&e>=Si(n)?At.push(t):At.splice(ZE(e),0,t),t.flags|=1,hg()}}function hg(){Xo||(Xo=lg.then(dg))}function eT(t){he(t)?us.push(...t):Gn&&t.id===-1?Gn.splice(ts+1,0,t):t.flags&1||(us.push(t),t.flags|=1),hg()}function tf(t,e,n=rn+1){for(;n<At.length;n++){const r=At[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;At.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function fg(t){if(us.length){const e=[...new Set(us)].sort((n,r)=>Si(n)-Si(r));if(us.length=0,Gn){Gn.push(...e);return}for(Gn=e,ts=0;ts<Gn.length;ts++){const n=Gn[ts];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Gn=null,ts=0}}const Si=t=>t.id==null?t.flags&2?-1:1/0:t.id;function dg(t){try{for(rn=0;rn<At.length;rn++){const e=At[rn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),$i(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;rn<At.length;rn++){const e=At[rn];e&&(e.flags&=-2)}rn=-1,At.length=0,fg(),Xo=null,(At.length||us.length)&&dg()}}let Ot=null,pg=null;function Zo(t){const e=Ot;return Ot=t,pg=t&&t.type.__scopeId||null,e}function gg(t,e=Ot,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&na(-1);const i=Zo(e);let o;try{o=t(...s)}finally{Zo(i),r._d&&na(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function ZN(t,e){if(Ot===null)return t;const n=Ma(Ot),r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,o,c,l=Ne]=e[s];i&&(ge(i)&&(i={mounted:i,updated:i}),i.deep&&bn(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:c,modifiers:l}))}return t}function br(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const c=s[o];i&&(c.oldValue=i[o].value);let l=c.dir[r];l&&(Pn(),yn(l,n,8,[t.el,c,t,e]),Nn())}}const tT=Symbol("_vte"),nT=t=>t.__isTeleport,rT=Symbol("_leaveCb");function tu(t,e){t.shapeFlag&6&&t.component?(t.transition=e,tu(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Hi(t,e){return ge(t)?yt({name:t.name},e,{setup:t}):t}function mg(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function eD(t){const e=jg(),n=og(null);if(e){const s=e.refs===Ne?e.refs={}:e.refs;Object.defineProperty(s,t,{enumerable:!0,get:()=>n.value,set:i=>n.value=i})}return n}const ea=new WeakMap;function fi(t,e,n,r,s=!1){if(he(t)){t.forEach((P,O)=>fi(P,e&&(he(e)?e[O]:e),n,r,s));return}if(di(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&fi(t,e,n,r.component.subTree);return}const i=r.shapeFlag&4?Ma(r.component):r.el,o=s?null:i,{i:c,r:l}=t,u=e&&e.r,f=c.refs===Ne?c.refs={}:c.refs,p=c.setupState,g=be(p),w=p===Ne?Lp:P=>Se(g,P);if(u!=null&&u!==l){if(nf(e),Qe(u))f[u]=null,w(u)&&(p[u]=null);else if(_t(u)){u.value=null;const P=e;P.k&&(f[P.k]=null)}}if(ge(l))$i(l,c,12,[o,f]);else{const P=Qe(l),O=_t(l);if(P||O){const N=()=>{if(t.f){const F=P?w(l)?p[l]:f[l]:l.value;if(s)he(F)&&jl(F,i);else if(he(F))F.includes(i)||F.push(i);else if(P)f[l]=[i],w(l)&&(p[l]=f[l]);else{const B=[i];l.value=B,t.k&&(f[t.k]=B)}}else P?(f[l]=o,w(l)&&(p[l]=o)):O&&(l.value=o,t.k&&(f[t.k]=o))};if(o){const F=()=>{N(),ea.delete(t)};F.id=-1,ea.set(t,F),Dt(F,n)}else nf(t),N()}}}function nf(t){const e=ea.get(t);e&&(e.flags|=8,ea.delete(t))}Pa().requestIdleCallback;Pa().cancelIdleCallback;const di=t=>!!t.type.__asyncLoader,_g=t=>t.type.__isKeepAlive;function sT(t,e){yg(t,"a",e)}function iT(t,e){yg(t,"da",e)}function yg(t,e,n=mt){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(Va(e,r,n),n){let s=n.parent;for(;s&&s.parent;)_g(s.parent.vnode)&&oT(r,e,n,s),s=s.parent}}function oT(t,e,n,r){const s=Va(e,t,r,!0);Tg(()=>{jl(r[e],s)},n)}function Va(t,e,n=mt,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{Pn();const c=Wi(n),l=yn(e,n,t,o);return c(),Nn(),l});return r?s.unshift(i):s.push(i),i}}const Ln=t=>(e,n=mt)=>{(!Ni||t==="sp")&&Va(t,(...r)=>e(...r),n)},aT=Ln("bm"),Eg=Ln("m"),cT=Ln("bu"),lT=Ln("u"),uT=Ln("bum"),Tg=Ln("um"),hT=Ln("sp"),fT=Ln("rtg"),dT=Ln("rtc");function pT(t,e=mt){Va("ec",t,e)}const gT="components";function nu(t,e){return _T(gT,t,!0,e)||t}const mT=Symbol.for("v-ndc");function _T(t,e,n=!0,r=!1){const s=Ot||mt;if(s){const i=s.type;{const c=oI(i,!1);if(c&&(c===e||c===Bt(e)||c===Ca(Bt(e))))return i}const o=rf(s[t]||i[t],e)||rf(s.appContext[t],e);return!o&&r?i:o}}function rf(t,e){return t&&(t[e]||t[Bt(e)]||t[Ca(Bt(e))])}function yT(t,e,n,r){let s;const i=n,o=he(t);if(o||Qe(t)){const c=o&&Vr(t);let l=!1,u=!1;c&&(l=!Ft(t),u=Dn(t),t=Da(t)),s=new Array(t.length);for(let f=0,p=t.length;f<p;f++)s[f]=e(l?u?Es(Yt(t[f])):Yt(t[f]):t[f],f,void 0,i)}else if(typeof t=="number"){s=new Array(t);for(let c=0;c<t;c++)s[c]=e(c+1,c,void 0,i)}else if(Oe(t))if(t[Symbol.iterator])s=Array.from(t,(c,l)=>e(c,l,void 0,i));else{const c=Object.keys(t);s=new Array(c.length);for(let l=0,u=c.length;l<u;l++){const f=c[l];s[l]=e(t[f],f,l,i)}}else s=[];return s}const nl=t=>t?qg(t)?Ma(t):nl(t.parent):null,pi=yt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>nl(t.parent),$root:t=>nl(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>vg(t),$forceUpdate:t=>t.f||(t.f=()=>{eu(t.update)}),$nextTick:t=>t.n||(t.n=ug.bind(t.proxy)),$watch:t=>PT.bind(t)}),Cc=(t,e)=>t!==Ne&&!t.__isScriptSetup&&Se(t,e),ET={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:c,appContext:l}=t;if(e[0]!=="$"){const g=o[e];if(g!==void 0)switch(g){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(Cc(r,e))return o[e]=1,r[e];if(s!==Ne&&Se(s,e))return o[e]=2,s[e];if(Se(i,e))return o[e]=3,i[e];if(n!==Ne&&Se(n,e))return o[e]=4,n[e];rl&&(o[e]=0)}}const u=pi[e];let f,p;if(u)return e==="$attrs"&&pt(t.attrs,"get",""),u(t);if((f=c.__cssModules)&&(f=f[e]))return f;if(n!==Ne&&Se(n,e))return o[e]=4,n[e];if(p=l.config.globalProperties,Se(p,e))return p[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return Cc(s,e)?(s[e]=n,!0):r!==Ne&&Se(r,e)?(r[e]=n,!0):Se(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,props:i,type:o}},c){let l;return!!(n[c]||t!==Ne&&c[0]!=="$"&&Se(t,c)||Cc(e,c)||Se(i,c)||Se(r,c)||Se(pi,c)||Se(s.config.globalProperties,c)||(l=o.__cssModules)&&l[c])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Se(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function sf(t){return he(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let rl=!0;function TT(t){const e=vg(t),n=t.proxy,r=t.ctx;rl=!1,e.beforeCreate&&of(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:c,provide:l,inject:u,created:f,beforeMount:p,mounted:g,beforeUpdate:w,updated:P,activated:O,deactivated:N,beforeDestroy:F,beforeUnmount:B,destroyed:q,unmounted:$,render:te,renderTracked:G,renderTriggered:T,errorCaptured:E,serverPrefetch:v,expose:_,inheritAttrs:I,components:R,directives:y,filters:ee}=e;if(u&&IT(u,r,null),o)for(const fe in o){const ce=o[fe];ge(ce)&&(r[fe]=ce.bind(n))}if(s){const fe=s.call(n,n);Oe(fe)&&(t.data=Oa(fe))}if(rl=!0,i)for(const fe in i){const ce=i[fe],xe=ge(ce)?ce.bind(n,n):ge(ce.get)?ce.get.bind(n,n):ln,Lt=!ge(ce)&&ge(ce.set)?ce.set.bind(n):ln,We=Wt({get:xe,set:Lt});Object.defineProperty(r,fe,{enumerable:!0,configurable:!0,get:()=>We.value,set:rt=>We.value=rt})}if(c)for(const fe in c)Ig(c[fe],r,n,fe);if(l){const fe=ge(l)?l.call(n):l;Reflect.ownKeys(fe).forEach(ce=>{No(ce,fe[ce])})}f&&of(f,t,"c");function me(fe,ce){he(ce)?ce.forEach(xe=>fe(xe.bind(n))):ce&&fe(ce.bind(n))}if(me(aT,p),me(Eg,g),me(cT,w),me(lT,P),me(sT,O),me(iT,N),me(pT,E),me(dT,G),me(fT,T),me(uT,B),me(Tg,$),me(hT,v),he(_))if(_.length){const fe=t.exposed||(t.exposed={});_.forEach(ce=>{Object.defineProperty(fe,ce,{get:()=>n[ce],set:xe=>n[ce]=xe,enumerable:!0})})}else t.exposed||(t.exposed={});te&&t.render===ln&&(t.render=te),I!=null&&(t.inheritAttrs=I),R&&(t.components=R),y&&(t.directives=y),v&&mg(t)}function IT(t,e,n=ln){he(t)&&(t=sl(t));for(const r in t){const s=t[r];let i;Oe(s)?"default"in s?i=Kt(s.from||r,s.default,!0):i=Kt(s.from||r):i=Kt(s),_t(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function of(t,e,n){yn(he(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function Ig(t,e,n,r){let s=r.includes(".")?Rg(n,r):()=>n[r];if(Qe(t)){const i=e[t];ge(i)&&gi(s,i)}else if(ge(t))gi(s,t.bind(n));else if(Oe(t))if(he(t))t.forEach(i=>Ig(i,e,n,r));else{const i=ge(t.handler)?t.handler.bind(n):e[t.handler];ge(i)&&gi(s,i,t)}}function vg(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,c=i.get(e);let l;return c?l=c:!s.length&&!n&&!r?l=e:(l={},s.length&&s.forEach(u=>ta(l,u,o,!0)),ta(l,e,o)),Oe(e)&&i.set(e,l),l}function ta(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&ta(t,i,n,!0),s&&s.forEach(o=>ta(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const c=vT[o]||n&&n[o];t[o]=c?c(t[o],e[o]):e[o]}return t}const vT={data:af,props:cf,emits:cf,methods:ni,computed:ni,beforeCreate:vt,created:vt,beforeMount:vt,mounted:vt,beforeUpdate:vt,updated:vt,beforeDestroy:vt,beforeUnmount:vt,destroyed:vt,unmounted:vt,activated:vt,deactivated:vt,errorCaptured:vt,serverPrefetch:vt,components:ni,directives:ni,watch:AT,provide:af,inject:wT};function af(t,e){return e?t?function(){return yt(ge(t)?t.call(this,this):t,ge(e)?e.call(this,this):e)}:e:t}function wT(t,e){return ni(sl(t),sl(e))}function sl(t){if(he(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function vt(t,e){return t?[...new Set([].concat(t,e))]:e}function ni(t,e){return t?yt(Object.create(null),t,e):e}function cf(t,e){return t?he(t)&&he(e)?[...new Set([...t,...e])]:yt(Object.create(null),sf(t),sf(e??{})):e}function AT(t,e){if(!t)return e;if(!e)return t;const n=yt(Object.create(null),t);for(const r in e)n[r]=vt(t[r],e[r]);return n}function wg(){return{app:null,config:{isNativeTag:Lp,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let RT=0;function bT(t,e){return function(r,s=null){ge(r)||(r=yt({},r)),s!=null&&!Oe(s)&&(s=null);const i=wg(),o=new WeakSet,c=[];let l=!1;const u=i.app={_uid:RT++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:cI,get config(){return i.config},set config(f){},use(f,...p){return o.has(f)||(f&&ge(f.install)?(o.add(f),f.install(u,...p)):ge(f)&&(o.add(f),f(u,...p))),u},mixin(f){return i.mixins.includes(f)||i.mixins.push(f),u},component(f,p){return p?(i.components[f]=p,u):i.components[f]},directive(f,p){return p?(i.directives[f]=p,u):i.directives[f]},mount(f,p,g){if(!l){const w=u._ceVNode||at(r,s);return w.appContext=i,g===!0?g="svg":g===!1&&(g=void 0),t(w,f,g),l=!0,u._container=f,f.__vue_app__=u,Ma(w.component)}},onUnmount(f){c.push(f)},unmount(){l&&(yn(c,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(f,p){return i.provides[f]=p,u},runWithContext(f){const p=hs;hs=u;try{return f()}finally{hs=p}}};return u}}let hs=null;function No(t,e){if(mt){let n=mt.provides;const r=mt.parent&&mt.parent.provides;r===n&&(n=mt.provides=Object.create(r)),n[t]=e}}function Kt(t,e,n=!1){const r=jg();if(r||hs){let s=hs?hs._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&ge(e)?e.call(r&&r.proxy):e}}const ST=Symbol.for("v-scx"),CT=()=>Kt(ST);function gi(t,e,n){return Ag(t,e,n)}function Ag(t,e,n=Ne){const{immediate:r,deep:s,flush:i,once:o}=n,c=yt({},n),l=e&&r||!e&&i!=="post";let u;if(Ni){if(i==="sync"){const w=CT();u=w.__watcherHandles||(w.__watcherHandles=[])}else if(!l){const w=()=>{};return w.stop=ln,w.resume=ln,w.pause=ln,w}}const f=mt;c.call=(w,P,O)=>yn(w,f,P,O);let p=!1;i==="post"?c.scheduler=w=>{Dt(w,f&&f.suspense)}:i!=="sync"&&(p=!0,c.scheduler=(w,P)=>{P?w():eu(w)}),c.augmentJob=w=>{e&&(w.flags|=4),p&&(w.flags|=2,f&&(w.id=f.uid,w.i=f))};const g=JE(t,e,c);return Ni&&(u?u.push(g):l&&g()),g}function PT(t,e,n){const r=this.proxy,s=Qe(t)?t.includes(".")?Rg(r,t):()=>r[t]:t.bind(r,r);let i;ge(e)?i=e:(i=e.handler,n=e);const o=Wi(this),c=Ag(s,i.bind(r),n);return o(),c}function Rg(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const NT=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Bt(e)}Modifiers`]||t[`${Hr(e)}Modifiers`];function DT(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||Ne;let s=n;const i=e.startsWith("update:"),o=i&&NT(r,e.slice(7));o&&(o.trim&&(s=n.map(f=>Qe(f)?f.trim():f)),o.number&&(s=n.map($l)));let c,l=r[c=wc(e)]||r[c=wc(Bt(e))];!l&&i&&(l=r[c=wc(Hr(e))]),l&&yn(l,t,6,s);const u=r[c+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[c])return;t.emitted[c]=!0,yn(u,t,6,s)}}const OT=new WeakMap;function bg(t,e,n=!1){const r=n?OT:e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},c=!1;if(!ge(t)){const l=u=>{const f=bg(u,e,!0);f&&(c=!0,yt(o,f))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!c?(Oe(t)&&r.set(t,null),null):(he(i)?i.forEach(l=>o[l]=null):yt(o,i),Oe(t)&&r.set(t,o),o)}function xa(t,e){return!t||!Ra(e)?!1:(e=e.slice(2).replace(/Once$/,""),Se(t,e[0].toLowerCase()+e.slice(1))||Se(t,Hr(e))||Se(t,e))}function lf(t){const{type:e,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:o,attrs:c,emit:l,render:u,renderCache:f,props:p,data:g,setupState:w,ctx:P,inheritAttrs:O}=t,N=Zo(t);let F,B;try{if(n.shapeFlag&4){const $=s||r,te=$;F=an(u.call(te,$,f,p,w,g,P)),B=c}else{const $=e;F=an($.length>1?$(p,{attrs:c,slots:o,emit:l}):$(p,null)),B=e.props?c:kT(c)}}catch($){mi.length=0,ka($,t,1),F=at(lr)}let q=F;if(B&&O!==!1){const $=Object.keys(B),{shapeFlag:te}=q;$.length&&te&7&&(i&&$.some(Bl)&&(B=VT(B,i)),q=Ts(q,B,!1,!0))}return n.dirs&&(q=Ts(q,null,!1,!0),q.dirs=q.dirs?q.dirs.concat(n.dirs):n.dirs),n.transition&&tu(q,n.transition),F=q,Zo(N),F}const kT=t=>{let e;for(const n in t)(n==="class"||n==="style"||Ra(n))&&((e||(e={}))[n]=t[n]);return e},VT=(t,e)=>{const n={};for(const r in t)(!Bl(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function xT(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:c,patchFlag:l}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?uf(r,o,u):!!o;if(l&8){const f=e.dynamicProps;for(let p=0;p<f.length;p++){const g=f[p];if(o[g]!==r[g]&&!xa(u,g))return!0}}}else return(s||c)&&(!c||!c.$stable)?!0:r===o?!1:r?o?uf(r,o,u):!0:!!o;return!1}function uf(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!xa(n,i))return!0}return!1}function LT({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const Sg={},Cg=()=>Object.create(Sg),Pg=t=>Object.getPrototypeOf(t)===Sg;function MT(t,e,n,r=!1){const s={},i=Cg();t.propsDefaults=Object.create(null),Ng(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:ig(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function UT(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,c=be(s),[l]=t.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const f=t.vnode.dynamicProps;for(let p=0;p<f.length;p++){let g=f[p];if(xa(t.emitsOptions,g))continue;const w=e[g];if(l)if(Se(i,g))w!==i[g]&&(i[g]=w,u=!0);else{const P=Bt(g);s[P]=il(l,c,P,w,t,!1)}else w!==i[g]&&(i[g]=w,u=!0)}}}else{Ng(t,e,s,i)&&(u=!0);let f;for(const p in c)(!e||!Se(e,p)&&((f=Hr(p))===p||!Se(e,f)))&&(l?n&&(n[p]!==void 0||n[f]!==void 0)&&(s[p]=il(l,c,p,void 0,t,!0)):delete s[p]);if(i!==c)for(const p in i)(!e||!Se(e,p))&&(delete i[p],u=!0)}u&&Rn(t.attrs,"set","")}function Ng(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,c;if(e)for(let l in e){if(li(l))continue;const u=e[l];let f;s&&Se(s,f=Bt(l))?!i||!i.includes(f)?n[f]=u:(c||(c={}))[f]=u:xa(t.emitsOptions,l)||(!(l in r)||u!==r[l])&&(r[l]=u,o=!0)}if(i){const l=be(n),u=c||Ne;for(let f=0;f<i.length;f++){const p=i[f];n[p]=il(s,l,p,u[p],t,!Se(u,p))}}return o}function il(t,e,n,r,s,i){const o=t[n];if(o!=null){const c=Se(o,"default");if(c&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&ge(l)){const{propsDefaults:u}=s;if(n in u)r=u[n];else{const f=Wi(s);r=u[n]=l.call(null,e),f()}}else r=l;s.ce&&s.ce._setProp(n,r)}o[0]&&(i&&!c?r=!1:o[1]&&(r===""||r===Hr(n))&&(r=!0))}return r}const FT=new WeakMap;function Dg(t,e,n=!1){const r=n?FT:e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},c=[];let l=!1;if(!ge(t)){const f=p=>{l=!0;const[g,w]=Dg(p,e,!0);yt(o,g),w&&c.push(...w)};!n&&e.mixins.length&&e.mixins.forEach(f),t.extends&&f(t.extends),t.mixins&&t.mixins.forEach(f)}if(!i&&!l)return Oe(t)&&r.set(t,cs),cs;if(he(i))for(let f=0;f<i.length;f++){const p=Bt(i[f]);hf(p)&&(o[p]=Ne)}else if(i)for(const f in i){const p=Bt(f);if(hf(p)){const g=i[f],w=o[p]=he(g)||ge(g)?{type:g}:yt({},g),P=w.type;let O=!1,N=!0;if(he(P))for(let F=0;F<P.length;++F){const B=P[F],q=ge(B)&&B.name;if(q==="Boolean"){O=!0;break}else q==="String"&&(N=!1)}else O=ge(P)&&P.name==="Boolean";w[0]=O,w[1]=N,(O||Se(w,"default"))&&c.push(p)}}const u=[o,c];return Oe(t)&&r.set(t,u),u}function hf(t){return t[0]!=="$"&&!li(t)}const ru=t=>t==="_"||t==="_ctx"||t==="$stable",su=t=>he(t)?t.map(an):[an(t)],BT=(t,e,n)=>{if(e._n)return e;const r=gg((...s)=>su(e(...s)),n);return r._c=!1,r},Og=(t,e,n)=>{const r=t._ctx;for(const s in t){if(ru(s))continue;const i=t[s];if(ge(i))e[s]=BT(s,i,r);else if(i!=null){const o=su(i);e[s]=()=>o}}},kg=(t,e)=>{const n=su(e);t.slots.default=()=>n},Vg=(t,e,n)=>{for(const r in e)(n||!ru(r))&&(t[r]=e[r])},jT=(t,e,n)=>{const r=t.slots=Cg();if(t.vnode.shapeFlag&32){const s=e._;s?(Vg(r,e,n),n&&Bp(r,"_",s,!0)):Og(e,r)}else e&&kg(t,e)},qT=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=Ne;if(r.shapeFlag&32){const c=e._;c?n&&c===1?i=!1:Vg(s,e,n):(i=!e.$stable,Og(e,s)),o=e}else e&&(kg(t,e),o={default:1});if(i)for(const c in s)!ru(c)&&o[c]==null&&delete s[c]},Dt=zT;function $T(t){return HT(t)}function HT(t,e){const n=Pa();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:c,createComment:l,setText:u,setElementText:f,parentNode:p,nextSibling:g,setScopeId:w=ln,insertStaticContent:P}=t,O=(A,b,S,L=null,U=null,k=null,K=void 0,W=null,H=!!b.dynamicChildren)=>{if(A===b)return;A&&!Zs(A,b)&&(L=V(A),rt(A,U,k,!0),A=null),b.patchFlag===-2&&(H=!1,b.dynamicChildren=null);const{type:j,ref:oe,shapeFlag:Y}=b;switch(j){case La:N(A,b,S,L);break;case lr:F(A,b,S,L);break;case Do:A==null&&B(b,S,L,K);break;case on:R(A,b,S,L,U,k,K,W,H);break;default:Y&1?te(A,b,S,L,U,k,K,W,H):Y&6?y(A,b,S,L,U,k,K,W,H):(Y&64||Y&128)&&j.process(A,b,S,L,U,k,K,W,H,ne)}oe!=null&&U?fi(oe,A&&A.ref,k,b||A,!b):oe==null&&A&&A.ref!=null&&fi(A.ref,null,k,A,!0)},N=(A,b,S,L)=>{if(A==null)r(b.el=c(b.children),S,L);else{const U=b.el=A.el;b.children!==A.children&&u(U,b.children)}},F=(A,b,S,L)=>{A==null?r(b.el=l(b.children||""),S,L):b.el=A.el},B=(A,b,S,L)=>{[A.el,A.anchor]=P(A.children,b,S,L,A.el,A.anchor)},q=({el:A,anchor:b},S,L)=>{let U;for(;A&&A!==b;)U=g(A),r(A,S,L),A=U;r(b,S,L)},$=({el:A,anchor:b})=>{let S;for(;A&&A!==b;)S=g(A),s(A),A=S;s(b)},te=(A,b,S,L,U,k,K,W,H)=>{if(b.type==="svg"?K="svg":b.type==="math"&&(K="mathml"),A==null)G(b,S,L,U,k,K,W,H);else{const j=A.el&&A.el._isVueCE?A.el:null;try{j&&j._beginPatch(),v(A,b,U,k,K,W,H)}finally{j&&j._endPatch()}}},G=(A,b,S,L,U,k,K,W)=>{let H,j;const{props:oe,shapeFlag:Y,transition:se,dirs:ae}=A;if(H=A.el=o(A.type,k,oe&&oe.is,oe),Y&8?f(H,A.children):Y&16&&E(A.children,H,null,L,U,Pc(A,k),K,W),ae&&br(A,null,L,"created"),T(H,A,A.scopeId,K,L),oe){for(const Pe in oe)Pe!=="value"&&!li(Pe)&&i(H,Pe,null,oe[Pe],k,L);"value"in oe&&i(H,"value",null,oe.value,k),(j=oe.onVnodeBeforeMount)&&nn(j,L,A)}ae&&br(A,null,L,"beforeMount");const ye=WT(U,se);ye&&se.beforeEnter(H),r(H,b,S),((j=oe&&oe.onVnodeMounted)||ye||ae)&&Dt(()=>{j&&nn(j,L,A),ye&&se.enter(H),ae&&br(A,null,L,"mounted")},U)},T=(A,b,S,L,U)=>{if(S&&w(A,S),L)for(let k=0;k<L.length;k++)w(A,L[k]);if(U){let k=U.subTree;if(b===k||Mg(k.type)&&(k.ssContent===b||k.ssFallback===b)){const K=U.vnode;T(A,K,K.scopeId,K.slotScopeIds,U.parent)}}},E=(A,b,S,L,U,k,K,W,H=0)=>{for(let j=H;j<A.length;j++){const oe=A[j]=W?zn(A[j]):an(A[j]);O(null,oe,b,S,L,U,k,K,W)}},v=(A,b,S,L,U,k,K)=>{const W=b.el=A.el;let{patchFlag:H,dynamicChildren:j,dirs:oe}=b;H|=A.patchFlag&16;const Y=A.props||Ne,se=b.props||Ne;let ae;if(S&&Sr(S,!1),(ae=se.onVnodeBeforeUpdate)&&nn(ae,S,b,A),oe&&br(b,A,S,"beforeUpdate"),S&&Sr(S,!0),(Y.innerHTML&&se.innerHTML==null||Y.textContent&&se.textContent==null)&&f(W,""),j?_(A.dynamicChildren,j,W,S,L,Pc(b,U),k):K||ce(A,b,W,null,S,L,Pc(b,U),k,!1),H>0){if(H&16)I(W,Y,se,S,U);else if(H&2&&Y.class!==se.class&&i(W,"class",null,se.class,U),H&4&&i(W,"style",Y.style,se.style,U),H&8){const ye=b.dynamicProps;for(let Pe=0;Pe<ye.length;Pe++){const Ae=ye[Pe],ut=Y[Ae],ht=se[Ae];(ht!==ut||Ae==="value")&&i(W,Ae,ut,ht,U,S)}}H&1&&A.children!==b.children&&f(W,b.children)}else!K&&j==null&&I(W,Y,se,S,U);((ae=se.onVnodeUpdated)||oe)&&Dt(()=>{ae&&nn(ae,S,b,A),oe&&br(b,A,S,"updated")},L)},_=(A,b,S,L,U,k,K)=>{for(let W=0;W<b.length;W++){const H=A[W],j=b[W],oe=H.el&&(H.type===on||!Zs(H,j)||H.shapeFlag&198)?p(H.el):S;O(H,j,oe,null,L,U,k,K,!0)}},I=(A,b,S,L,U)=>{if(b!==S){if(b!==Ne)for(const k in b)!li(k)&&!(k in S)&&i(A,k,b[k],null,U,L);for(const k in S){if(li(k))continue;const K=S[k],W=b[k];K!==W&&k!=="value"&&i(A,k,W,K,U,L)}"value"in S&&i(A,"value",b.value,S.value,U)}},R=(A,b,S,L,U,k,K,W,H)=>{const j=b.el=A?A.el:c(""),oe=b.anchor=A?A.anchor:c("");let{patchFlag:Y,dynamicChildren:se,slotScopeIds:ae}=b;ae&&(W=W?W.concat(ae):ae),A==null?(r(j,S,L),r(oe,S,L),E(b.children||[],S,oe,U,k,K,W,H)):Y>0&&Y&64&&se&&A.dynamicChildren?(_(A.dynamicChildren,se,S,U,k,K,W),(b.key!=null||U&&b===U.subTree)&&xg(A,b,!0)):ce(A,b,S,oe,U,k,K,W,H)},y=(A,b,S,L,U,k,K,W,H)=>{b.slotScopeIds=W,A==null?b.shapeFlag&512?U.ctx.activate(b,S,L,K,H):ee(b,S,L,U,k,K,H):ie(A,b,H)},ee=(A,b,S,L,U,k,K)=>{const W=A.component=tI(A,L,U);if(_g(A)&&(W.ctx.renderer=ne),nI(W,!1,K),W.asyncDep){if(U&&U.registerDep(W,me,K),!A.el){const H=W.subTree=at(lr);F(null,H,b,S),A.placeholder=H.el}}else me(W,A,b,S,U,k,K)},ie=(A,b,S)=>{const L=b.component=A.component;if(xT(A,b,S))if(L.asyncDep&&!L.asyncResolved){fe(L,b,S);return}else L.next=b,L.update();else b.el=A.el,L.vnode=b},me=(A,b,S,L,U,k,K)=>{const W=()=>{if(A.isMounted){let{next:Y,bu:se,u:ae,parent:ye,vnode:Pe}=A;{const Pt=Lg(A);if(Pt){Y&&(Y.el=Pe.el,fe(A,Y,K)),Pt.asyncDep.then(()=>{A.isUnmounted||W()});return}}let Ae=Y,ut;Sr(A,!1),Y?(Y.el=Pe.el,fe(A,Y,K)):Y=Pe,se&&Po(se),(ut=Y.props&&Y.props.onVnodeBeforeUpdate)&&nn(ut,ye,Y,Pe),Sr(A,!0);const ht=lf(A),Ct=A.subTree;A.subTree=ht,O(Ct,ht,p(Ct.el),V(Ct),A,U,k),Y.el=ht.el,Ae===null&&LT(A,ht.el),ae&&Dt(ae,U),(ut=Y.props&&Y.props.onVnodeUpdated)&&Dt(()=>nn(ut,ye,Y,Pe),U)}else{let Y;const{el:se,props:ae}=b,{bm:ye,m:Pe,parent:Ae,root:ut,type:ht}=A,Ct=di(b);Sr(A,!1),ye&&Po(ye),!Ct&&(Y=ae&&ae.onVnodeBeforeMount)&&nn(Y,Ae,b),Sr(A,!0);{ut.ce&&ut.ce._def.shadowRoot!==!1&&ut.ce._injectChildStyle(ht);const Pt=A.subTree=lf(A);O(null,Pt,S,L,A,U,k),b.el=Pt.el}if(Pe&&Dt(Pe,U),!Ct&&(Y=ae&&ae.onVnodeMounted)){const Pt=b;Dt(()=>nn(Y,Ae,Pt),U)}(b.shapeFlag&256||Ae&&di(Ae.vnode)&&Ae.vnode.shapeFlag&256)&&A.a&&Dt(A.a,U),A.isMounted=!0,b=S=L=null}};A.scope.on();const H=A.effect=new Wp(W);A.scope.off();const j=A.update=H.run.bind(H),oe=A.job=H.runIfDirty.bind(H);oe.i=A,oe.id=A.uid,H.scheduler=()=>eu(oe),Sr(A,!0),j()},fe=(A,b,S)=>{b.component=A;const L=A.vnode.props;A.vnode=b,A.next=null,UT(A,b.props,L,S),qT(A,b.children,S),Pn(),tf(A),Nn()},ce=(A,b,S,L,U,k,K,W,H=!1)=>{const j=A&&A.children,oe=A?A.shapeFlag:0,Y=b.children,{patchFlag:se,shapeFlag:ae}=b;if(se>0){if(se&128){Lt(j,Y,S,L,U,k,K,W,H);return}else if(se&256){xe(j,Y,S,L,U,k,K,W,H);return}}ae&8?(oe&16&&lt(j,U,k),Y!==j&&f(S,Y)):oe&16?ae&16?Lt(j,Y,S,L,U,k,K,W,H):lt(j,U,k,!0):(oe&8&&f(S,""),ae&16&&E(Y,S,L,U,k,K,W,H))},xe=(A,b,S,L,U,k,K,W,H)=>{A=A||cs,b=b||cs;const j=A.length,oe=b.length,Y=Math.min(j,oe);let se;for(se=0;se<Y;se++){const ae=b[se]=H?zn(b[se]):an(b[se]);O(A[se],ae,S,null,U,k,K,W,H)}j>oe?lt(A,U,k,!0,!1,Y):E(b,S,L,U,k,K,W,H,Y)},Lt=(A,b,S,L,U,k,K,W,H)=>{let j=0;const oe=b.length;let Y=A.length-1,se=oe-1;for(;j<=Y&&j<=se;){const ae=A[j],ye=b[j]=H?zn(b[j]):an(b[j]);if(Zs(ae,ye))O(ae,ye,S,null,U,k,K,W,H);else break;j++}for(;j<=Y&&j<=se;){const ae=A[Y],ye=b[se]=H?zn(b[se]):an(b[se]);if(Zs(ae,ye))O(ae,ye,S,null,U,k,K,W,H);else break;Y--,se--}if(j>Y){if(j<=se){const ae=se+1,ye=ae<oe?b[ae].el:L;for(;j<=se;)O(null,b[j]=H?zn(b[j]):an(b[j]),S,ye,U,k,K,W,H),j++}}else if(j>se)for(;j<=Y;)rt(A[j],U,k,!0),j++;else{const ae=j,ye=j,Pe=new Map;for(j=ye;j<=se;j++){const st=b[j]=H?zn(b[j]):an(b[j]);st.key!=null&&Pe.set(st.key,j)}let Ae,ut=0;const ht=se-ye+1;let Ct=!1,Pt=0;const $t=new Array(ht);for(j=0;j<ht;j++)$t[j]=0;for(j=ae;j<=Y;j++){const st=A[j];if(ut>=ht){rt(st,U,k,!0);continue}let et;if(st.key!=null)et=Pe.get(st.key);else for(Ae=ye;Ae<=se;Ae++)if($t[Ae-ye]===0&&Zs(st,b[Ae])){et=Ae;break}et===void 0?rt(st,U,k,!0):($t[et-ye]=j+1,et>=Pt?Pt=et:Ct=!0,O(st,b[et],S,null,U,k,K,W,H),ut++)}const Yr=Ct?GT($t):cs;for(Ae=Yr.length-1,j=ht-1;j>=0;j--){const st=ye+j,et=b[st],Ms=b[st+1],Ir=st+1<oe?Ms.el||Ms.placeholder:L;$t[j]===0?O(null,et,S,Ir,U,k,K,W,H):Ct&&(Ae<0||j!==Yr[Ae]?We(et,S,Ir,2):Ae--)}}},We=(A,b,S,L,U=null)=>{const{el:k,type:K,transition:W,children:H,shapeFlag:j}=A;if(j&6){We(A.component.subTree,b,S,L);return}if(j&128){A.suspense.move(b,S,L);return}if(j&64){K.move(A,b,S,ne);return}if(K===on){r(k,b,S);for(let Y=0;Y<H.length;Y++)We(H[Y],b,S,L);r(A.anchor,b,S);return}if(K===Do){q(A,b,S);return}if(L!==2&&j&1&&W)if(L===0)W.beforeEnter(k),r(k,b,S),Dt(()=>W.enter(k),U);else{const{leave:Y,delayLeave:se,afterLeave:ae}=W,ye=()=>{A.ctx.isUnmounted?s(k):r(k,b,S)},Pe=()=>{k._isLeaving&&k[rT](!0),Y(k,()=>{ye(),ae&&ae()})};se?se(k,ye,Pe):Pe()}else r(k,b,S)},rt=(A,b,S,L=!1,U=!1)=>{const{type:k,props:K,ref:W,children:H,dynamicChildren:j,shapeFlag:oe,patchFlag:Y,dirs:se,cacheIndex:ae}=A;if(Y===-2&&(U=!1),W!=null&&(Pn(),fi(W,null,S,A,!0),Nn()),ae!=null&&(b.renderCache[ae]=void 0),oe&256){b.ctx.deactivate(A);return}const ye=oe&1&&se,Pe=!di(A);let Ae;if(Pe&&(Ae=K&&K.onVnodeBeforeUnmount)&&nn(Ae,b,A),oe&6)qt(A.component,S,L);else{if(oe&128){A.suspense.unmount(S,L);return}ye&&br(A,null,b,"beforeUnmount"),oe&64?A.type.remove(A,b,S,ne,L):j&&!j.hasOnce&&(k!==on||Y>0&&Y&64)?lt(j,b,S,!1,!0):(k===on&&Y&384||!U&&oe&16)&&lt(H,b,S),L&&In(A)}(Pe&&(Ae=K&&K.onVnodeUnmounted)||ye)&&Dt(()=>{Ae&&nn(Ae,b,A),ye&&br(A,null,b,"unmounted")},S)},In=A=>{const{type:b,el:S,anchor:L,transition:U}=A;if(b===on){jt(S,L);return}if(b===Do){$(A);return}const k=()=>{s(S),U&&!U.persisted&&U.afterLeave&&U.afterLeave()};if(A.shapeFlag&1&&U&&!U.persisted){const{leave:K,delayLeave:W}=U,H=()=>K(S,k);W?W(A.el,k,H):H()}else k()},jt=(A,b)=>{let S;for(;A!==b;)S=g(A),s(A),A=S;s(b)},qt=(A,b,S)=>{const{bum:L,scope:U,job:k,subTree:K,um:W,m:H,a:j}=A;ff(H),ff(j),L&&Po(L),U.stop(),k&&(k.flags|=8,rt(K,A,b,S)),W&&Dt(W,b),Dt(()=>{A.isUnmounted=!0},b)},lt=(A,b,S,L=!1,U=!1,k=0)=>{for(let K=k;K<A.length;K++)rt(A[K],b,S,L,U)},V=A=>{if(A.shapeFlag&6)return V(A.component.subTree);if(A.shapeFlag&128)return A.suspense.next();const b=g(A.anchor||A.el),S=b&&b[tT];return S?g(S):b};let X=!1;const Q=(A,b,S)=>{A==null?b._vnode&&rt(b._vnode,null,null,!0):O(b._vnode||null,A,b,null,null,null,S),b._vnode=A,X||(X=!0,tf(),fg(),X=!1)},ne={p:O,um:rt,m:We,r:In,mt:ee,mc:E,pc:ce,pbc:_,n:V,o:t};return{render:Q,hydrate:void 0,createApp:bT(Q)}}function Pc({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Sr({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function WT(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function xg(t,e,n=!1){const r=t.children,s=e.children;if(he(r)&&he(s))for(let i=0;i<r.length;i++){const o=r[i];let c=s[i];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=s[i]=zn(s[i]),c.el=o.el),!n&&c.patchFlag!==-2&&xg(o,c)),c.type===La&&c.patchFlag!==-1&&(c.el=o.el),c.type===lr&&!c.el&&(c.el=o.el)}}function GT(t){const e=t.slice(),n=[0];let r,s,i,o,c;const l=t.length;for(r=0;r<l;r++){const u=t[r];if(u!==0){if(s=n[n.length-1],t[s]<u){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)c=i+o>>1,t[n[c]]<u?i=c+1:o=c;u<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function Lg(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Lg(e)}function ff(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const Mg=t=>t.__isSuspense;function zT(t,e){e&&e.pendingBranch?he(t)?e.effects.push(...t):e.effects.push(t):eT(t)}const on=Symbol.for("v-fgt"),La=Symbol.for("v-txt"),lr=Symbol.for("v-cmt"),Do=Symbol.for("v-stc"),mi=[];let kt=null;function nr(t=!1){mi.push(kt=t?null:[])}function KT(){mi.pop(),kt=mi[mi.length-1]||null}let Ci=1;function na(t,e=!1){Ci+=t,t<0&&kt&&e&&(kt.hasOnce=!0)}function Ug(t){return t.dynamicChildren=Ci>0?kt||cs:null,KT(),Ci>0&&kt&&kt.push(t),t}function Pi(t,e,n,r,s,i){return Ug(Ht(t,e,n,r,s,i,!0))}function iu(t,e,n,r,s){return Ug(at(t,e,n,r,s,!0))}function ra(t){return t?t.__v_isVNode===!0:!1}function Zs(t,e){return t.type===e.type&&t.key===e.key}const Fg=({key:t})=>t??null,Oo=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Qe(t)||_t(t)||ge(t)?{i:Ot,r:t,k:e,f:!!n}:t:null);function Ht(t,e=null,n=null,r=0,s=null,i=t===on?0:1,o=!1,c=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Fg(e),ref:e&&Oo(e),scopeId:pg,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Ot};return c?(ou(l,n),i&128&&t.normalize(l)):n&&(l.shapeFlag|=Qe(n)?8:16),Ci>0&&!o&&kt&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&kt.push(l),l}const at=QT;function QT(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===mT)&&(t=lr),ra(t)){const c=Ts(t,e,!0);return n&&ou(c,n),Ci>0&&!i&&kt&&(c.shapeFlag&6?kt[kt.indexOf(t)]=c:kt.push(c)),c.patchFlag=-2,c}if(aI(t)&&(t=t.__vccOpts),e){e=YT(e);let{class:c,style:l}=e;c&&!Qe(c)&&(e.class=Wl(c)),Oe(l)&&(Zl(l)&&!he(l)&&(l=yt({},l)),e.style=Hl(l))}const o=Qe(t)?1:Mg(t)?128:nT(t)?64:Oe(t)?4:ge(t)?2:0;return Ht(t,e,n,r,s,o,i,!0)}function YT(t){return t?Zl(t)||Pg(t)?yt({},t):t:null}function Ts(t,e,n=!1,r=!1){const{props:s,ref:i,patchFlag:o,children:c,transition:l}=t,u=e?XT(s||{},e):s,f={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&Fg(u),ref:e&&e.ref?n&&i?he(i)?i.concat(Oo(e)):[i,Oo(e)]:Oo(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:c,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==on?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Ts(t.ssContent),ssFallback:t.ssFallback&&Ts(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&tu(f,l.clone(f)),f}function Bg(t=" ",e=0){return at(La,null,t,e)}function tD(t,e){const n=at(Do,null,t);return n.staticCount=e,n}function JT(t="",e=!1){return e?(nr(),iu(lr,null,t)):at(lr,null,t)}function an(t){return t==null||typeof t=="boolean"?at(lr):he(t)?at(on,null,t.slice()):ra(t)?zn(t):at(La,null,String(t))}function zn(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Ts(t)}function ou(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(he(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),ou(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!Pg(e)?e._ctx=Ot:s===3&&Ot&&(Ot.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else ge(e)?(e={default:e,_ctx:Ot},n=32):(e=String(e),r&64?(n=16,e=[Bg(e)]):n=8);t.children=e,t.shapeFlag|=n}function XT(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=Wl([e.class,r.class]));else if(s==="style")e.style=Hl([e.style,r.style]);else if(Ra(s)){const i=e[s],o=r[s];o&&i!==o&&!(he(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function nn(t,e,n,r=null){yn(t,e,7,[n,r])}const ZT=wg();let eI=0;function tI(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||ZT,i={uid:eI++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new RE(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Dg(r,s),emitsOptions:bg(r,s),emit:null,emitted:null,propsDefaults:Ne,inheritAttrs:r.inheritAttrs,ctx:Ne,data:Ne,props:Ne,attrs:Ne,slots:Ne,refs:Ne,setupState:Ne,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=DT.bind(null,i),t.ce&&t.ce(i),i}let mt=null;const jg=()=>mt||Ot;let sa,ol;{const t=Pa(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};sa=e("__VUE_INSTANCE_SETTERS__",n=>mt=n),ol=e("__VUE_SSR_SETTERS__",n=>Ni=n)}const Wi=t=>{const e=mt;return sa(t),t.scope.on(),()=>{t.scope.off(),sa(e)}},df=()=>{mt&&mt.scope.off(),sa(null)};function qg(t){return t.vnode.shapeFlag&4}let Ni=!1;function nI(t,e=!1,n=!1){e&&ol(e);const{props:r,children:s}=t.vnode,i=qg(t);MT(t,r,i,e),jT(t,s,n||e);const o=i?rI(t,e):void 0;return e&&ol(!1),o}function rI(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,ET);const{setup:r}=n;if(r){Pn();const s=t.setupContext=r.length>1?iI(t):null,i=Wi(t),o=$i(r,t,0,[t.props,s]),c=Mp(o);if(Nn(),i(),(c||t.sp)&&!di(t)&&mg(t),c){if(o.then(df,df),e)return o.then(l=>{pf(t,l)}).catch(l=>{ka(l,t,0)});t.asyncDep=o}else pf(t,o)}else $g(t)}function pf(t,e,n){ge(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Oe(e)&&(t.setupState=cg(e)),$g(t)}function $g(t,e,n){const r=t.type;t.render||(t.render=r.render||ln);{const s=Wi(t);Pn();try{TT(t)}finally{Nn(),s()}}}const sI={get(t,e){return pt(t,"get",""),t[e]}};function iI(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,sI),slots:t.slots,emit:t.emit,expose:e}}function Ma(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(cg(WE(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in pi)return pi[n](t)},has(e,n){return n in e||n in pi}})):t.proxy}function oI(t,e=!0){return ge(t)?t.displayName||t.name:t.name||e&&t.__name}function aI(t){return ge(t)&&"__vccOpts"in t}const Wt=(t,e)=>QE(t,e,Ni);function Hg(t,e,n){try{na(-1);const r=arguments.length;return r===2?Oe(e)&&!he(e)?ra(e)?at(t,null,[e]):at(t,e):at(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&ra(n)&&(n=[n]),at(t,e,n))}finally{na(1)}}const cI="3.5.25";let al;const gf=typeof window<"u"&&window.trustedTypes;if(gf)try{al=gf.createPolicy("vue",{createHTML:t=>t})}catch{}const Wg=al?t=>al.createHTML(t):t=>t,lI="http://www.w3.org/2000/svg",uI="http://www.w3.org/1998/Math/MathML",An=typeof document<"u"?document:null,mf=An&&An.createElement("template"),hI={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?An.createElementNS(lI,t):e==="mathml"?An.createElementNS(uI,t):n?An.createElement(t,{is:n}):An.createElement(t);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>An.createTextNode(t),createComment:t=>An.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>An.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{mf.innerHTML=Wg(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const c=mf.content;if(r==="svg"||r==="mathml"){const l=c.firstChild;for(;l.firstChild;)c.appendChild(l.firstChild);c.removeChild(l)}e.insertBefore(c,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},fI=Symbol("_vtc");function dI(t,e,n){const r=t[fI];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const _f=Symbol("_vod"),pI=Symbol("_vsh"),gI=Symbol(""),mI=/(?:^|;)\s*display\s*:/;function _I(t,e,n){const r=t.style,s=Qe(n);let i=!1;if(n&&!s){if(e)if(Qe(e))for(const o of e.split(";")){const c=o.slice(0,o.indexOf(":")).trim();n[c]==null&&ko(r,c,"")}else for(const o in e)n[o]==null&&ko(r,o,"");for(const o in n)o==="display"&&(i=!0),ko(r,o,n[o])}else if(s){if(e!==n){const o=r[gI];o&&(n+=";"+o),r.cssText=n,i=mI.test(n)}}else e&&t.removeAttribute("style");_f in t&&(t[_f]=i?r.display:"",t[pI]&&(r.display="none"))}const yf=/\s*!important$/;function ko(t,e,n){if(he(n))n.forEach(r=>ko(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=yI(t,e);yf.test(n)?t.setProperty(Hr(r),n.replace(yf,""),"important"):t[r]=n}}const Ef=["Webkit","Moz","ms"],Nc={};function yI(t,e){const n=Nc[e];if(n)return n;let r=Bt(e);if(r!=="filter"&&r in t)return Nc[e]=r;r=Ca(r);for(let s=0;s<Ef.length;s++){const i=Ef[s]+r;if(i in t)return Nc[e]=i}return e}const Tf="http://www.w3.org/1999/xlink";function If(t,e,n,r,s,i=wE(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(Tf,e.slice(6,e.length)):t.setAttributeNS(Tf,e,n):n==null||i&&!jp(n)?t.removeAttribute(e):t.setAttribute(e,i?"":_n(n)?String(n):n)}function vf(t,e,n,r,s){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?Wg(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const c=i==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(c!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const c=typeof t[e];c==="boolean"?n=jp(n):n==null&&c==="string"?(n="",o=!0):c==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(s||e)}function Nr(t,e,n,r){t.addEventListener(e,n,r)}function EI(t,e,n,r){t.removeEventListener(e,n,r)}const wf=Symbol("_vei");function TI(t,e,n,r,s=null){const i=t[wf]||(t[wf]={}),o=i[e];if(r&&o)o.value=r;else{const[c,l]=II(e);if(r){const u=i[e]=AI(r,s);Nr(t,c,u,l)}else o&&(EI(t,c,o,l),i[e]=void 0)}}const Af=/(?:Once|Passive|Capture)$/;function II(t){let e;if(Af.test(t)){e={};let r;for(;r=t.match(Af);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Hr(t.slice(2)),e]}let Dc=0;const vI=Promise.resolve(),wI=()=>Dc||(vI.then(()=>Dc=0),Dc=Date.now());function AI(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;yn(RI(r,n.value),e,5,[r])};return n.value=t,n.attached=wI(),n}function RI(t,e){if(he(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const Rf=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,bI=(t,e,n,r,s,i)=>{const o=s==="svg";e==="class"?dI(t,r,o):e==="style"?_I(t,n,r):Ra(e)?Bl(e)||TI(t,e,n,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):SI(t,e,r,o))?(vf(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&If(t,e,r,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Qe(r))?vf(t,Bt(e),r,i,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),If(t,e,r,o))};function SI(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&Rf(e)&&ge(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Rf(e)&&Qe(n)?!1:e in t}const ia=t=>{const e=t.props["onUpdate:modelValue"]||!1;return he(e)?n=>Po(e,n):e};function CI(t){t.target.composing=!0}function bf(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const fs=Symbol("_assign");function Sf(t,e,n){return e&&(t=t.trim()),n&&(t=$l(t)),t}const nD={created(t,{modifiers:{lazy:e,trim:n,number:r}},s){t[fs]=ia(s);const i=r||s.props&&s.props.type==="number";Nr(t,e?"change":"input",o=>{o.target.composing||t[fs](Sf(t.value,n,i))}),(n||i)&&Nr(t,"change",()=>{t.value=Sf(t.value,n,i)}),e||(Nr(t,"compositionstart",CI),Nr(t,"compositionend",bf),Nr(t,"change",bf))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},o){if(t[fs]=ia(o),t.composing)return;const c=(i||t.type==="number")&&!/^0\d/.test(t.value)?$l(t.value):t.value,l=e??"";c!==l&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||s&&t.value.trim()===l)||(t.value=l))}},rD={deep:!0,created(t,e,n){t[fs]=ia(n),Nr(t,"change",()=>{const r=t._modelValue,s=PI(t),i=t.checked,o=t[fs];if(he(r)){const c=qp(r,s),l=c!==-1;if(i&&!l)o(r.concat(s));else if(!i&&l){const u=[...r];u.splice(c,1),o(u)}}else if(ba(r)){const c=new Set(r);i?c.add(s):c.delete(s),o(c)}else o(Gg(t,i))})},mounted:Cf,beforeUpdate(t,e,n){t[fs]=ia(n),Cf(t,e,n)}};function Cf(t,{value:e,oldValue:n},r){t._modelValue=e;let s;if(he(e))s=qp(e,r.props.value)>-1;else if(ba(e))s=e.has(r.props.value);else{if(e===n)return;s=Na(e,Gg(t,!0))}t.checked!==s&&(t.checked=s)}function PI(t){return"_value"in t?t._value:t.value}function Gg(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const NI=["ctrl","shift","alt","meta"],DI={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>NI.some(n=>t[`${n}Key`]&&!e.includes(n))},sD=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=((s,...i)=>{for(let o=0;o<e.length;o++){const c=DI[e[o]];if(c&&c(s,e))return}return t(s,...i)}))},OI=yt({patchProp:bI},hI);let Pf;function kI(){return Pf||(Pf=$T(OI))}const VI=((...t)=>{const e=kI().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=LI(r);if(!s)return;const i=e._component;!ge(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=n(s,!1,xI(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e});function xI(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function LI(t){return Qe(t)?document.querySelector(t):t}var Vo={exports:{}},xo={exports:{}},Lo={exports:{}};var MI=Lo.exports,Nf;function UI(){return Nf||(Nf=1,(function(t,e){(function(n,r){t.exports=r()})(MI,(function(){const n=new Map;return{set(s,i,o){n.has(s)||n.set(s,new Map);const c=n.get(s);if(!c.has(i)&&c.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(c.keys())[0]}.`);return}c.set(i,o)},get(s,i){return n.has(s)&&n.get(s).get(i)||null},remove(s,i){if(!n.has(s))return;const o=n.get(s);o.delete(i),o.size===0&&n.delete(s)}}}))})(Lo)),Lo.exports}var Mo={exports:{}},ri={exports:{}};var FI=ri.exports,Df;function Gi(){return Df||(Df=1,(function(t,e){(function(n,r){r(e)})(FI,(function(n){const i="transitionend",o=_=>(_&&window.CSS&&window.CSS.escape&&(_=_.replace(/#([^\s"#']+)/g,(I,R)=>`#${CSS.escape(R)}`)),_),c=_=>_==null?`${_}`:Object.prototype.toString.call(_).match(/\s([a-z]+)/i)[1].toLowerCase(),l=_=>{do _+=Math.floor(Math.random()*1e6);while(document.getElementById(_));return _},u=_=>{if(!_)return 0;let{transitionDuration:I,transitionDelay:R}=window.getComputedStyle(_);const y=Number.parseFloat(I),ee=Number.parseFloat(R);return!y&&!ee?0:(I=I.split(",")[0],R=R.split(",")[0],(Number.parseFloat(I)+Number.parseFloat(R))*1e3)},f=_=>{_.dispatchEvent(new Event(i))},p=_=>!_||typeof _!="object"?!1:(typeof _.jquery<"u"&&(_=_[0]),typeof _.nodeType<"u"),g=_=>p(_)?_.jquery?_[0]:_:typeof _=="string"&&_.length>0?document.querySelector(o(_)):null,w=_=>{if(!p(_)||_.getClientRects().length===0)return!1;const I=getComputedStyle(_).getPropertyValue("visibility")==="visible",R=_.closest("details:not([open])");if(!R)return I;if(R!==_){const y=_.closest("summary");if(y&&y.parentNode!==R||y===null)return!1}return I},P=_=>!_||_.nodeType!==Node.ELEMENT_NODE||_.classList.contains("disabled")?!0:typeof _.disabled<"u"?_.disabled:_.hasAttribute("disabled")&&_.getAttribute("disabled")!=="false",O=_=>{if(!document.documentElement.attachShadow)return null;if(typeof _.getRootNode=="function"){const I=_.getRootNode();return I instanceof ShadowRoot?I:null}return _ instanceof ShadowRoot?_:_.parentNode?O(_.parentNode):null},N=()=>{},F=_=>{_.offsetHeight},B=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,q=[],$=_=>{document.readyState==="loading"?(q.length||document.addEventListener("DOMContentLoaded",()=>{for(const I of q)I()}),q.push(_)):_()},te=()=>document.documentElement.dir==="rtl",G=_=>{$(()=>{const I=B();if(I){const R=_.NAME,y=I.fn[R];I.fn[R]=_.jQueryInterface,I.fn[R].Constructor=_,I.fn[R].noConflict=()=>(I.fn[R]=y,_.jQueryInterface)}})},T=(_,I=[],R=_)=>typeof _=="function"?_.call(...I):R,E=(_,I,R=!0)=>{if(!R){T(_);return}const ee=u(I)+5;let ie=!1;const me=({target:fe})=>{fe===I&&(ie=!0,I.removeEventListener(i,me),T(_))};I.addEventListener(i,me),setTimeout(()=>{ie||f(I)},ee)},v=(_,I,R,y)=>{const ee=_.length;let ie=_.indexOf(I);return ie===-1?!R&&y?_[ee-1]:_[0]:(ie+=R?1:-1,y&&(ie=(ie+ee)%ee),_[Math.max(0,Math.min(ie,ee-1))])};n.defineJQueryPlugin=G,n.execute=T,n.executeAfterTransition=E,n.findShadowRoot=O,n.getElement=g,n.getNextActiveElement=v,n.getTransitionDurationFromElement=u,n.getUID=l,n.getjQuery=B,n.isDisabled=P,n.isElement=p,n.isRTL=te,n.isVisible=w,n.noop=N,n.onDOMContentLoaded=$,n.parseSelector=o,n.reflow=F,n.toType=c,n.triggerTransitionEnd=f,Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})}))})(ri,ri.exports)),ri.exports}var BI=Mo.exports,Of;function zg(){return Of||(Of=1,(function(t,e){(function(n,r){t.exports=r(Gi())})(BI,(function(n){const r=/[^.]*(?=\..*)\.|.*/,s=/\..*/,i=/::\d+$/,o={};let c=1;const l={mouseenter:"mouseover",mouseleave:"mouseout"},u=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function f(G,T){return T&&`${T}::${c++}`||G.uidEvent||c++}function p(G){const T=f(G);return G.uidEvent=T,o[T]=o[T]||{},o[T]}function g(G,T){return function E(v){return te(v,{delegateTarget:G}),E.oneOff&&$.off(G,v.type,T),T.apply(G,[v])}}function w(G,T,E){return function v(_){const I=G.querySelectorAll(T);for(let{target:R}=_;R&&R!==this;R=R.parentNode)for(const y of I)if(y===R)return te(_,{delegateTarget:R}),v.oneOff&&$.off(G,_.type,T,E),E.apply(R,[_])}}function P(G,T,E=null){return Object.values(G).find(v=>v.callable===T&&v.delegationSelector===E)}function O(G,T,E){const v=typeof T=="string",_=v?E:T||E;let I=q(G);return u.has(I)||(I=G),[v,_,I]}function N(G,T,E,v,_){if(typeof T!="string"||!G)return;let[I,R,y]=O(T,E,v);T in l&&(R=(Lt=>function(We){if(!We.relatedTarget||We.relatedTarget!==We.delegateTarget&&!We.delegateTarget.contains(We.relatedTarget))return Lt.call(this,We)})(R));const ee=p(G),ie=ee[y]||(ee[y]={}),me=P(ie,R,I?E:null);if(me){me.oneOff=me.oneOff&&_;return}const fe=f(R,T.replace(r,"")),ce=I?w(G,E,R):g(G,R);ce.delegationSelector=I?E:null,ce.callable=R,ce.oneOff=_,ce.uidEvent=fe,ie[fe]=ce,G.addEventListener(y,ce,I)}function F(G,T,E,v,_){const I=P(T[E],v,_);I&&(G.removeEventListener(E,I,!!_),delete T[E][I.uidEvent])}function B(G,T,E,v){const _=T[E]||{};for(const[I,R]of Object.entries(_))I.includes(v)&&F(G,T,E,R.callable,R.delegationSelector)}function q(G){return G=G.replace(s,""),l[G]||G}const $={on(G,T,E,v){N(G,T,E,v,!1)},one(G,T,E,v){N(G,T,E,v,!0)},off(G,T,E,v){if(typeof T!="string"||!G)return;const[_,I,R]=O(T,E,v),y=R!==T,ee=p(G),ie=ee[R]||{},me=T.startsWith(".");if(typeof I<"u"){if(!Object.keys(ie).length)return;F(G,ee,R,I,_?E:null);return}if(me)for(const fe of Object.keys(ee))B(G,ee,fe,T.slice(1));for(const[fe,ce]of Object.entries(ie)){const xe=fe.replace(i,"");(!y||T.includes(xe))&&F(G,ee,R,ce.callable,ce.delegationSelector)}},trigger(G,T,E){if(typeof T!="string"||!G)return null;const v=n.getjQuery(),_=q(T),I=T!==_;let R=null,y=!0,ee=!0,ie=!1;I&&v&&(R=v.Event(T,E),v(G).trigger(R),y=!R.isPropagationStopped(),ee=!R.isImmediatePropagationStopped(),ie=R.isDefaultPrevented());const me=te(new Event(T,{bubbles:y,cancelable:!0}),E);return ie&&me.preventDefault(),ee&&G.dispatchEvent(me),me.defaultPrevented&&R&&R.preventDefault(),me}};function te(G,T={}){for(const[E,v]of Object.entries(T))try{G[E]=v}catch{Object.defineProperty(G,E,{configurable:!0,get(){return v}})}return G}return $}))})(Mo)),Mo.exports}var Uo={exports:{}},Fo={exports:{}};var jI=Fo.exports,kf;function qI(){return kf||(kf=1,(function(t,e){(function(n,r){t.exports=r()})(jI,(function(){function n(i){if(i==="true")return!0;if(i==="false")return!1;if(i===Number(i).toString())return Number(i);if(i===""||i==="null")return null;if(typeof i!="string")return i;try{return JSON.parse(decodeURIComponent(i))}catch{return i}}function r(i){return i.replace(/[A-Z]/g,o=>`-${o.toLowerCase()}`)}return{setDataAttribute(i,o,c){i.setAttribute(`data-bs-${r(o)}`,c)},removeDataAttribute(i,o){i.removeAttribute(`data-bs-${r(o)}`)},getDataAttributes(i){if(!i)return{};const o={},c=Object.keys(i.dataset).filter(l=>l.startsWith("bs")&&!l.startsWith("bsConfig"));for(const l of c){let u=l.replace(/^bs/,"");u=u.charAt(0).toLowerCase()+u.slice(1),o[u]=n(i.dataset[l])}return o},getDataAttribute(i,o){return n(i.getAttribute(`data-bs-${r(o)}`))}}}))})(Fo)),Fo.exports}var $I=Uo.exports,Vf;function HI(){return Vf||(Vf=1,(function(t,e){(function(n,r){t.exports=r(qI(),Gi())})($I,(function(n,r){class s{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(o){return o=this._mergeConfigObj(o),o=this._configAfterMerge(o),this._typeCheckConfig(o),o}_configAfterMerge(o){return o}_mergeConfigObj(o,c){const l=r.isElement(c)?n.getDataAttribute(c,"config"):{};return{...this.constructor.Default,...typeof l=="object"?l:{},...r.isElement(c)?n.getDataAttributes(c):{},...typeof o=="object"?o:{}}}_typeCheckConfig(o,c=this.constructor.DefaultType){for(const[l,u]of Object.entries(c)){const f=o[l],p=r.isElement(f)?"element":r.toType(f);if(!new RegExp(u).test(p))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${l}" provided type "${p}" but expected type "${u}".`)}}}return s}))})(Uo)),Uo.exports}var WI=xo.exports,xf;function GI(){return xf||(xf=1,(function(t,e){(function(n,r){t.exports=r(UI(),zg(),HI(),Gi())})(WI,(function(n,r,s,i){const o="5.3.8";class c extends s{constructor(u,f){super(),u=i.getElement(u),u&&(this._element=u,this._config=this._getConfig(f),n.set(this._element,this.constructor.DATA_KEY,this))}dispose(){n.remove(this._element,this.constructor.DATA_KEY),r.off(this._element,this.constructor.EVENT_KEY);for(const u of Object.getOwnPropertyNames(this))this[u]=null}_queueCallback(u,f,p=!0){i.executeAfterTransition(u,f,p)}_getConfig(u){return u=this._mergeConfigObj(u,this._element),u=this._configAfterMerge(u),this._typeCheckConfig(u),u}static getInstance(u){return n.get(i.getElement(u),this.DATA_KEY)}static getOrCreateInstance(u,f={}){return this.getInstance(u)||new this(u,typeof f=="object"?f:null)}static get VERSION(){return o}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(u){return`${u}${this.EVENT_KEY}`}}return c}))})(xo)),xo.exports}var Bo={exports:{}};var zI=Bo.exports,Lf;function KI(){return Lf||(Lf=1,(function(t,e){(function(n,r){t.exports=r(Gi())})(zI,(function(n){const r=i=>{let o=i.getAttribute("data-bs-target");if(!o||o==="#"){let c=i.getAttribute("href");if(!c||!c.includes("#")&&!c.startsWith("."))return null;c.includes("#")&&!c.startsWith("#")&&(c=`#${c.split("#")[1]}`),o=c&&c!=="#"?c.trim():null}return o?o.split(",").map(c=>n.parseSelector(c)).join(","):null},s={find(i,o=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(o,i))},findOne(i,o=document.documentElement){return Element.prototype.querySelector.call(o,i)},children(i,o){return[].concat(...i.children).filter(c=>c.matches(o))},parents(i,o){const c=[];let l=i.parentNode.closest(o);for(;l;)c.push(l),l=l.parentNode.closest(o);return c},prev(i,o){let c=i.previousElementSibling;for(;c;){if(c.matches(o))return[c];c=c.previousElementSibling}return[]},next(i,o){let c=i.nextElementSibling;for(;c;){if(c.matches(o))return[c];c=c.nextElementSibling}return[]},focusableChildren(i){const o=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(c=>`${c}:not([tabindex^="-"])`).join(",");return this.find(o,i).filter(c=>!n.isDisabled(c)&&n.isVisible(c))},getSelectorFromElement(i){const o=r(i);return o&&s.findOne(o)?o:null},getElementFromSelector(i){const o=r(i);return o?s.findOne(o):null},getMultipleElementsFromSelector(i){const o=r(i);return o?s.find(o):[]}};return s}))})(Bo)),Bo.exports}var QI=Vo.exports,Mf;function YI(){return Mf||(Mf=1,(function(t,e){(function(n,r){t.exports=r(GI(),zg(),KI(),Gi())})(QI,(function(n,r,s,i){const o="collapse",l=".bs.collapse",u=".data-api",f=`show${l}`,p=`shown${l}`,g=`hide${l}`,w=`hidden${l}`,P=`click${l}${u}`,O="show",N="collapse",F="collapsing",B="collapsed",q=`:scope .${N} .${N}`,$="collapse-horizontal",te="width",G="height",T=".collapse.show, .collapse.collapsing",E='[data-bs-toggle="collapse"]',v={parent:null,toggle:!0},_={parent:"(null|element)",toggle:"boolean"};class I extends n{constructor(y,ee){super(y,ee),this._isTransitioning=!1,this._triggerArray=[];const ie=s.find(E);for(const me of ie){const fe=s.getSelectorFromElement(me),ce=s.find(fe).filter(xe=>xe===this._element);fe!==null&&ce.length&&this._triggerArray.push(me)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return v}static get DefaultType(){return _}static get NAME(){return o}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let y=[];if(this._config.parent&&(y=this._getFirstLevelChildren(T).filter(xe=>xe!==this._element).map(xe=>I.getOrCreateInstance(xe,{toggle:!1}))),y.length&&y[0]._isTransitioning||r.trigger(this._element,f).defaultPrevented)return;for(const xe of y)xe.hide();const ie=this._getDimension();this._element.classList.remove(N),this._element.classList.add(F),this._element.style[ie]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const me=()=>{this._isTransitioning=!1,this._element.classList.remove(F),this._element.classList.add(N,O),this._element.style[ie]="",r.trigger(this._element,p)},ce=`scroll${ie[0].toUpperCase()+ie.slice(1)}`;this._queueCallback(me,this._element,!0),this._element.style[ie]=`${this._element[ce]}px`}hide(){if(this._isTransitioning||!this._isShown()||r.trigger(this._element,g).defaultPrevented)return;const ee=this._getDimension();this._element.style[ee]=`${this._element.getBoundingClientRect()[ee]}px`,i.reflow(this._element),this._element.classList.add(F),this._element.classList.remove(N,O);for(const me of this._triggerArray){const fe=s.getElementFromSelector(me);fe&&!this._isShown(fe)&&this._addAriaAndCollapsedClass([me],!1)}this._isTransitioning=!0;const ie=()=>{this._isTransitioning=!1,this._element.classList.remove(F),this._element.classList.add(N),r.trigger(this._element,w)};this._element.style[ee]="",this._queueCallback(ie,this._element,!0)}_isShown(y=this._element){return y.classList.contains(O)}_configAfterMerge(y){return y.toggle=!!y.toggle,y.parent=i.getElement(y.parent),y}_getDimension(){return this._element.classList.contains($)?te:G}_initializeChildren(){if(!this._config.parent)return;const y=this._getFirstLevelChildren(E);for(const ee of y){const ie=s.getElementFromSelector(ee);ie&&this._addAriaAndCollapsedClass([ee],this._isShown(ie))}}_getFirstLevelChildren(y){const ee=s.find(q,this._config.parent);return s.find(y,this._config.parent).filter(ie=>!ee.includes(ie))}_addAriaAndCollapsedClass(y,ee){if(y.length)for(const ie of y)ie.classList.toggle(B,!ee),ie.setAttribute("aria-expanded",ee)}static jQueryInterface(y){const ee={};return typeof y=="string"&&/show|hide/.test(y)&&(ee.toggle=!1),this.each(function(){const ie=I.getOrCreateInstance(this,ee);if(typeof y=="string"){if(typeof ie[y]>"u")throw new TypeError(`No method named "${y}"`);ie[y]()}})}}return r.on(document,P,E,function(R){(R.target.tagName==="A"||R.delegateTarget&&R.delegateTarget.tagName==="A")&&R.preventDefault();for(const y of s.getMultipleElementsFromSelector(this))I.getOrCreateInstance(y,{toggle:!1}).toggle()}),i.defineJQueryPlugin(I),I}))})(Vo)),Vo.exports}YI();const au=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},JI={};function XI(t,e){const n=nu("RouterView");return nr(),iu(n)}const ZI=au(JI,[["render",XI]]),ev="modulepreload",tv=function(t){return"/TS-yogab/"+t},Uf={},Eo=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let l=function(u){return Promise.all(u.map(f=>Promise.resolve(f).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=o?.nonce||o?.getAttribute("nonce");s=l(n.map(u=>{if(u=tv(u),u in Uf)return;Uf[u]=!0;const f=u.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${p}`))return;const g=document.createElement("link");if(g.rel=f?"stylesheet":ev,f||(g.as="script"),g.crossOrigin="",g.href=u,c&&g.setAttribute("nonce",c),document.head.appendChild(g),f)return new Promise((w,P)=>{g.addEventListener("load",w),g.addEventListener("error",()=>P(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return s.then(o=>{for(const c of o||[])c.status==="rejected"&&i(c.reason);return e().catch(i)})},nv=()=>{};var Ff={};const Kg=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},rv=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],c=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Qg={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,c=o?t[s+1]:0,l=s+2<t.length,u=l?t[s+2]:0,f=i>>2,p=(i&3)<<4|c>>4;let g=(c&15)<<2|u>>6,w=u&63;l||(w=64,o||(g=64)),r.push(n[f],n[p],n[g],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Kg(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):rv(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||u==null||p==null)throw new sv;const g=i<<2|c>>4;if(r.push(g),u!==64){const w=c<<4&240|u>>2;if(r.push(w),p!==64){const P=u<<6&192|p;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class sv extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const iv=function(t){const e=Kg(t);return Qg.encodeByteArray(e,!0)},oa=function(t){return iv(t).replace(/\./g,"")},Yg=function(t){try{return Qg.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function ov(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const av=()=>ov().__FIREBASE_DEFAULTS__,cv=()=>{if(typeof process>"u"||typeof Ff>"u")return;const t=Ff.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},lv=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Yg(t[1]);return e&&JSON.parse(e)},Ua=()=>{try{return nv()||av()||cv()||lv()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Jg=t=>Ua()?.emulatorHosts?.[t],Xg=t=>{const e=Jg(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Zg=()=>Ua()?.config,em=t=>Ua()?.[`_${t}`];class uv{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function _r(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function cu(t){return(await fetch(t,{credentials:"include"})).ok}function tm(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[oa(JSON.stringify(n)),oa(JSON.stringify(o)),""].join(".")}const _i={};function hv(){const t={prod:[],emulator:[]};for(const e of Object.keys(_i))_i[e]?t.emulator.push(e):t.prod.push(e);return t}function fv(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Bf=!1;function lu(t,e){if(typeof window>"u"||typeof document>"u"||!_r(window.location.host)||_i[t]===e||_i[t]||Bf)return;_i[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=hv().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function c(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function l(g,w){g.setAttribute("width","24"),g.setAttribute("id",w),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function u(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{Bf=!0,o()},g}function f(g,w){g.setAttribute("id",w),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=fv(r),w=n("text"),P=document.getElementById(w)||document.createElement("span"),O=n("learnmore"),N=document.getElementById(O)||document.createElement("a"),F=n("preprendIcon"),B=document.getElementById(F)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const q=g.element;c(q),f(N,O);const $=u();l(B,F),q.append(B,P,N,$),document.body.appendChild(q)}i?(P.innerText="Preview backend disconnected.",B.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(B.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function Et(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function dv(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Et())}function pv(){const t=Ua()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function gv(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function mv(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function _v(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function yv(){const t=Et();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Ev(){return!pv()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Tv(){try{return typeof indexedDB=="object"}catch{return!1}}function Iv(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(n){e(n)}})}const vv="FirebaseError";class Tn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=vv,Object.setPrototypeOf(this,Tn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zi.prototype.create)}}class zi{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?wv(i,r):"Error",c=`${this.serviceName}: ${o} (${s}).`;return new Tn(s,c,r)}}function wv(t,e){return t.replace(Av,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Av=/\{\$([^}]+)}/g;function Rv(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Mr(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(jf(i)&&jf(o)){if(!Mr(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function jf(t){return t!==null&&typeof t=="object"}function Ki(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function si(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function ii(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function bv(t,e){const n=new Sv(t,e);return n.subscribe.bind(n)}class Sv{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Cv(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Oc),s.error===void 0&&(s.error=Oc),s.complete===void 0&&(s.complete=Oc);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Cv(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Oc(){}function He(t){return t&&t._delegate?t._delegate:t}class ur{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Pr="[DEFAULT]";class Pv{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new uv;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Dv(e))try{this.getOrInitializeService({instanceIdentifier:Pr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Pr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Pr){return this.instances.has(e)}getOptions(e=Pr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Nv(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Pr){return this.component?this.component.multipleInstances?e:Pr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Nv(t){return t===Pr?void 0:t}function Dv(t){return t.instantiationMode==="EAGER"}class Ov{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Pv(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Te;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Te||(Te={}));const kv={debug:Te.DEBUG,verbose:Te.VERBOSE,info:Te.INFO,warn:Te.WARN,error:Te.ERROR,silent:Te.SILENT},Vv=Te.INFO,xv={[Te.DEBUG]:"log",[Te.VERBOSE]:"log",[Te.INFO]:"info",[Te.WARN]:"warn",[Te.ERROR]:"error"},Lv=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=xv[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class uu{constructor(e){this.name=e,this._logLevel=Vv,this._logHandler=Lv,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Te))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?kv[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Te.DEBUG,...e),this._logHandler(this,Te.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Te.VERBOSE,...e),this._logHandler(this,Te.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Te.INFO,...e),this._logHandler(this,Te.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Te.WARN,...e),this._logHandler(this,Te.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Te.ERROR,...e),this._logHandler(this,Te.ERROR,...e)}}const Mv=(t,e)=>e.some(n=>t instanceof n);let qf,$f;function Uv(){return qf||(qf=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Fv(){return $f||($f=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const nm=new WeakMap,cl=new WeakMap,rm=new WeakMap,kc=new WeakMap,hu=new WeakMap;function Bv(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(rr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&nm.set(n,t)}).catch(()=>{}),hu.set(e,t),e}function jv(t){if(cl.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});cl.set(t,e)}let ll={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return cl.get(t);if(e==="objectStoreNames")return t.objectStoreNames||rm.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return rr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function qv(t){ll=t(ll)}function $v(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Vc(this),e,...n);return rm.set(r,e.sort?e.sort():[e]),rr(r)}:Fv().includes(t)?function(...e){return t.apply(Vc(this),e),rr(nm.get(this))}:function(...e){return rr(t.apply(Vc(this),e))}}function Hv(t){return typeof t=="function"?$v(t):(t instanceof IDBTransaction&&jv(t),Mv(t,Uv())?new Proxy(t,ll):t)}function rr(t){if(t instanceof IDBRequest)return Bv(t);if(kc.has(t))return kc.get(t);const e=Hv(t);return e!==t&&(kc.set(t,e),hu.set(e,t)),e}const Vc=t=>hu.get(t);function Wv(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),c=rr(o);return r&&o.addEventListener("upgradeneeded",l=>{r(rr(o.result),l.oldVersion,l.newVersion,rr(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),c.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),c}const Gv=["get","getKey","getAll","getAllKeys","count"],zv=["put","add","delete","clear"],xc=new Map;function Hf(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(xc.get(e))return xc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=zv.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Gv.includes(n)))return;const i=async function(o,...c){const l=this.transaction(o,s?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(c.shift())),(await Promise.all([u[n](...c),s&&l.done]))[0]};return xc.set(e,i),i}qv(t=>({...t,get:(e,n,r)=>Hf(e,n)||t.get(e,n,r),has:(e,n)=>!!Hf(e,n)||t.has(e,n)}));class Kv{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Qv(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Qv(t){return t.getComponent()?.type==="VERSION"}const ul="@firebase/app",Wf="0.14.6";const On=new uu("@firebase/app"),Yv="@firebase/app-compat",Jv="@firebase/analytics-compat",Xv="@firebase/analytics",Zv="@firebase/app-check-compat",ew="@firebase/app-check",tw="@firebase/auth",nw="@firebase/auth-compat",rw="@firebase/database",sw="@firebase/data-connect",iw="@firebase/database-compat",ow="@firebase/functions",aw="@firebase/functions-compat",cw="@firebase/installations",lw="@firebase/installations-compat",uw="@firebase/messaging",hw="@firebase/messaging-compat",fw="@firebase/performance",dw="@firebase/performance-compat",pw="@firebase/remote-config",gw="@firebase/remote-config-compat",mw="@firebase/storage",_w="@firebase/storage-compat",yw="@firebase/firestore",Ew="@firebase/ai",Tw="@firebase/firestore-compat",Iw="firebase",vw="12.6.0";const hl="[DEFAULT]",ww={[ul]:"fire-core",[Yv]:"fire-core-compat",[Xv]:"fire-analytics",[Jv]:"fire-analytics-compat",[ew]:"fire-app-check",[Zv]:"fire-app-check-compat",[tw]:"fire-auth",[nw]:"fire-auth-compat",[rw]:"fire-rtdb",[sw]:"fire-data-connect",[iw]:"fire-rtdb-compat",[ow]:"fire-fn",[aw]:"fire-fn-compat",[cw]:"fire-iid",[lw]:"fire-iid-compat",[uw]:"fire-fcm",[hw]:"fire-fcm-compat",[fw]:"fire-perf",[dw]:"fire-perf-compat",[pw]:"fire-rc",[gw]:"fire-rc-compat",[mw]:"fire-gcs",[_w]:"fire-gcs-compat",[yw]:"fire-fst",[Tw]:"fire-fst-compat",[Ew]:"fire-vertex","fire-js":"fire-js",[Iw]:"fire-js-all"};const aa=new Map,Aw=new Map,fl=new Map;function Gf(t,e){try{t.container.addComponent(e)}catch(n){On.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ur(t){const e=t.name;if(fl.has(e))return On.debug(`There were multiple attempts to register component ${e}.`),!1;fl.set(e,t);for(const n of aa.values())Gf(n,t);for(const n of Aw.values())Gf(n,t);return!0}function Fa(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Mt(t){return t==null?!1:t.settings!==void 0}const Rw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},sr=new zi("app","Firebase",Rw);class bw{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ur("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw sr.create("app-deleted",{appName:this._name})}}const Wr=vw;function sm(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:hl,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw sr.create("bad-app-name",{appName:String(s)});if(n||(n=Zg()),!n)throw sr.create("no-options");const i=aa.get(s);if(i){if(Mr(n,i.options)&&Mr(r,i.config))return i;throw sr.create("duplicate-app",{appName:s})}const o=new Ov(s);for(const l of fl.values())o.addComponent(l);const c=new bw(n,r,o);return aa.set(s,c),c}function fu(t=hl){const e=aa.get(t);if(!e&&t===hl&&Zg())return sm();if(!e)throw sr.create("no-app",{appName:t});return e}function un(t,e,n){let r=ww[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),On.warn(o.join(" "));return}Ur(new ur(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const Sw="firebase-heartbeat-database",Cw=1,Di="firebase-heartbeat-store";let Lc=null;function im(){return Lc||(Lc=Wv(Sw,Cw,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Di)}catch(n){console.warn(n)}}}}).catch(t=>{throw sr.create("idb-open",{originalErrorMessage:t.message})})),Lc}async function Pw(t){try{const n=(await im()).transaction(Di),r=await n.objectStore(Di).get(om(t));return await n.done,r}catch(e){if(e instanceof Tn)On.warn(e.message);else{const n=sr.create("idb-get",{originalErrorMessage:e?.message});On.warn(n.message)}}}async function zf(t,e){try{const r=(await im()).transaction(Di,"readwrite");await r.objectStore(Di).put(e,om(t)),await r.done}catch(n){if(n instanceof Tn)On.warn(n.message);else{const r=sr.create("idb-set",{originalErrorMessage:n?.message});On.warn(r.message)}}}function om(t){return`${t.name}!${t.options.appId}`}const Nw=1024,Dw=30;class Ow{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Vw(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Kf();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>Dw){const s=xw(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){On.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Kf(),{heartbeatsToSend:n,unsentEntries:r}=kw(this._heartbeatsCache.heartbeats),s=oa(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return On.warn(e),""}}}function Kf(){return new Date().toISOString().substring(0,10)}function kw(t,e=Nw){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Qf(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Qf(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Vw{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Tv()?Iv().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Pw(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return zf(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return zf(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Qf(t){return oa(JSON.stringify({version:2,heartbeats:t})).length}function xw(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function Lw(t){Ur(new ur("platform-logger",e=>new Kv(e),"PRIVATE")),Ur(new ur("heartbeat",e=>new Ow(e),"PRIVATE")),un(ul,Wf,t),un(ul,Wf,"esm2020"),un("fire-js","")}Lw("");function am(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Mw=am,cm=new zi("auth","Firebase",am());const ca=new uu("@firebase/auth");function Uw(t,...e){ca.logLevel<=Te.WARN&&ca.warn(`Auth (${Wr}): ${t}`,...e)}function jo(t,...e){ca.logLevel<=Te.ERROR&&ca.error(`Auth (${Wr}): ${t}`,...e)}function Jt(t,...e){throw du(t,...e)}function hn(t,...e){return du(t,...e)}function lm(t,e,n){const r={...Mw(),[e]:n};return new zi("auth","Firebase",r).create(e,{appName:t.name})}function ir(t){return lm(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function du(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return cm.create(t,...e)}function le(t,e,...n){if(!t)throw du(e,...n)}function Sn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw jo(e),new Error(e)}function kn(t,e){t||Sn(e)}function dl(){return typeof self<"u"&&self.location?.href||""}function Fw(){return Yf()==="http:"||Yf()==="https:"}function Yf(){return typeof self<"u"&&self.location?.protocol||null}function Bw(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Fw()||mv()||"connection"in navigator)?navigator.onLine:!0}function jw(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class Qi{constructor(e,n){this.shortDelay=e,this.longDelay=n,kn(n>e,"Short delay should be less than long delay!"),this.isMobile=dv()||_v()}get(){return Bw()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function pu(t,e){kn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class um{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Sn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Sn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Sn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const qw={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const $w=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Hw=new Qi(3e4,6e4);function Gr(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function yr(t,e,n,r,s={}){return hm(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const c=Ki({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...i};return gv()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&_r(t.emulatorConfig.host)&&(u.credentials="include"),um.fetch()(await fm(t,t.config.apiHost,n,c),u)})}async function hm(t,e,n){t._canInitEmulator=!1;const r={...qw,...e};try{const s=new Gw(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw To(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const c=i.ok?o.errorMessage:o.error.message,[l,u]=c.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw To(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw To(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw To(t,"user-disabled",o);const f=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw lm(t,f,u);Jt(t,f)}}catch(s){if(s instanceof Tn)throw s;Jt(t,"network-request-failed",{message:String(s)})}}async function Ba(t,e,n,r,s={}){const i=await yr(t,e,n,r,s);return"mfaPendingCredential"in i&&Jt(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function fm(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?pu(t.config,s):`${t.config.apiScheme}://${s}`;return $w.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function Ww(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Gw{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(hn(this.auth,"network-request-failed")),Hw.get())})}}function To(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=hn(t,e,r);return s.customData._tokenResponse=n,s}function Jf(t){return t!==void 0&&t.enterprise!==void 0}class zw{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Ww(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Kw(t,e){return yr(t,"GET","/v2/recaptchaConfig",Gr(t,e))}async function Qw(t,e){return yr(t,"POST","/v1/accounts:delete",e)}async function la(t,e){return yr(t,"POST","/v1/accounts:lookup",e)}function yi(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Yw(t,e=!1){const n=He(t),r=await n.getIdToken(e),s=gu(r);le(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i?.sign_in_provider;return{claims:s,token:r,authTime:yi(Mc(s.auth_time)),issuedAtTime:yi(Mc(s.iat)),expirationTime:yi(Mc(s.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function Mc(t){return Number(t)*1e3}function gu(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return jo("JWT malformed, contained fewer than 3 sections"),null;try{const s=Yg(n);return s?JSON.parse(s):(jo("Failed to decode base64 JWT payload"),null)}catch(s){return jo("Caught error parsing JWT payload as JSON",s?.toString()),null}}function Xf(t){const e=gu(t);return le(e,"internal-error"),le(typeof e.exp<"u","internal-error"),le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Oi(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Tn&&Jw(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Jw({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class Xw{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class pl{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=yi(this.lastLoginAt),this.creationTime=yi(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function ua(t){const e=t.auth,n=await t.getIdToken(),r=await Oi(t,la(e,{idToken:n}));le(r?.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=s.providerUserInfo?.length?dm(s.providerUserInfo):[],o=eA(t.providerData,i),c=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!o?.length,u=c?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new pl(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,f)}async function Zw(t){const e=He(t);await ua(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function eA(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function dm(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function tA(t,e){const n=await hm(t,{},async()=>{const r=Ki({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await fm(t,s,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:c,body:r};return t.emulatorConfig&&_r(t.emulatorConfig.host)&&(l.credentials="include"),um.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function nA(t,e){return yr(t,"POST","/v2/accounts:revokeToken",Gr(t,e))}class ds{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){le(e.idToken,"internal-error"),le(typeof e.idToken<"u","internal-error"),le(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Xf(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){le(e.length!==0,"internal-error");const n=Xf(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(le(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await tA(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new ds;return r&&(le(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(le(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(le(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ds,this.toJSON())}_performRefresh(){return Sn("not implemented")}}function $n(t,e){le(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Gt{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new Xw(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new pl(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Oi(this,this.stsTokenManager.getToken(this.auth,e));return le(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Yw(this,e)}reload(){return Zw(this)}_assign(e){this!==e&&(le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Gt({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await ua(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Mt(this.auth.app))return Promise.reject(ir(this.auth));const e=await this.getIdToken();return await Oi(this,Qw(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,c=n.tenantId??void 0,l=n._redirectEventId??void 0,u=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:p,emailVerified:g,isAnonymous:w,providerData:P,stsTokenManager:O}=n;le(p&&O,e,"internal-error");const N=ds.fromJSON(this.name,O);le(typeof p=="string",e,"internal-error"),$n(r,e.name),$n(s,e.name),le(typeof g=="boolean",e,"internal-error"),le(typeof w=="boolean",e,"internal-error"),$n(i,e.name),$n(o,e.name),$n(c,e.name),$n(l,e.name),$n(u,e.name),$n(f,e.name);const F=new Gt({uid:p,auth:e,email:s,emailVerified:g,displayName:r,isAnonymous:w,photoURL:o,phoneNumber:i,tenantId:c,stsTokenManager:N,createdAt:u,lastLoginAt:f});return P&&Array.isArray(P)&&(F.providerData=P.map(B=>({...B}))),l&&(F._redirectEventId=l),F}static async _fromIdTokenResponse(e,n,r=!1){const s=new ds;s.updateFromServerResponse(n);const i=new Gt({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await ua(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];le(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?dm(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!i?.length,c=new ds;c.updateFromIdToken(r);const l=new Gt({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new pl(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!i?.length};return Object.assign(l,u),l}}const Zf=new Map;function Cn(t){kn(t instanceof Function,"Expected a class definition");let e=Zf.get(t);return e?(kn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Zf.set(t,e),e)}class pm{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}pm.type="NONE";const ed=pm;function qo(t,e,n){return`firebase:${t}:${e}:${n}`}class ps{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=qo(this.userKey,s.apiKey,i),this.fullPersistenceKey=qo("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await la(this.auth,{idToken:e}).catch(()=>{});return n?Gt._fromGetAccountInfoResponse(this.auth,n,e):null}return Gt._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ps(Cn(ed),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||Cn(ed);const o=qo(r,e.config.apiKey,e.name);let c=null;for(const u of n)try{const f=await u._get(o);if(f){let p;if(typeof f=="string"){const g=await la(e,{idToken:f}).catch(()=>{});if(!g)break;p=await Gt._fromGetAccountInfoResponse(e,g,f)}else p=Gt._fromJSON(e,f);u!==i&&(c=p),i=u;break}}catch{}const l=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new ps(i,e,r):(i=l[0],c&&await i._set(o,c.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new ps(i,e,r))}}function td(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ym(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(gm(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Tm(e))return"Blackberry";if(Im(e))return"Webos";if(mm(e))return"Safari";if((e.includes("chrome/")||_m(e))&&!e.includes("edge/"))return"Chrome";if(Em(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function gm(t=Et()){return/firefox\//i.test(t)}function mm(t=Et()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _m(t=Et()){return/crios\//i.test(t)}function ym(t=Et()){return/iemobile/i.test(t)}function Em(t=Et()){return/android/i.test(t)}function Tm(t=Et()){return/blackberry/i.test(t)}function Im(t=Et()){return/webos/i.test(t)}function mu(t=Et()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function rA(t=Et()){return mu(t)&&!!window.navigator?.standalone}function sA(){return yv()&&document.documentMode===10}function vm(t=Et()){return mu(t)||Em(t)||Im(t)||Tm(t)||/windows phone/i.test(t)||ym(t)}function wm(t,e=[]){let n;switch(t){case"Browser":n=td(Et());break;case"Worker":n=`${td(Et())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Wr}/${r}`}class iA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,c)=>{try{const l=e(i);o(l)}catch(l){c(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}async function oA(t,e={}){return yr(t,"GET","/v2/passwordPolicy",Gr(t,e))}const aA=6;class cA{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??aA,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class lA{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new nd(this),this.idTokenSubscription=new nd(this),this.beforeStateQueue=new iA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cm,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Cn(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await ps.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await la(this,{idToken:e}),r=await Gt._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Mt(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,o=r?._redirectEventId,c=await this.tryRedirectSignIn(e);(!i||i===o)&&c?.user&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(i){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ua(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=jw()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Mt(this.app))return Promise.reject(ir(this));const n=e?He(e):null;return n&&le(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Mt(this.app)?Promise.reject(ir(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Mt(this.app)?Promise.reject(ir(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Cn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await oA(this),n=new cA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new zi("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await nA(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Cn(e)||this._popupRedirectResolver;le(n,this,"argument-error"),this.redirectPersistenceManager=await ps.create(this,[Cn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(le(c,this,"internal-error"),c.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=wm(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Mt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Uw(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ns(t){return He(t)}class nd{constructor(e){this.auth=e,this.observer=null,this.addObserver=bv(n=>this.observer=n)}get next(){return le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let ja={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function uA(t){ja=t}function Am(t){return ja.loadJS(t)}function hA(){return ja.recaptchaEnterpriseScript}function fA(){return ja.gapiScript}function dA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class pA{constructor(){this.enterprise=new gA}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class gA{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const mA="recaptcha-enterprise",Rm="NO_RECAPTCHA";class _A{constructor(e){this.type=mA,this.auth=Ns(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,c)=>{Kw(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const u=new zw(l);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(l=>{c(l)})})}function s(i,o,c){const l=window.grecaptcha;Jf(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(Rm)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new pA().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(c=>{if(!n&&Jf(window.grecaptcha))s(c,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=hA();l.length!==0&&(l+=c),Am(l).then(()=>{s(c,i,o)}).catch(u=>{o(u)})}}).catch(c=>{o(c)})})}}async function rd(t,e,n,r=!1,s=!1){const i=new _A(t);let o;if(s)o=Rm;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const c={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const l=c.phoneEnrollmentInfo.phoneNumber,u=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const l=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function sd(t,e,n,r,s){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await rd(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await rd(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}function yA(t,e){const n=Fa(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Mr(i,e??{}))return s;Jt(s,"already-initialized")}return n.initialize({options:e})}function EA(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Cn);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function TA(t,e,n){const r=Ns(t);le(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=bm(e),{host:o,port:c}=IA(e),l=c===null?"":`:${c}`,u={url:`${i}//${o}${l}/`},f=Object.freeze({host:o,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){le(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),le(Mr(u,r.config.emulator)&&Mr(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,_r(o)?(cu(`${i}//${o}${l}`),lu("Auth",!0)):vA()}function bm(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function IA(t){const e=bm(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:id(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:id(o)}}}function id(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function vA(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class _u{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Sn("not implemented")}_getIdTokenResponse(e){return Sn("not implemented")}_linkToIdToken(e,n){return Sn("not implemented")}_getReauthenticationResolver(e){return Sn("not implemented")}}async function wA(t,e){return yr(t,"POST","/v1/accounts:signUp",e)}async function AA(t,e){return Ba(t,"POST","/v1/accounts:signInWithPassword",Gr(t,e))}async function RA(t,e){return Ba(t,"POST","/v1/accounts:signInWithEmailLink",Gr(t,e))}async function bA(t,e){return Ba(t,"POST","/v1/accounts:signInWithEmailLink",Gr(t,e))}class ki extends _u{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new ki(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new ki(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sd(e,n,"signInWithPassword",AA);case"emailLink":return RA(e,{email:this._email,oobCode:this._password});default:Jt(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return sd(e,r,"signUpPassword",wA);case"emailLink":return bA(e,{idToken:n,email:this._email,oobCode:this._password});default:Jt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function gs(t,e){return Ba(t,"POST","/v1/accounts:signInWithIdp",Gr(t,e))}const SA="http://localhost";class Fr extends _u{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Fr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Jt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new Fr(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return gs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,gs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,gs(e,n)}buildRequest(){const e={requestUri:SA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ki(n)}return e}}function CA(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function PA(t){const e=si(ii(t)).link,n=e?si(ii(e)).deep_link_id:null,r=si(ii(t)).deep_link_id;return(r?si(ii(r)).link:null)||r||n||e||t}class yu{constructor(e){const n=si(ii(e)),r=n.apiKey??null,s=n.oobCode??null,i=CA(n.mode??null);le(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=PA(e);try{return new yu(n)}catch{return null}}}class Ds{constructor(){this.providerId=Ds.PROVIDER_ID}static credential(e,n){return ki._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=yu.parseLink(n);return le(r,"argument-error"),ki._fromEmailAndCode(e,r.code,r.tenantId)}}Ds.PROVIDER_ID="password";Ds.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ds.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Sm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Yi extends Sm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Qn extends Yi{constructor(){super("facebook.com")}static credential(e){return Fr._fromParams({providerId:Qn.PROVIDER_ID,signInMethod:Qn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qn.credentialFromTaggedObject(e)}static credentialFromError(e){return Qn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qn.credential(e.oauthAccessToken)}catch{return null}}}Qn.FACEBOOK_SIGN_IN_METHOD="facebook.com";Qn.PROVIDER_ID="facebook.com";class Yn extends Yi{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Fr._fromParams({providerId:Yn.PROVIDER_ID,signInMethod:Yn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Yn.credentialFromTaggedObject(e)}static credentialFromError(e){return Yn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Yn.credential(n,r)}catch{return null}}}Yn.GOOGLE_SIGN_IN_METHOD="google.com";Yn.PROVIDER_ID="google.com";class Jn extends Yi{constructor(){super("github.com")}static credential(e){return Fr._fromParams({providerId:Jn.PROVIDER_ID,signInMethod:Jn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Jn.credentialFromTaggedObject(e)}static credentialFromError(e){return Jn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Jn.credential(e.oauthAccessToken)}catch{return null}}}Jn.GITHUB_SIGN_IN_METHOD="github.com";Jn.PROVIDER_ID="github.com";class Xn extends Yi{constructor(){super("twitter.com")}static credential(e,n){return Fr._fromParams({providerId:Xn.PROVIDER_ID,signInMethod:Xn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Xn.credentialFromTaggedObject(e)}static credentialFromError(e){return Xn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Xn.credential(n,r)}catch{return null}}}Xn.TWITTER_SIGN_IN_METHOD="twitter.com";Xn.PROVIDER_ID="twitter.com";class Is{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Gt._fromIdTokenResponse(e,r,s),o=od(r);return new Is({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=od(r);return new Is({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function od(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class ha extends Tn{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,ha.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new ha(e,n,r,s)}}function Cm(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?ha._fromErrorAndOperation(t,i,e,r):i})}async function NA(t,e,n=!1){const r=await Oi(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Is._forOperation(t,"link",r)}async function DA(t,e,n=!1){const{auth:r}=t;if(Mt(r.app))return Promise.reject(ir(r));const s="reauthenticate";try{const i=await Oi(t,Cm(r,s,e,t),n);le(i.idToken,r,"internal-error");const o=gu(i.idToken);le(o,r,"internal-error");const{sub:c}=o;return le(t.uid===c,r,"user-mismatch"),Is._forOperation(t,s,i)}catch(i){throw i?.code==="auth/user-not-found"&&Jt(r,"user-mismatch"),i}}async function Pm(t,e,n=!1){if(Mt(t.app))return Promise.reject(ir(t));const r="signIn",s=await Cm(t,r,e),i=await Is._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function OA(t,e){return Pm(Ns(t),e)}async function kA(t){const e=Ns(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function VA(t,e,n){return Mt(t.app)?Promise.reject(ir(t)):OA(He(t),Ds.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&kA(t),r})}function xA(t,e,n,r){return He(t).onIdTokenChanged(e,n,r)}function LA(t,e,n){return He(t).beforeAuthStateChanged(e,n)}function MA(t){return He(t).signOut()}const fa="__sak";class Nm{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(fa,"1"),this.storage.removeItem(fa),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const UA=1e3,FA=10;class Dm extends Nm{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=vm(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);sA()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,FA):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},UA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Dm.type="LOCAL";const BA=Dm;class Om extends Nm{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Om.type="SESSION";const km=Om;function jA(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class qa{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new qa(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(o).map(async u=>u(n.origin,i)),l=await jA(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}qa.receivers=[];function Eu(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}class qA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((c,l)=>{const u=Eu("",20);s.port1.start();const f=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(p){const g=p;if(g.data.eventId===u)switch(g.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(g.data.response);break;default:clearTimeout(f),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function fn(){return window}function $A(t){fn().location.href=t}function Vm(){return typeof fn().WorkerGlobalScope<"u"&&typeof fn().importScripts=="function"}async function HA(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function WA(){return navigator?.serviceWorker?.controller||null}function GA(){return Vm()?self:null}const xm="firebaseLocalStorageDb",zA=1,da="firebaseLocalStorage",Lm="fbase_key";class Ji{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function $a(t,e){return t.transaction([da],e?"readwrite":"readonly").objectStore(da)}function KA(){const t=indexedDB.deleteDatabase(xm);return new Ji(t).toPromise()}function gl(){const t=indexedDB.open(xm,zA);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(da,{keyPath:Lm})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(da)?e(r):(r.close(),await KA(),e(await gl()))})})}async function ad(t,e,n){const r=$a(t,!0).put({[Lm]:e,value:n});return new Ji(r).toPromise()}async function QA(t,e){const n=$a(t,!1).get(e),r=await new Ji(n).toPromise();return r===void 0?null:r.value}function cd(t,e){const n=$a(t,!0).delete(e);return new Ji(n).toPromise()}const YA=800,JA=3;class Mm{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await gl(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>JA)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Vm()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=qa._getInstance(GA()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await HA(),!this.activeServiceWorker)return;this.sender=new qA(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||WA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await gl();return await ad(e,fa,"1"),await cd(e,fa),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>ad(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>QA(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>cd(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=$a(s,!1).getAll();return new Ji(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),YA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Mm.type="LOCAL";const XA=Mm;new Qi(3e4,6e4);function ZA(t,e){return e?Cn(e):(le(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class Tu extends _u{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return gs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return gs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return gs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function eR(t){return Pm(t.auth,new Tu(t),t.bypassAuthState)}function tR(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),DA(n,new Tu(t),t.bypassAuthState)}async function nR(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),NA(n,new Tu(t),t.bypassAuthState)}class Um{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:c}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return eR;case"linkViaPopup":case"linkViaRedirect":return nR;case"reauthViaPopup":case"reauthViaRedirect":return tR;default:Jt(this.auth,"internal-error")}}resolve(e){kn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){kn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const rR=new Qi(2e3,1e4);class as extends Um{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,as.currentPopupAction&&as.currentPopupAction.cancel(),as.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return le(e,this.auth,"internal-error"),e}async onExecution(){kn(this.filter.length===1,"Popup operations only handle one event");const e=Eu();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(hn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(hn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,as.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(hn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,rR.get())};e()}}as.currentPopupAction=null;const sR="pendingRedirect",$o=new Map;class iR extends Um{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=$o.get(this.auth._key());if(!e){try{const r=await oR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}$o.set(this.auth._key(),e)}return this.bypassAuthState||$o.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function oR(t,e){const n=lR(e),r=cR(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function aR(t,e){$o.set(t._key(),e)}function cR(t){return Cn(t._redirectPersistence)}function lR(t){return qo(sR,t.config.apiKey,t.name)}async function uR(t,e,n=!1){if(Mt(t.app))return Promise.reject(ir(t));const r=Ns(t),s=ZA(r,e),o=await new iR(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}const hR=600*1e3;class fR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!dR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!Fm(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(hn(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=hR&&this.cachedEventUids.clear(),this.cachedEventUids.has(ld(e))}saveEventToCache(e){this.cachedEventUids.add(ld(e)),this.lastProcessedEventTime=Date.now()}}function ld(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Fm({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function dR(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Fm(t);default:return!1}}async function pR(t,e={}){return yr(t,"GET","/v1/projects",e)}const gR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mR=/^https?/;async function _R(t){if(t.config.emulator)return;const{authorizedDomains:e}=await pR(t);for(const n of e)try{if(yR(n))return}catch{}Jt(t,"unauthorized-domain")}function yR(t){const e=dl(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!mR.test(n))return!1;if(gR.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const ER=new Qi(3e4,6e4);function ud(){const t=fn().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function TR(t){return new Promise((e,n)=>{function r(){ud(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ud(),n(hn(t,"network-request-failed"))},timeout:ER.get()})}if(fn().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(fn().gapi?.load)r();else{const s=dA("iframefcb");return fn()[s]=()=>{gapi.load?r():n(hn(t,"network-request-failed"))},Am(`${fA()}?onload=${s}`).catch(i=>n(i))}}).catch(e=>{throw Ho=null,e})}let Ho=null;function IR(t){return Ho=Ho||TR(t),Ho}const vR=new Qi(5e3,15e3),wR="__/auth/iframe",AR="emulator/auth/iframe",RR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function SR(t){const e=t.config;le(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?pu(e,AR):`https://${t.config.authDomain}/${wR}`,r={apiKey:e.apiKey,appName:t.name,v:Wr},s=bR.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Ki(r).slice(1)}`}async function CR(t){const e=await IR(t),n=fn().gapi;return le(n,t,"internal-error"),e.open({where:document.body,url:SR(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:RR,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=hn(t,"network-request-failed"),c=fn().setTimeout(()=>{i(o)},vR.get());function l(){fn().clearTimeout(c),s(r)}r.ping(l).then(l,()=>{i(o)})}))}const PR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},NR=500,DR=600,OR="_blank",kR="http://localhost";class hd{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function VR(t,e,n,r=NR,s=DR){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const l={...PR,width:r.toString(),height:s.toString(),top:i,left:o},u=Et().toLowerCase();n&&(c=_m(u)?OR:n),gm(u)&&(e=e||kR,l.scrollbars="yes");const f=Object.entries(l).reduce((g,[w,P])=>`${g}${w}=${P},`,"");if(rA(u)&&c!=="_self")return xR(e||"",c),new hd(null);const p=window.open(e||"",c,f);le(p,t,"popup-blocked");try{p.focus()}catch{}return new hd(p)}function xR(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const LR="__/auth/handler",MR="emulator/auth/handler",UR=encodeURIComponent("fac");async function fd(t,e,n,r,s,i){le(t.config.authDomain,t,"auth-domain-config-required"),le(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Wr,eventId:s};if(e instanceof Sm){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Rv(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))o[f]=p}if(e instanceof Yi){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const f of Object.keys(c))c[f]===void 0&&delete c[f];const l=await t._getAppCheckToken(),u=l?`#${UR}=${encodeURIComponent(l)}`:"";return`${FR(t)}?${Ki(c).slice(1)}${u}`}function FR({config:t}){return t.emulator?pu(t,MR):`https://${t.authDomain}/${LR}`}const Uc="webStorageSupport";class BR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=km,this._completeRedirectFn=uR,this._overrideRedirectResult=aR}async _openPopup(e,n,r,s){kn(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await fd(e,n,r,dl(),s);return VR(e,i,Eu())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await fd(e,n,r,dl(),s);return $A(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(kn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await CR(e),r=new fR(e);return n.register("authEvent",s=>(le(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Uc,{type:Uc},s=>{const i=s?.[0]?.[Uc];i!==void 0&&n(!!i),Jt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=_R(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return vm()||mm()||mu()}}const jR=BR;var dd="@firebase/auth",pd="1.11.1";class qR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function $R(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function HR(t){Ur(new ur("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;le(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:wm(t)},u=new lA(r,s,i,l);return EA(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ur(new ur("auth-internal",e=>{const n=Ns(e.getProvider("auth").getImmediate());return(r=>new qR(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),un(dd,pd,$R(t)),un(dd,pd,"esm2020")}const WR=300,GR=em("authIdTokenMaxAge")||WR;let gd=null;const zR=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>GR)return;const s=n?.token;gd!==s&&(gd=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function KR(t=fu()){const e=Fa(t,"auth");if(e.isInitialized())return e.getImmediate();const n=yA(t,{popupRedirectResolver:jR,persistence:[XA,BA,km]}),r=em("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=zR(i.toString());LA(n,o,()=>o(n.currentUser)),xA(n,c=>o(c))}}const s=Jg("auth");return s&&TA(n,`http://${s}`),n}function QR(){return document.getElementsByTagName("head")?.[0]??document}uA({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=hn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",QR().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});HR("Browser");var YR="firebase",JR="12.6.0";un(YR,JR,"app");var md=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var or,Bm;(function(){var t;function e(T,E){function v(){}v.prototype=E.prototype,T.F=E.prototype,T.prototype=new v,T.prototype.constructor=T,T.D=function(_,I,R){for(var y=Array(arguments.length-2),ee=2;ee<arguments.length;ee++)y[ee-2]=arguments[ee];return E.prototype[I].apply(_,y)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,E,v){v||(v=0);const _=Array(16);if(typeof E=="string")for(var I=0;I<16;++I)_[I]=E.charCodeAt(v++)|E.charCodeAt(v++)<<8|E.charCodeAt(v++)<<16|E.charCodeAt(v++)<<24;else for(I=0;I<16;++I)_[I]=E[v++]|E[v++]<<8|E[v++]<<16|E[v++]<<24;E=T.g[0],v=T.g[1],I=T.g[2];let R=T.g[3],y;y=E+(R^v&(I^R))+_[0]+3614090360&4294967295,E=v+(y<<7&4294967295|y>>>25),y=R+(I^E&(v^I))+_[1]+3905402710&4294967295,R=E+(y<<12&4294967295|y>>>20),y=I+(v^R&(E^v))+_[2]+606105819&4294967295,I=R+(y<<17&4294967295|y>>>15),y=v+(E^I&(R^E))+_[3]+3250441966&4294967295,v=I+(y<<22&4294967295|y>>>10),y=E+(R^v&(I^R))+_[4]+4118548399&4294967295,E=v+(y<<7&4294967295|y>>>25),y=R+(I^E&(v^I))+_[5]+1200080426&4294967295,R=E+(y<<12&4294967295|y>>>20),y=I+(v^R&(E^v))+_[6]+2821735955&4294967295,I=R+(y<<17&4294967295|y>>>15),y=v+(E^I&(R^E))+_[7]+4249261313&4294967295,v=I+(y<<22&4294967295|y>>>10),y=E+(R^v&(I^R))+_[8]+1770035416&4294967295,E=v+(y<<7&4294967295|y>>>25),y=R+(I^E&(v^I))+_[9]+2336552879&4294967295,R=E+(y<<12&4294967295|y>>>20),y=I+(v^R&(E^v))+_[10]+4294925233&4294967295,I=R+(y<<17&4294967295|y>>>15),y=v+(E^I&(R^E))+_[11]+2304563134&4294967295,v=I+(y<<22&4294967295|y>>>10),y=E+(R^v&(I^R))+_[12]+1804603682&4294967295,E=v+(y<<7&4294967295|y>>>25),y=R+(I^E&(v^I))+_[13]+4254626195&4294967295,R=E+(y<<12&4294967295|y>>>20),y=I+(v^R&(E^v))+_[14]+2792965006&4294967295,I=R+(y<<17&4294967295|y>>>15),y=v+(E^I&(R^E))+_[15]+1236535329&4294967295,v=I+(y<<22&4294967295|y>>>10),y=E+(I^R&(v^I))+_[1]+4129170786&4294967295,E=v+(y<<5&4294967295|y>>>27),y=R+(v^I&(E^v))+_[6]+3225465664&4294967295,R=E+(y<<9&4294967295|y>>>23),y=I+(E^v&(R^E))+_[11]+643717713&4294967295,I=R+(y<<14&4294967295|y>>>18),y=v+(R^E&(I^R))+_[0]+3921069994&4294967295,v=I+(y<<20&4294967295|y>>>12),y=E+(I^R&(v^I))+_[5]+3593408605&4294967295,E=v+(y<<5&4294967295|y>>>27),y=R+(v^I&(E^v))+_[10]+38016083&4294967295,R=E+(y<<9&4294967295|y>>>23),y=I+(E^v&(R^E))+_[15]+3634488961&4294967295,I=R+(y<<14&4294967295|y>>>18),y=v+(R^E&(I^R))+_[4]+3889429448&4294967295,v=I+(y<<20&4294967295|y>>>12),y=E+(I^R&(v^I))+_[9]+568446438&4294967295,E=v+(y<<5&4294967295|y>>>27),y=R+(v^I&(E^v))+_[14]+3275163606&4294967295,R=E+(y<<9&4294967295|y>>>23),y=I+(E^v&(R^E))+_[3]+4107603335&4294967295,I=R+(y<<14&4294967295|y>>>18),y=v+(R^E&(I^R))+_[8]+1163531501&4294967295,v=I+(y<<20&4294967295|y>>>12),y=E+(I^R&(v^I))+_[13]+2850285829&4294967295,E=v+(y<<5&4294967295|y>>>27),y=R+(v^I&(E^v))+_[2]+4243563512&4294967295,R=E+(y<<9&4294967295|y>>>23),y=I+(E^v&(R^E))+_[7]+1735328473&4294967295,I=R+(y<<14&4294967295|y>>>18),y=v+(R^E&(I^R))+_[12]+2368359562&4294967295,v=I+(y<<20&4294967295|y>>>12),y=E+(v^I^R)+_[5]+4294588738&4294967295,E=v+(y<<4&4294967295|y>>>28),y=R+(E^v^I)+_[8]+2272392833&4294967295,R=E+(y<<11&4294967295|y>>>21),y=I+(R^E^v)+_[11]+1839030562&4294967295,I=R+(y<<16&4294967295|y>>>16),y=v+(I^R^E)+_[14]+4259657740&4294967295,v=I+(y<<23&4294967295|y>>>9),y=E+(v^I^R)+_[1]+2763975236&4294967295,E=v+(y<<4&4294967295|y>>>28),y=R+(E^v^I)+_[4]+1272893353&4294967295,R=E+(y<<11&4294967295|y>>>21),y=I+(R^E^v)+_[7]+4139469664&4294967295,I=R+(y<<16&4294967295|y>>>16),y=v+(I^R^E)+_[10]+3200236656&4294967295,v=I+(y<<23&4294967295|y>>>9),y=E+(v^I^R)+_[13]+681279174&4294967295,E=v+(y<<4&4294967295|y>>>28),y=R+(E^v^I)+_[0]+3936430074&4294967295,R=E+(y<<11&4294967295|y>>>21),y=I+(R^E^v)+_[3]+3572445317&4294967295,I=R+(y<<16&4294967295|y>>>16),y=v+(I^R^E)+_[6]+76029189&4294967295,v=I+(y<<23&4294967295|y>>>9),y=E+(v^I^R)+_[9]+3654602809&4294967295,E=v+(y<<4&4294967295|y>>>28),y=R+(E^v^I)+_[12]+3873151461&4294967295,R=E+(y<<11&4294967295|y>>>21),y=I+(R^E^v)+_[15]+530742520&4294967295,I=R+(y<<16&4294967295|y>>>16),y=v+(I^R^E)+_[2]+3299628645&4294967295,v=I+(y<<23&4294967295|y>>>9),y=E+(I^(v|~R))+_[0]+4096336452&4294967295,E=v+(y<<6&4294967295|y>>>26),y=R+(v^(E|~I))+_[7]+1126891415&4294967295,R=E+(y<<10&4294967295|y>>>22),y=I+(E^(R|~v))+_[14]+2878612391&4294967295,I=R+(y<<15&4294967295|y>>>17),y=v+(R^(I|~E))+_[5]+4237533241&4294967295,v=I+(y<<21&4294967295|y>>>11),y=E+(I^(v|~R))+_[12]+1700485571&4294967295,E=v+(y<<6&4294967295|y>>>26),y=R+(v^(E|~I))+_[3]+2399980690&4294967295,R=E+(y<<10&4294967295|y>>>22),y=I+(E^(R|~v))+_[10]+4293915773&4294967295,I=R+(y<<15&4294967295|y>>>17),y=v+(R^(I|~E))+_[1]+2240044497&4294967295,v=I+(y<<21&4294967295|y>>>11),y=E+(I^(v|~R))+_[8]+1873313359&4294967295,E=v+(y<<6&4294967295|y>>>26),y=R+(v^(E|~I))+_[15]+4264355552&4294967295,R=E+(y<<10&4294967295|y>>>22),y=I+(E^(R|~v))+_[6]+2734768916&4294967295,I=R+(y<<15&4294967295|y>>>17),y=v+(R^(I|~E))+_[13]+1309151649&4294967295,v=I+(y<<21&4294967295|y>>>11),y=E+(I^(v|~R))+_[4]+4149444226&4294967295,E=v+(y<<6&4294967295|y>>>26),y=R+(v^(E|~I))+_[11]+3174756917&4294967295,R=E+(y<<10&4294967295|y>>>22),y=I+(E^(R|~v))+_[2]+718787259&4294967295,I=R+(y<<15&4294967295|y>>>17),y=v+(R^(I|~E))+_[9]+3951481745&4294967295,T.g[0]=T.g[0]+E&4294967295,T.g[1]=T.g[1]+(I+(y<<21&4294967295|y>>>11))&4294967295,T.g[2]=T.g[2]+I&4294967295,T.g[3]=T.g[3]+R&4294967295}r.prototype.v=function(T,E){E===void 0&&(E=T.length);const v=E-this.blockSize,_=this.C;let I=this.h,R=0;for(;R<E;){if(I==0)for(;R<=v;)s(this,T,R),R+=this.blockSize;if(typeof T=="string"){for(;R<E;)if(_[I++]=T.charCodeAt(R++),I==this.blockSize){s(this,_),I=0;break}}else for(;R<E;)if(_[I++]=T[R++],I==this.blockSize){s(this,_),I=0;break}}this.h=I,this.o+=E},r.prototype.A=function(){var T=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);T[0]=128;for(var E=1;E<T.length-8;++E)T[E]=0;E=this.o*8;for(var v=T.length-8;v<T.length;++v)T[v]=E&255,E/=256;for(this.v(T),T=Array(16),E=0,v=0;v<4;++v)for(let _=0;_<32;_+=8)T[E++]=this.g[v]>>>_&255;return T};function i(T,E){var v=c;return Object.prototype.hasOwnProperty.call(v,T)?v[T]:v[T]=E(T)}function o(T,E){this.h=E;const v=[];let _=!0;for(let I=T.length-1;I>=0;I--){const R=T[I]|0;_&&R==E||(v[I]=R,_=!1)}this.g=v}var c={};function l(T){return-128<=T&&T<128?i(T,function(E){return new o([E|0],E<0?-1:0)}):new o([T|0],T<0?-1:0)}function u(T){if(isNaN(T)||!isFinite(T))return p;if(T<0)return N(u(-T));const E=[];let v=1;for(let _=0;T>=v;_++)E[_]=T/v|0,v*=4294967296;return new o(E,0)}function f(T,E){if(T.length==0)throw Error("number format error: empty string");if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(T.charAt(0)=="-")return N(f(T.substring(1),E));if(T.indexOf("-")>=0)throw Error('number format error: interior "-" character');const v=u(Math.pow(E,8));let _=p;for(let R=0;R<T.length;R+=8){var I=Math.min(8,T.length-R);const y=parseInt(T.substring(R,R+I),E);I<8?(I=u(Math.pow(E,I)),_=_.j(I).add(u(y))):(_=_.j(v),_=_.add(u(y)))}return _}var p=l(0),g=l(1),w=l(16777216);t=o.prototype,t.m=function(){if(O(this))return-N(this).m();let T=0,E=1;for(let v=0;v<this.g.length;v++){const _=this.i(v);T+=(_>=0?_:4294967296+_)*E,E*=4294967296}return T},t.toString=function(T){if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(P(this))return"0";if(O(this))return"-"+N(this).toString(T);const E=u(Math.pow(T,6));var v=this;let _="";for(;;){const I=$(v,E).g;v=F(v,I.j(E));let R=((v.g.length>0?v.g[0]:v.h)>>>0).toString(T);if(v=I,P(v))return R+_;for(;R.length<6;)R="0"+R;_=R+_}},t.i=function(T){return T<0?0:T<this.g.length?this.g[T]:this.h};function P(T){if(T.h!=0)return!1;for(let E=0;E<T.g.length;E++)if(T.g[E]!=0)return!1;return!0}function O(T){return T.h==-1}t.l=function(T){return T=F(this,T),O(T)?-1:P(T)?0:1};function N(T){const E=T.g.length,v=[];for(let _=0;_<E;_++)v[_]=~T.g[_];return new o(v,~T.h).add(g)}t.abs=function(){return O(this)?N(this):this},t.add=function(T){const E=Math.max(this.g.length,T.g.length),v=[];let _=0;for(let I=0;I<=E;I++){let R=_+(this.i(I)&65535)+(T.i(I)&65535),y=(R>>>16)+(this.i(I)>>>16)+(T.i(I)>>>16);_=y>>>16,R&=65535,y&=65535,v[I]=y<<16|R}return new o(v,v[v.length-1]&-2147483648?-1:0)};function F(T,E){return T.add(N(E))}t.j=function(T){if(P(this)||P(T))return p;if(O(this))return O(T)?N(this).j(N(T)):N(N(this).j(T));if(O(T))return N(this.j(N(T)));if(this.l(w)<0&&T.l(w)<0)return u(this.m()*T.m());const E=this.g.length+T.g.length,v=[];for(var _=0;_<2*E;_++)v[_]=0;for(_=0;_<this.g.length;_++)for(let I=0;I<T.g.length;I++){const R=this.i(_)>>>16,y=this.i(_)&65535,ee=T.i(I)>>>16,ie=T.i(I)&65535;v[2*_+2*I]+=y*ie,B(v,2*_+2*I),v[2*_+2*I+1]+=R*ie,B(v,2*_+2*I+1),v[2*_+2*I+1]+=y*ee,B(v,2*_+2*I+1),v[2*_+2*I+2]+=R*ee,B(v,2*_+2*I+2)}for(T=0;T<E;T++)v[T]=v[2*T+1]<<16|v[2*T];for(T=E;T<2*E;T++)v[T]=0;return new o(v,0)};function B(T,E){for(;(T[E]&65535)!=T[E];)T[E+1]+=T[E]>>>16,T[E]&=65535,E++}function q(T,E){this.g=T,this.h=E}function $(T,E){if(P(E))throw Error("division by zero");if(P(T))return new q(p,p);if(O(T))return E=$(N(T),E),new q(N(E.g),N(E.h));if(O(E))return E=$(T,N(E)),new q(N(E.g),E.h);if(T.g.length>30){if(O(T)||O(E))throw Error("slowDivide_ only works with positive integers.");for(var v=g,_=E;_.l(T)<=0;)v=te(v),_=te(_);var I=G(v,1),R=G(_,1);for(_=G(_,2),v=G(v,2);!P(_);){var y=R.add(_);y.l(T)<=0&&(I=I.add(v),R=y),_=G(_,1),v=G(v,1)}return E=F(T,I.j(E)),new q(I,E)}for(I=p;T.l(E)>=0;){for(v=Math.max(1,Math.floor(T.m()/E.m())),_=Math.ceil(Math.log(v)/Math.LN2),_=_<=48?1:Math.pow(2,_-48),R=u(v),y=R.j(E);O(y)||y.l(T)>0;)v-=_,R=u(v),y=R.j(E);P(R)&&(R=g),I=I.add(R),T=F(T,y)}return new q(I,T)}t.B=function(T){return $(this,T).h},t.and=function(T){const E=Math.max(this.g.length,T.g.length),v=[];for(let _=0;_<E;_++)v[_]=this.i(_)&T.i(_);return new o(v,this.h&T.h)},t.or=function(T){const E=Math.max(this.g.length,T.g.length),v=[];for(let _=0;_<E;_++)v[_]=this.i(_)|T.i(_);return new o(v,this.h|T.h)},t.xor=function(T){const E=Math.max(this.g.length,T.g.length),v=[];for(let _=0;_<E;_++)v[_]=this.i(_)^T.i(_);return new o(v,this.h^T.h)};function te(T){const E=T.g.length+1,v=[];for(let _=0;_<E;_++)v[_]=T.i(_)<<1|T.i(_-1)>>>31;return new o(v,T.h)}function G(T,E){const v=E>>5;E%=32;const _=T.g.length-v,I=[];for(let R=0;R<_;R++)I[R]=E>0?T.i(R+v)>>>E|T.i(R+v+1)<<32-E:T.i(R+v);return new o(I,T.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Bm=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=f,or=o}).apply(typeof md<"u"?md:typeof self<"u"?self:typeof window<"u"?window:{});var Io=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var jm,oi,qm,Wo,ml,$m,Hm,Wm;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Io=="object"&&Io];for(var h=0;h<a.length;++h){var d=a[h];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=n(this);function s(a,h){if(h)e:{var d=r;a=a.split(".");for(var m=0;m<a.length-1;m++){var C=a[m];if(!(C in d))break e;d=d[C]}a=a[a.length-1],m=d[a],h=h(m),h!=m&&h!=null&&e(d,a,{configurable:!0,writable:!0,value:h})}}s("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(a){return a||function(h){var d=[],m;for(m in h)Object.prototype.hasOwnProperty.call(h,m)&&d.push([m,h[m]]);return d}});var i=i||{},o=this||self;function c(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function l(a,h,d){return a.call.apply(a.bind,arguments)}function u(a,h,d){return u=l,u.apply(null,arguments)}function f(a,h){var d=Array.prototype.slice.call(arguments,1);return function(){var m=d.slice();return m.push.apply(m,arguments),a.apply(this,m)}}function p(a,h){function d(){}d.prototype=h.prototype,a.Z=h.prototype,a.prototype=new d,a.prototype.constructor=a,a.Ob=function(m,C,D){for(var z=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)z[_e-2]=arguments[_e];return h.prototype[C].apply(m,z)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function w(a){const h=a.length;if(h>0){const d=Array(h);for(let m=0;m<h;m++)d[m]=a[m];return d}return[]}function P(a,h){for(let m=1;m<arguments.length;m++){const C=arguments[m];var d=typeof C;if(d=d!="object"?d:C?Array.isArray(C)?"array":d:"null",d=="array"||d=="object"&&typeof C.length=="number"){d=a.length||0;const D=C.length||0;a.length=d+D;for(let z=0;z<D;z++)a[d+z]=C[z]}else a.push(C)}}class O{constructor(h,d){this.i=h,this.j=d,this.h=0,this.g=null}get(){let h;return this.h>0?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function N(a){o.setTimeout(()=>{throw a},0)}function F(){var a=T;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class B{constructor(){this.h=this.g=null}add(h,d){const m=q.get();m.set(h,d),this.h?this.h.next=m:this.g=m,this.h=m}}var q=new O(()=>new $,a=>a.reset());class ${constructor(){this.next=this.g=this.h=null}set(h,d){this.h=h,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let te,G=!1,T=new B,E=()=>{const a=Promise.resolve(void 0);te=()=>{a.then(v)}};function v(){for(var a;a=F();){try{a.h.call(a.g)}catch(d){N(d)}var h=q;h.j(a),h.h<100&&(h.h++,a.next=h.g,h.g=a)}G=!1}function _(){this.u=this.u,this.C=this.C}_.prototype.u=!1,_.prototype.dispose=function(){this.u||(this.u=!0,this.N())},_.prototype[Symbol.dispose]=function(){this.dispose()},_.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function I(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var R=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const d=()=>{};o.addEventListener("test",d,h),o.removeEventListener("test",d,h)}catch{}return a})();function y(a){return/^[\s\xa0]*$/.test(a)}function ee(a,h){I.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,h)}p(ee,I),ee.prototype.init=function(a,h){const d=this.type=a.type,m=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget,h||(d=="mouseover"?h=a.fromElement:d=="mouseout"&&(h=a.toElement)),this.relatedTarget=h,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&ee.Z.h.call(this)},ee.prototype.h=function(){ee.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var ie="closure_listenable_"+(Math.random()*1e6|0),me=0;function fe(a,h,d,m,C){this.listener=a,this.proxy=null,this.src=h,this.type=d,this.capture=!!m,this.ha=C,this.key=++me,this.da=this.fa=!1}function ce(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function xe(a,h,d){for(const m in a)h.call(d,a[m],m,a)}function Lt(a,h){for(const d in a)h.call(void 0,a[d],d,a)}function We(a){const h={};for(const d in a)h[d]=a[d];return h}const rt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function In(a,h){let d,m;for(let C=1;C<arguments.length;C++){m=arguments[C];for(d in m)a[d]=m[d];for(let D=0;D<rt.length;D++)d=rt[D],Object.prototype.hasOwnProperty.call(m,d)&&(a[d]=m[d])}}function jt(a){this.src=a,this.g={},this.h=0}jt.prototype.add=function(a,h,d,m,C){const D=a.toString();a=this.g[D],a||(a=this.g[D]=[],this.h++);const z=lt(a,h,m,C);return z>-1?(h=a[z],d||(h.fa=!1)):(h=new fe(h,this.src,D,!!m,C),h.fa=d,a.push(h)),h};function qt(a,h){const d=h.type;if(d in a.g){var m=a.g[d],C=Array.prototype.indexOf.call(m,h,void 0),D;(D=C>=0)&&Array.prototype.splice.call(m,C,1),D&&(ce(h),a.g[d].length==0&&(delete a.g[d],a.h--))}}function lt(a,h,d,m){for(let C=0;C<a.length;++C){const D=a[C];if(!D.da&&D.listener==h&&D.capture==!!d&&D.ha==m)return C}return-1}var V="closure_lm_"+(Math.random()*1e6|0),X={};function Q(a,h,d,m,C){if(Array.isArray(h)){for(let D=0;D<h.length;D++)Q(a,h[D],d,m,C);return null}return d=K(d),a&&a[ie]?a.J(h,d,c(m)?!!m.capture:!1,C):ne(a,h,d,!1,m,C)}function ne(a,h,d,m,C,D){if(!h)throw Error("Invalid event type");const z=c(C)?!!C.capture:!!C;let _e=U(a);if(_e||(a[V]=_e=new jt(a)),d=_e.add(h,d,m,z,D),d.proxy)return d;if(m=Ee(),d.proxy=m,m.src=a,m.listener=d,a.addEventListener)R||(C=z),C===void 0&&(C=!1),a.addEventListener(h.toString(),m,C);else if(a.attachEvent)a.attachEvent(S(h.toString()),m);else if(a.addListener&&a.removeListener)a.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return d}function Ee(){function a(d){return h.call(a.src,a.listener,d)}const h=L;return a}function A(a,h,d,m,C){if(Array.isArray(h))for(var D=0;D<h.length;D++)A(a,h[D],d,m,C);else m=c(m)?!!m.capture:!!m,d=K(d),a&&a[ie]?(a=a.i,D=String(h).toString(),D in a.g&&(h=a.g[D],d=lt(h,d,m,C),d>-1&&(ce(h[d]),Array.prototype.splice.call(h,d,1),h.length==0&&(delete a.g[D],a.h--)))):a&&(a=U(a))&&(h=a.g[h.toString()],a=-1,h&&(a=lt(h,d,m,C)),(d=a>-1?h[a]:null)&&b(d))}function b(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[ie])qt(h.i,a);else{var d=a.type,m=a.proxy;h.removeEventListener?h.removeEventListener(d,m,a.capture):h.detachEvent?h.detachEvent(S(d),m):h.addListener&&h.removeListener&&h.removeListener(m),(d=U(h))?(qt(d,a),d.h==0&&(d.src=null,h[V]=null)):ce(a)}}}function S(a){return a in X?X[a]:X[a]="on"+a}function L(a,h){if(a.da)a=!0;else{h=new ee(h,this);const d=a.listener,m=a.ha||a.src;a.fa&&b(a),a=d.call(m,h)}return a}function U(a){return a=a[V],a instanceof jt?a:null}var k="__closure_events_fn_"+(Math.random()*1e9>>>0);function K(a){return typeof a=="function"?a:(a[k]||(a[k]=function(h){return a.handleEvent(h)}),a[k])}function W(){_.call(this),this.i=new jt(this),this.M=this,this.G=null}p(W,_),W.prototype[ie]=!0,W.prototype.removeEventListener=function(a,h,d,m){A(this,a,h,d,m)};function H(a,h){var d,m=a.G;if(m)for(d=[];m;m=m.G)d.push(m);if(a=a.M,m=h.type||h,typeof h=="string")h=new I(h,a);else if(h instanceof I)h.target=h.target||a;else{var C=h;h=new I(m,a),In(h,C)}C=!0;let D,z;if(d)for(z=d.length-1;z>=0;z--)D=h.g=d[z],C=j(D,m,!0,h)&&C;if(D=h.g=a,C=j(D,m,!0,h)&&C,C=j(D,m,!1,h)&&C,d)for(z=0;z<d.length;z++)D=h.g=d[z],C=j(D,m,!1,h)&&C}W.prototype.N=function(){if(W.Z.N.call(this),this.i){var a=this.i;for(const h in a.g){const d=a.g[h];for(let m=0;m<d.length;m++)ce(d[m]);delete a.g[h],a.h--}}this.G=null},W.prototype.J=function(a,h,d,m){return this.i.add(String(a),h,!1,d,m)},W.prototype.K=function(a,h,d,m){return this.i.add(String(a),h,!0,d,m)};function j(a,h,d,m){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();let C=!0;for(let D=0;D<h.length;++D){const z=h[D];if(z&&!z.da&&z.capture==d){const _e=z.listener,Ye=z.ha||z.src;z.fa&&qt(a.i,z),C=_e.call(Ye,m)!==!1&&C}}return C&&!m.defaultPrevented}function oe(a,h){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=u(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(h)>2147483647?-1:o.setTimeout(a,h||0)}function Y(a){a.g=oe(()=>{a.g=null,a.i&&(a.i=!1,Y(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class se extends _{constructor(h,d){super(),this.m=h,this.l=d,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Y(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ae(a){_.call(this),this.h=a,this.g={}}p(ae,_);var ye=[];function Pe(a){xe(a.g,function(h,d){this.g.hasOwnProperty(d)&&b(h)},a),a.g={}}ae.prototype.N=function(){ae.Z.N.call(this),Pe(this)},ae.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ae=o.JSON.stringify,ut=o.JSON.parse,ht=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function Ct(){}function Pt(){}var $t={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Yr(){I.call(this,"d")}p(Yr,I);function st(){I.call(this,"c")}p(st,I);var et={},Ms=null;function Ir(){return Ms=Ms||new W}et.Ia="serverreachability";function lh(a){I.call(this,et.Ia,a)}p(lh,I);function Us(a){const h=Ir();H(h,new lh(h))}et.STAT_EVENT="statevent";function uh(a,h){I.call(this,et.STAT_EVENT,a),this.stat=h}p(uh,I);function Tt(a){const h=Ir();H(h,new uh(h,a))}et.Ja="timingevent";function hh(a,h){I.call(this,et.Ja,a),this.size=h}p(hh,I);function Fs(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},h)}function Bs(){this.g=!0}Bs.prototype.ua=function(){this.g=!1};function Gy(a,h,d,m,C,D){a.info(function(){if(a.g)if(D){var z="",_e=D.split("&");for(let De=0;De<_e.length;De++){var Ye=_e[De].split("=");if(Ye.length>1){const tt=Ye[0];Ye=Ye[1];const tn=tt.split("_");z=tn.length>=2&&tn[1]=="type"?z+(tt+"="+Ye+"&"):z+(tt+"=redacted&")}}}else z=null;else z=D;return"XMLHTTP REQ ("+m+") [attempt "+C+"]: "+h+`
`+d+`
`+z})}function zy(a,h,d,m,C,D,z){a.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+C+"]: "+h+`
`+d+`
`+D+" "+z})}function Jr(a,h,d,m){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+Qy(a,d)+(m?" "+m:"")})}function Ky(a,h){a.info(function(){return"TIMEOUT: "+h})}Bs.prototype.info=function(){};function Qy(a,h){if(!a.g)return h;if(!h)return null;try{const D=JSON.parse(h);if(D){for(a=0;a<D.length;a++)if(Array.isArray(D[a])){var d=D[a];if(!(d.length<2)){var m=d[1];if(Array.isArray(m)&&!(m.length<1)){var C=m[0];if(C!="noop"&&C!="stop"&&C!="close")for(let z=1;z<m.length;z++)m[z]=""}}}}return Ae(D)}catch{return h}}var io={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},fh={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},dh;function lc(){}p(lc,Ct),lc.prototype.g=function(){return new XMLHttpRequest},dh=new lc;function js(a){return encodeURIComponent(String(a))}function Yy(a){var h=1;a=a.split(":");const d=[];for(;h>0&&a.length;)d.push(a.shift()),h--;return a.length&&d.push(a.join(":")),d}function Mn(a,h,d,m){this.j=a,this.i=h,this.l=d,this.S=m||1,this.V=new ae(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ph}function ph(){this.i=null,this.g="",this.h=!1}var gh={},uc={};function hc(a,h,d){a.M=1,a.A=ao(en(h)),a.u=d,a.R=!0,mh(a,null)}function mh(a,h){a.F=Date.now(),oo(a),a.B=en(a.A);var d=a.B,m=a.S;Array.isArray(m)||(m=[String(m)]),Ph(d.i,"t",m),a.C=0,d=a.j.L,a.h=new ph,a.g=zh(a.j,d?h:null,!a.u),a.P>0&&(a.O=new se(u(a.Y,a,a.g),a.P)),h=a.V,d=a.g,m=a.ba;var C="readystatechange";Array.isArray(C)||(C&&(ye[0]=C.toString()),C=ye);for(let D=0;D<C.length;D++){const z=Q(d,C[D],m||h.handleEvent,!1,h.h||h);if(!z)break;h.g[z.key]=z}h=a.J?We(a.J):{},a.u?(a.v||(a.v="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,h)):(a.v="GET",a.g.ea(a.B,a.v,null,h)),Us(),Gy(a.i,a.v,a.B,a.l,a.S,a.u)}Mn.prototype.ba=function(a){a=a.target;const h=this.O;h&&Bn(a)==3?h.j():this.Y(a)},Mn.prototype.Y=function(a){try{if(a==this.g)e:{const _e=Bn(this.g),Ye=this.g.ya(),De=this.g.ca();if(!(_e<3)&&(_e!=3||this.g&&(this.h.h||this.g.la()||Lh(this.g)))){this.K||_e!=4||Ye==7||(Ye==8||De<=0?Us(3):Us(2)),fc(this);var h=this.g.ca();this.X=h;var d=Jy(this);if(this.o=h==200,zy(this.i,this.v,this.B,this.l,this.S,_e,h),this.o){if(this.U&&!this.L){t:{if(this.g){var m,C=this.g;if((m=C.g?C.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(m)){var D=m;break t}}D=null}if(a=D)Jr(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,dc(this,a);else{this.o=!1,this.m=3,Tt(12),vr(this),qs(this);break e}}if(this.R){a=!0;let tt;for(;!this.K&&this.C<d.length;)if(tt=Xy(this,d),tt==uc){_e==4&&(this.m=4,Tt(14),a=!1),Jr(this.i,this.l,null,"[Incomplete Response]");break}else if(tt==gh){this.m=4,Tt(15),Jr(this.i,this.l,d,"[Invalid Chunk]"),a=!1;break}else Jr(this.i,this.l,tt,null),dc(this,tt);if(_h(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),_e!=4||d.length!=0||this.h.h||(this.m=1,Tt(16),a=!1),this.o=this.o&&a,!a)Jr(this.i,this.l,d,"[Invalid Chunked Response]"),vr(this),qs(this);else if(d.length>0&&!this.W){this.W=!0;var z=this.j;z.g==this&&z.aa&&!z.P&&(z.j.info("Great, no buffering proxy detected. Bytes received: "+d.length),Ic(z),z.P=!0,Tt(11))}}else Jr(this.i,this.l,d,null),dc(this,d);_e==4&&vr(this),this.o&&!this.K&&(_e==4?$h(this.j,this):(this.o=!1,oo(this)))}else fE(this.g),h==400&&d.indexOf("Unknown SID")>0?(this.m=3,Tt(12)):(this.m=0,Tt(13)),vr(this),qs(this)}}}catch{}finally{}};function Jy(a){if(!_h(a))return a.g.la();const h=Lh(a.g);if(h==="")return"";let d="";const m=h.length,C=Bn(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return vr(a),qs(a),"";a.h.i=new o.TextDecoder}for(let D=0;D<m;D++)a.h.h=!0,d+=a.h.i.decode(h[D],{stream:!(C&&D==m-1)});return h.length=0,a.h.g+=d,a.C=0,a.h.g}function _h(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function Xy(a,h){var d=a.C,m=h.indexOf(`
`,d);return m==-1?uc:(d=Number(h.substring(d,m)),isNaN(d)?gh:(m+=1,m+d>h.length?uc:(h=h.slice(m,m+d),a.C=m+d,h)))}Mn.prototype.cancel=function(){this.K=!0,vr(this)};function oo(a){a.T=Date.now()+a.H,yh(a,a.H)}function yh(a,h){if(a.D!=null)throw Error("WatchDog timer not null");a.D=Fs(u(a.aa,a),h)}function fc(a){a.D&&(o.clearTimeout(a.D),a.D=null)}Mn.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(Ky(this.i,this.B),this.M!=2&&(Us(),Tt(17)),vr(this),this.m=2,qs(this)):yh(this,this.T-a)};function qs(a){a.j.I==0||a.K||$h(a.j,a)}function vr(a){fc(a);var h=a.O;h&&typeof h.dispose=="function"&&h.dispose(),a.O=null,Pe(a.V),a.g&&(h=a.g,a.g=null,h.abort(),h.dispose())}function dc(a,h){try{var d=a.j;if(d.I!=0&&(d.g==a||pc(d.h,a))){if(!a.L&&pc(d.h,a)&&d.I==3){try{var m=d.Ba.g.parse(h)}catch{m=null}if(Array.isArray(m)&&m.length==3){var C=m;if(C[0]==0){e:if(!d.v){if(d.g)if(d.g.F+3e3<a.F)fo(d),uo(d);else break e;Tc(d),Tt(18)}}else d.xa=C[1],0<d.xa-d.K&&C[2]<37500&&d.F&&d.A==0&&!d.C&&(d.C=Fs(u(d.Va,d),6e3));Ih(d.h)<=1&&d.ta&&(d.ta=void 0)}else Ar(d,11)}else if((a.L||d.g==a)&&fo(d),!y(h))for(C=d.Ba.g.parse(h),h=0;h<C.length;h++){let De=C[h];const tt=De[0];if(!(tt<=d.K))if(d.K=tt,De=De[1],d.I==2)if(De[0]=="c"){d.M=De[1],d.ba=De[2];const tn=De[3];tn!=null&&(d.ka=tn,d.j.info("VER="+d.ka));const Rr=De[4];Rr!=null&&(d.za=Rr,d.j.info("SVER="+d.za));const jn=De[5];jn!=null&&typeof jn=="number"&&jn>0&&(m=1.5*jn,d.O=m,d.j.info("backChannelRequestTimeoutMs_="+m)),m=d;const qn=a.g;if(qn){const go=qn.g?qn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(go){var D=m.h;D.g||go.indexOf("spdy")==-1&&go.indexOf("quic")==-1&&go.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(gc(D,D.h),D.h=null))}if(m.G){const vc=qn.g?qn.g.getResponseHeader("X-HTTP-Session-Id"):null;vc&&(m.wa=vc,Le(m.J,m.G,vc))}}d.I=3,d.l&&d.l.ra(),d.aa&&(d.T=Date.now()-a.F,d.j.info("Handshake RTT: "+d.T+"ms")),m=d;var z=a;if(m.na=Gh(m,m.L?m.ba:null,m.W),z.L){vh(m.h,z);var _e=z,Ye=m.O;Ye&&(_e.H=Ye),_e.D&&(fc(_e),oo(_e)),m.g=z}else jh(m);d.i.length>0&&ho(d)}else De[0]!="stop"&&De[0]!="close"||Ar(d,7);else d.I==3&&(De[0]=="stop"||De[0]=="close"?De[0]=="stop"?Ar(d,7):Ec(d):De[0]!="noop"&&d.l&&d.l.qa(De),d.A=0)}}Us(4)}catch{}}var Zy=class{constructor(a,h){this.g=a,this.map=h}};function Eh(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Th(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Ih(a){return a.h?1:a.g?a.g.size:0}function pc(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function gc(a,h){a.g?a.g.add(h):a.h=h}function vh(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}Eh.prototype.cancel=function(){if(this.i=wh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function wh(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const d of a.g.values())h=h.concat(d.G);return h}return w(a.i)}var Ah=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function eE(a,h){if(a){a=a.split("&");for(let d=0;d<a.length;d++){const m=a[d].indexOf("=");let C,D=null;m>=0?(C=a[d].substring(0,m),D=a[d].substring(m+1)):C=a[d],h(C,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function Un(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let h;a instanceof Un?(this.l=a.l,$s(this,a.j),this.o=a.o,this.g=a.g,Hs(this,a.u),this.h=a.h,mc(this,Nh(a.i)),this.m=a.m):a&&(h=String(a).match(Ah))?(this.l=!1,$s(this,h[1]||"",!0),this.o=Ws(h[2]||""),this.g=Ws(h[3]||"",!0),Hs(this,h[4]),this.h=Ws(h[5]||"",!0),mc(this,h[6]||"",!0),this.m=Ws(h[7]||"")):(this.l=!1,this.i=new zs(null,this.l))}Un.prototype.toString=function(){const a=[];var h=this.j;h&&a.push(Gs(h,Rh,!0),":");var d=this.g;return(d||h=="file")&&(a.push("//"),(h=this.o)&&a.push(Gs(h,Rh,!0),"@"),a.push(js(d).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.u,d!=null&&a.push(":",String(d))),(d=this.h)&&(this.g&&d.charAt(0)!="/"&&a.push("/"),a.push(Gs(d,d.charAt(0)=="/"?rE:nE,!0))),(d=this.i.toString())&&a.push("?",d),(d=this.m)&&a.push("#",Gs(d,iE)),a.join("")},Un.prototype.resolve=function(a){const h=en(this);let d=!!a.j;d?$s(h,a.j):d=!!a.o,d?h.o=a.o:d=!!a.g,d?h.g=a.g:d=a.u!=null;var m=a.h;if(d)Hs(h,a.u);else if(d=!!a.h){if(m.charAt(0)!="/")if(this.g&&!this.h)m="/"+m;else{var C=h.h.lastIndexOf("/");C!=-1&&(m=h.h.slice(0,C+1)+m)}if(C=m,C==".."||C==".")m="";else if(C.indexOf("./")!=-1||C.indexOf("/.")!=-1){m=C.lastIndexOf("/",0)==0,C=C.split("/");const D=[];for(let z=0;z<C.length;){const _e=C[z++];_e=="."?m&&z==C.length&&D.push(""):_e==".."?((D.length>1||D.length==1&&D[0]!="")&&D.pop(),m&&z==C.length&&D.push("")):(D.push(_e),m=!0)}m=D.join("/")}else m=C}return d?h.h=m:d=a.i.toString()!=="",d?mc(h,Nh(a.i)):d=!!a.m,d&&(h.m=a.m),h};function en(a){return new Un(a)}function $s(a,h,d){a.j=d?Ws(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function Hs(a,h){if(h){if(h=Number(h),isNaN(h)||h<0)throw Error("Bad port number "+h);a.u=h}else a.u=null}function mc(a,h,d){h instanceof zs?(a.i=h,oE(a.i,a.l)):(d||(h=Gs(h,sE)),a.i=new zs(h,a.l))}function Le(a,h,d){a.i.set(h,d)}function ao(a){return Le(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function Ws(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Gs(a,h,d){return typeof a=="string"?(a=encodeURI(a).replace(h,tE),d&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function tE(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Rh=/[#\/\?@]/g,nE=/[#\?:]/g,rE=/[#\?]/g,sE=/[#\?@]/g,iE=/#/g;function zs(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function wr(a){a.g||(a.g=new Map,a.h=0,a.i&&eE(a.i,function(h,d){a.add(decodeURIComponent(h.replace(/\+/g," ")),d)}))}t=zs.prototype,t.add=function(a,h){wr(this),this.i=null,a=Xr(this,a);let d=this.g.get(a);return d||this.g.set(a,d=[]),d.push(h),this.h+=1,this};function bh(a,h){wr(a),h=Xr(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function Sh(a,h){return wr(a),h=Xr(a,h),a.g.has(h)}t.forEach=function(a,h){wr(this),this.g.forEach(function(d,m){d.forEach(function(C){a.call(h,C,m,this)},this)},this)};function Ch(a,h){wr(a);let d=[];if(typeof h=="string")Sh(a,h)&&(d=d.concat(a.g.get(Xr(a,h))));else for(a=Array.from(a.g.values()),h=0;h<a.length;h++)d=d.concat(a[h]);return d}t.set=function(a,h){return wr(this),this.i=null,a=Xr(this,a),Sh(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=Ch(this,a),a.length>0?String(a[0]):h):h};function Ph(a,h,d){bh(a,h),d.length>0&&(a.i=null,a.g.set(Xr(a,h),w(d)),a.h+=d.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(let m=0;m<h.length;m++){var d=h[m];const C=js(d);d=Ch(this,d);for(let D=0;D<d.length;D++){let z=C;d[D]!==""&&(z+="="+js(d[D])),a.push(z)}}return this.i=a.join("&")};function Nh(a){const h=new zs;return h.i=a.i,a.g&&(h.g=new Map(a.g),h.h=a.h),h}function Xr(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function oE(a,h){h&&!a.j&&(wr(a),a.i=null,a.g.forEach(function(d,m){const C=m.toLowerCase();m!=C&&(bh(this,m),Ph(this,C,d))},a)),a.j=h}function aE(a,h){const d=new Bs;if(o.Image){const m=new Image;m.onload=f(Fn,d,"TestLoadImage: loaded",!0,h,m),m.onerror=f(Fn,d,"TestLoadImage: error",!1,h,m),m.onabort=f(Fn,d,"TestLoadImage: abort",!1,h,m),m.ontimeout=f(Fn,d,"TestLoadImage: timeout",!1,h,m),o.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=a}else h(!1)}function cE(a,h){const d=new Bs,m=new AbortController,C=setTimeout(()=>{m.abort(),Fn(d,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:m.signal}).then(D=>{clearTimeout(C),D.ok?Fn(d,"TestPingServer: ok",!0,h):Fn(d,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(C),Fn(d,"TestPingServer: error",!1,h)})}function Fn(a,h,d,m,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),m(d)}catch{}}function lE(){this.g=new ht}function _c(a){this.i=a.Sb||null,this.h=a.ab||!1}p(_c,Ct),_c.prototype.g=function(){return new co(this.i,this.h)};function co(a,h){W.call(this),this.H=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(co,W),t=co.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=h,this.readyState=1,Qs(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const h={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(h.body=a),(this.H||o).fetch(new Request(this.D,h)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ks(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Qs(this)),this.g&&(this.readyState=3,Qs(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Dh(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function Dh(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.B.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?Ks(this):Qs(this),this.readyState==3&&Dh(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,Ks(this))},t.Na=function(a){this.g&&(this.response=a,Ks(this))},t.ga=function(){this.g&&Ks(this)};function Ks(a){a.readyState=4,a.l=null,a.j=null,a.B=null,Qs(a)}t.setRequestHeader=function(a,h){this.A.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var d=h.next();!d.done;)d=d.value,a.push(d[0]+": "+d[1]),d=h.next();return a.join(`\r
`)};function Qs(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(co.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Oh(a){let h="";return xe(a,function(d,m){h+=m,h+=":",h+=d,h+=`\r
`}),h}function yc(a,h,d){e:{for(m in d){var m=!1;break e}m=!0}m||(d=Oh(d),typeof a=="string"?d!=null&&js(d):Le(a,h,d))}function Fe(a){W.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Fe,W);var uE=/^https?$/i,hE=["POST","PUT"];t=Fe.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,h,d,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():dh.g(),this.g.onreadystatechange=g(u(this.Ca,this));try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(D){kh(this,D);return}if(a=d||"",d=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var C in m)d.set(C,m[C]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(const D of m.keys())d.set(D,m.get(D));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(d.keys()).find(D=>D.toLowerCase()=="content-type"),C=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(hE,h,void 0)>=0)||m||C||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[D,z]of d)this.g.setRequestHeader(D,z);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(D){kh(this,D)}};function kh(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.o=5,Vh(a),lo(a)}function Vh(a){a.A||(a.A=!0,H(a,"complete"),H(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,H(this,"complete"),H(this,"abort"),lo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),lo(this,!0)),Fe.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?xh(this):this.Xa())},t.Xa=function(){xh(this)};function xh(a){if(a.h&&typeof i<"u"){if(a.v&&Bn(a)==4)setTimeout(a.Ca.bind(a),0);else if(H(a,"readystatechange"),Bn(a)==4){a.h=!1;try{const D=a.ca();e:switch(D){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var d;if(!(d=h)){var m;if(m=D===0){let z=String(a.D).match(Ah)[1]||null;!z&&o.self&&o.self.location&&(z=o.self.location.protocol.slice(0,-1)),m=!uE.test(z?z.toLowerCase():"")}d=m}if(d)H(a,"complete"),H(a,"success");else{a.o=6;try{var C=Bn(a)>2?a.g.statusText:""}catch{C=""}a.l=C+" ["+a.ca()+"]",Vh(a)}}finally{lo(a)}}}}function lo(a,h){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const d=a.g;a.g=null,h||H(a,"ready");try{d.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Bn(a){return a.g?a.g.readyState:0}t.ca=function(){try{return Bn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),ut(h)}};function Lh(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function fE(a){const h={};a=(a.g&&Bn(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<a.length;m++){if(y(a[m]))continue;var d=Yy(a[m]);const C=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const D=h[C]||[];h[C]=D,D.push(d)}Lt(h,function(m){return m.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ys(a,h,d){return d&&d.internalChannelParams&&d.internalChannelParams[a]||h}function Mh(a){this.za=0,this.i=[],this.j=new Bs,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ys("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ys("baseRetryDelayMs",5e3,a),this.Za=Ys("retryDelaySeedMs",1e4,a),this.Ta=Ys("forwardChannelMaxRetries",2,a),this.va=Ys("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new Eh(a&&a.concurrentRequestLimit),this.Ba=new lE,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Mh.prototype,t.ka=8,t.I=1,t.connect=function(a,h,d,m){Tt(0),this.W=a,this.H=h||{},d&&m!==void 0&&(this.H.OSID=d,this.H.OAID=m),this.F=this.X,this.J=Gh(this,null,this.W),ho(this)};function Ec(a){if(Uh(a),a.I==3){var h=a.V++,d=en(a.J);if(Le(d,"SID",a.M),Le(d,"RID",h),Le(d,"TYPE","terminate"),Js(a,d),h=new Mn(a,a.j,h),h.M=2,h.A=ao(en(d)),d=!1,o.navigator&&o.navigator.sendBeacon)try{d=o.navigator.sendBeacon(h.A.toString(),"")}catch{}!d&&o.Image&&(new Image().src=h.A,d=!0),d||(h.g=zh(h.j,null),h.g.ea(h.A)),h.F=Date.now(),oo(h)}Wh(a)}function uo(a){a.g&&(Ic(a),a.g.cancel(),a.g=null)}function Uh(a){uo(a),a.v&&(o.clearTimeout(a.v),a.v=null),fo(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function ho(a){if(!Th(a.h)&&!a.m){a.m=!0;var h=a.Ea;te||E(),G||(te(),G=!0),T.add(h,a),a.D=0}}function dE(a,h){return Ih(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=h.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=Fs(u(a.Ea,a,h),Hh(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const C=new Mn(this,this.j,a);let D=this.o;if(this.U&&(D?(D=We(D),In(D,this.U)):D=this.U),this.u!==null||this.R||(C.J=D,D=null),this.S)e:{for(var h=0,d=0;d<this.i.length;d++){t:{var m=this.i[d];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(h+=m,h>4096){h=d;break e}if(h===4096||d===this.i.length-1){h=d+1;break e}}h=1e3}else h=1e3;h=Bh(this,C,h),d=en(this.J),Le(d,"RID",a),Le(d,"CVER",22),this.G&&Le(d,"X-HTTP-Session-Id",this.G),Js(this,d),D&&(this.R?h="headers="+js(Oh(D))+"&"+h:this.u&&yc(d,this.u,D)),gc(this.h,C),this.Ra&&Le(d,"TYPE","init"),this.S?(Le(d,"$req",h),Le(d,"SID","null"),C.U=!0,hc(C,d,null)):hc(C,d,h),this.I=2}}else this.I==3&&(a?Fh(this,a):this.i.length==0||Th(this.h)||Fh(this))};function Fh(a,h){var d;h?d=h.l:d=a.V++;const m=en(a.J);Le(m,"SID",a.M),Le(m,"RID",d),Le(m,"AID",a.K),Js(a,m),a.u&&a.o&&yc(m,a.u,a.o),d=new Mn(a,a.j,d,a.D+1),a.u===null&&(d.J=a.o),h&&(a.i=h.G.concat(a.i)),h=Bh(a,d,1e3),d.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),gc(a.h,d),hc(d,m,h)}function Js(a,h){a.H&&xe(a.H,function(d,m){Le(h,m,d)}),a.l&&xe({},function(d,m){Le(h,m,d)})}function Bh(a,h,d){d=Math.min(a.i.length,d);const m=a.l?u(a.l.Ka,a.l,a):null;e:{var C=a.i;let _e=-1;for(;;){const Ye=["count="+d];_e==-1?d>0?(_e=C[0].g,Ye.push("ofs="+_e)):_e=0:Ye.push("ofs="+_e);let De=!0;for(let tt=0;tt<d;tt++){var D=C[tt].g;const tn=C[tt].map;if(D-=_e,D<0)_e=Math.max(0,C[tt].g-100),De=!1;else try{D="req"+D+"_"||"";try{var z=tn instanceof Map?tn:Object.entries(tn);for(const[Rr,jn]of z){let qn=jn;c(jn)&&(qn=Ae(jn)),Ye.push(D+Rr+"="+encodeURIComponent(qn))}}catch(Rr){throw Ye.push(D+"type="+encodeURIComponent("_badmap")),Rr}}catch{m&&m(tn)}}if(De){z=Ye.join("&");break e}}z=void 0}return a=a.i.splice(0,d),h.G=a,z}function jh(a){if(!a.g&&!a.v){a.Y=1;var h=a.Da;te||E(),G||(te(),G=!0),T.add(h,a),a.A=0}}function Tc(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=Fs(u(a.Da,a),Hh(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,qh(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=Fs(u(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Tt(10),uo(this),qh(this))};function Ic(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function qh(a){a.g=new Mn(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var h=en(a.na);Le(h,"RID","rpc"),Le(h,"SID",a.M),Le(h,"AID",a.K),Le(h,"CI",a.F?"0":"1"),!a.F&&a.ia&&Le(h,"TO",a.ia),Le(h,"TYPE","xmlhttp"),Js(a,h),a.u&&a.o&&yc(h,a.u,a.o),a.O&&(a.g.H=a.O);var d=a.g;a=a.ba,d.M=1,d.A=ao(en(h)),d.u=null,d.R=!0,mh(d,a)}t.Va=function(){this.C!=null&&(this.C=null,uo(this),Tc(this),Tt(19))};function fo(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function $h(a,h){var d=null;if(a.g==h){fo(a),Ic(a),a.g=null;var m=2}else if(pc(a.h,h))d=h.G,vh(a.h,h),m=1;else return;if(a.I!=0){if(h.o)if(m==1){d=h.u?h.u.length:0,h=Date.now()-h.F;var C=a.D;m=Ir(),H(m,new hh(m,d)),ho(a)}else jh(a);else if(C=h.m,C==3||C==0&&h.X>0||!(m==1&&dE(a,h)||m==2&&Tc(a)))switch(d&&d.length>0&&(h=a.h,h.i=h.i.concat(d)),C){case 1:Ar(a,5);break;case 4:Ar(a,10);break;case 3:Ar(a,6);break;default:Ar(a,2)}}}function Hh(a,h){let d=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(d*=2),d*h}function Ar(a,h){if(a.j.info("Error code "+h),h==2){var d=u(a.bb,a),m=a.Ua;const C=!m;m=new Un(m||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||$s(m,"https"),ao(m),C?aE(m.toString(),d):cE(m.toString(),d)}else Tt(2);a.I=0,a.l&&a.l.pa(h),Wh(a),Uh(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),Tt(2)):(this.j.info("Failed to ping google.com"),Tt(1))};function Wh(a){if(a.I=0,a.ja=[],a.l){const h=wh(a.h);(h.length!=0||a.i.length!=0)&&(P(a.ja,h),P(a.ja,a.i),a.h.i.length=0,w(a.i),a.i.length=0),a.l.oa()}}function Gh(a,h,d){var m=d instanceof Un?en(d):new Un(d);if(m.g!="")h&&(m.g=h+"."+m.g),Hs(m,m.u);else{var C=o.location;m=C.protocol,h=h?h+"."+C.hostname:C.hostname,C=+C.port;const D=new Un(null);m&&$s(D,m),h&&(D.g=h),C&&Hs(D,C),d&&(D.h=d),m=D}return d=a.G,h=a.wa,d&&h&&Le(m,d,h),Le(m,"VER",a.ka),Js(a,m),m}function zh(a,h,d){if(h&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Aa&&!a.ma?new Fe(new _c({ab:d})):new Fe(a.ma),h.Fa(a.L),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Kh(){}t=Kh.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function po(){}po.prototype.g=function(a,h){return new Nt(a,h)};function Nt(a,h){W.call(this),this.g=new Mh(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.sa&&(a?a["X-WebChannel-Client-Profile"]=h.sa:a={"X-WebChannel-Client-Profile":h.sa}),this.g.U=a,(a=h&&h.Qb)&&!y(a)&&(this.g.u=a),this.A=h&&h.supportsCrossDomainXhr||!1,this.v=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!y(h)&&(this.g.G=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new Zr(this)}p(Nt,W),Nt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Nt.prototype.close=function(){Ec(this.g)},Nt.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var d={};d.__data__=a,a=d}else this.v&&(d={},d.__data__=Ae(a),a=d);h.i.push(new Zy(h.Ya++,a)),h.I==3&&ho(h)},Nt.prototype.N=function(){this.g.l=null,delete this.j,Ec(this.g),delete this.g,Nt.Z.N.call(this)};function Qh(a){Yr.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const d in h){a=d;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}p(Qh,Yr);function Yh(){st.call(this),this.status=1}p(Yh,st);function Zr(a){this.g=a}p(Zr,Kh),Zr.prototype.ra=function(){H(this.g,"a")},Zr.prototype.qa=function(a){H(this.g,new Qh(a))},Zr.prototype.pa=function(a){H(this.g,new Yh)},Zr.prototype.oa=function(){H(this.g,"b")},po.prototype.createWebChannel=po.prototype.g,Nt.prototype.send=Nt.prototype.o,Nt.prototype.open=Nt.prototype.m,Nt.prototype.close=Nt.prototype.close,Wm=function(){return new po},Hm=function(){return Ir()},$m=et,ml={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},io.NO_ERROR=0,io.TIMEOUT=8,io.HTTP_ERROR=6,Wo=io,fh.COMPLETE="complete",qm=fh,Pt.EventType=$t,$t.OPEN="a",$t.CLOSE="b",$t.ERROR="c",$t.MESSAGE="d",W.prototype.listen=W.prototype.J,oi=Pt,Fe.prototype.listenOnce=Fe.prototype.K,Fe.prototype.getLastError=Fe.prototype.Ha,Fe.prototype.getLastErrorCode=Fe.prototype.ya,Fe.prototype.getStatus=Fe.prototype.ca,Fe.prototype.getResponseJson=Fe.prototype.La,Fe.prototype.getResponseText=Fe.prototype.la,Fe.prototype.send=Fe.prototype.ea,Fe.prototype.setWithCredentials=Fe.prototype.Fa,jm=Fe}).apply(typeof Io<"u"?Io:typeof self<"u"?self:typeof window<"u"?window:{});const _d="@firebase/firestore",yd="4.9.2";class dt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}dt.UNAUTHENTICATED=new dt(null),dt.GOOGLE_CREDENTIALS=new dt("google-credentials-uid"),dt.FIRST_PARTY=new dt("first-party-uid"),dt.MOCK_USER=new dt("mock-user");let Os="12.3.0";const Br=new uu("@firebase/firestore");function ns(){return Br.logLevel}function Z(t,...e){if(Br.logLevel<=Te.DEBUG){const n=e.map(Iu);Br.debug(`Firestore (${Os}): ${t}`,...n)}}function Vn(t,...e){if(Br.logLevel<=Te.ERROR){const n=e.map(Iu);Br.error(`Firestore (${Os}): ${t}`,...n)}}function vs(t,...e){if(Br.logLevel<=Te.WARN){const n=e.map(Iu);Br.warn(`Firestore (${Os}): ${t}`,...n)}}function Iu(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function ue(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Gm(t,r,n)}function Gm(t,e,n){let r=`FIRESTORE (${Os}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Vn(r),new Error(r)}function Ce(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||Gm(e,s,r)}function pe(t,e){return t}const x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class J extends Tn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ar{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class zm{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class XR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(dt.UNAUTHENTICATED)))}shutdown(){}}class ZR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class eb{constructor(e){this.t=e,this.currentUser=dt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ce(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new ar;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ar,e.enqueueRetryable((()=>s(this.currentUser)))};const o=()=>{const l=i;e.enqueueRetryable((async()=>{await l.promise,await s(this.currentUser)}))},c=l=>{Z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((l=>c(l))),setTimeout((()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?c(l):(Z("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ar)}}),0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(Z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ce(typeof r.accessToken=="string",31837,{l:r}),new zm(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ce(e===null||typeof e=="string",2055,{h:e}),new dt(e)}}class tb{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=dt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class nb{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new tb(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(dt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Ed{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class rb{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Mt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ce(this.o===void 0,3512);const r=i=>{i.error!=null&&Z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,Z("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>r(i)))};const s=i=>{Z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>s(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):Z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Ed(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Ce(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Ed(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function sb(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class vu{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=sb(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function Ie(t,e){return t<e?-1:t>e?1:0}function _l(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Fc(s)===Fc(i)?Ie(s,i):Fc(s)?1:-1}return Ie(t.length,e.length)}const ib=55296,ob=57343;function Fc(t){const e=t.charCodeAt(0);return e>=ib&&e<=ob}function ws(t,e,n){return t.length===e.length&&t.every(((r,s)=>n(r,e[s])))}const Td="__name__";class sn{constructor(e,n,r){n===void 0?n=0:n>e.length&&ue(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ue(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return sn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof sn?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=sn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return Ie(e.length,n.length)}static compareSegments(e,n){const r=sn.isNumericId(e),s=sn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?sn.extractNumericId(e).compare(sn.extractNumericId(n)):_l(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return or.fromString(e.substring(4,e.length-2))}}class Ve extends sn{construct(e,n,r){return new Ve(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new J(x.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((s=>s.length>0)))}return new Ve(n)}static emptyPath(){return new Ve([])}}const ab=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ot extends sn{construct(e,n,r){return new ot(e,n,r)}static isValidIdentifier(e){return ab.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ot.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Td}static keyField(){return new ot([Td])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new J(x.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new J(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new J(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else c==="`"?(o=!o,s++):c!=="."||o?(r+=c,s++):(i(),s++)}if(i(),o)throw new J(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ot(n)}static emptyPath(){return new ot([])}}class re{constructor(e){this.path=e}static fromPath(e){return new re(Ve.fromString(e))}static fromName(e){return new re(Ve.fromString(e).popFirst(5))}static empty(){return new re(Ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ve.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new re(new Ve(e.slice()))}}function Km(t,e,n){if(!n)throw new J(x.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function cb(t,e,n,r){if(e===!0&&r===!0)throw new J(x.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Id(t){if(!re.isDocumentKey(t))throw new J(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function vd(t){if(re.isDocumentKey(t))throw new J(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Qm(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Ha(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ue(12329,{type:typeof t})}function jr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new J(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ha(t);throw new J(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Ke(t,e){const n={typeString:t};return e&&(n.value=e),n}function Xi(t,e){if(!Qm(t))throw new J(x.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new J(x.INVALID_ARGUMENT,n);return!0}const wd=-62135596800,Ad=1e6;class Me{static now(){return Me.fromMillis(Date.now())}static fromDate(e){return Me.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Ad);return new Me(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new J(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new J(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<wd)throw new J(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new J(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ad}_compareTo(e){return this.seconds===e.seconds?Ie(this.nanoseconds,e.nanoseconds):Ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Me._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Xi(e,Me._jsonSchema))return new Me(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-wd;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Me._jsonSchemaVersion="firestore/timestamp/1.0",Me._jsonSchema={type:Ke("string",Me._jsonSchemaVersion),seconds:Ke("number"),nanoseconds:Ke("number")};class de{static fromTimestamp(e){return new de(e)}static min(){return new de(new Me(0,0))}static max(){return new de(new Me(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Vi=-1;function lb(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=de.fromTimestamp(r===1e9?new Me(n+1,0):new Me(n,r));return new hr(s,re.empty(),e)}function ub(t){return new hr(t.readTime,t.key,Vi)}class hr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new hr(de.min(),re.empty(),Vi)}static max(){return new hr(de.max(),re.empty(),Vi)}}function hb(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=re.comparator(t.documentKey,e.documentKey),n!==0?n:Ie(t.largestBatchId,e.largestBatchId))}const fb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class db{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function ks(t){if(t.code!==x.FAILED_PRECONDITION||t.message!==fb)throw t;Z("LocalStore","Unexpectedly lost primary lease")}class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ue(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new M(((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):M.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):M.reject(n)}static resolve(e){return new M(((n,r)=>{n(e)}))}static reject(e){return new M(((n,r)=>{r(e)}))}static waitFor(e){return new M(((n,r)=>{let s=0,i=0,o=!1;e.forEach((c=>{++s,c.next((()=>{++i,o&&i===s&&n()}),(l=>r(l)))})),o=!0,i===s&&n()}))}static or(e){let n=M.resolve(!1);for(const r of e)n=n.next((s=>s?M.resolve(s):r()));return n}static forEach(e,n){const r=[];return e.forEach(((s,i)=>{r.push(n.call(this,s,i))})),this.waitFor(r)}static mapArray(e,n){return new M(((r,s)=>{const i=e.length,o=new Array(i);let c=0;for(let l=0;l<i;l++){const u=l;n(e[u]).next((f=>{o[u]=f,++c,c===i&&r(o)}),(f=>s(f)))}}))}static doWhile(e,n){return new M(((r,s)=>{const i=()=>{e()===!0?n().next((()=>{i()}),s):r()};i()}))}}function pb(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Vs(t){return t.name==="IndexedDbTransactionError"}class Wa{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Wa.ce=-1;const wu=-1;function Ga(t){return t==null}function pa(t){return t===0&&1/t==-1/0}function gb(t){return typeof t=="number"&&Number.isInteger(t)&&!pa(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const Ym="";function mb(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Rd(e)),e=_b(t.get(n),e);return Rd(e)}function _b(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case Ym:n+="";break;default:n+=i}}return n}function Rd(t){return t+Ym+""}function bd(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Er(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Jm(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class Ue{constructor(e,n){this.comparator=e,this.root=n||it.EMPTY}insert(e,n){return new Ue(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,it.BLACK,null,null))}remove(e){return new Ue(this.comparator,this.root.remove(e,this.comparator).copy(null,null,it.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vo(this.root,e,this.comparator,!1)}getReverseIterator(){return new vo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vo(this.root,e,this.comparator,!0)}}class vo{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class it{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??it.RED,this.left=s??it.EMPTY,this.right=i??it.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new it(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return it.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return it.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,it.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,it.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ue(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ue(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ue(27949);return e+(this.isRed()?0:1)}}it.EMPTY=null,it.RED=!0,it.BLACK=!1;it.EMPTY=new class{constructor(){this.size=0}get key(){throw ue(57766)}get value(){throw ue(16141)}get color(){throw ue(16727)}get left(){throw ue(29726)}get right(){throw ue(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new it(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ze{constructor(e){this.comparator=e,this.data=new Ue(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Sd(this.data.getIterator())}getIteratorFrom(e){return new Sd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Ze)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Ze(this.comparator);return n.data=e,n}}class Sd{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Vt{constructor(e){this.fields=e,e.sort(ot.comparator)}static empty(){return new Vt([])}unionWith(e){let n=new Ze(ot.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Vt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ws(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}class Xm extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ct{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Xm("Invalid base64 string: "+i):i}})(e);return new ct(n)}static fromUint8Array(e){const n=(function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i})(e);return new ct(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ct.EMPTY_BYTE_STRING=new ct("");const yb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fr(t){if(Ce(!!t,39018),typeof t=="string"){let e=0;const n=yb.exec(t);if(Ce(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:$e(t.seconds),nanos:$e(t.nanos)}}function $e(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function dr(t){return typeof t=="string"?ct.fromBase64String(t):ct.fromUint8Array(t)}const Zm="server_timestamp",e_="__type__",t_="__previous_value__",n_="__local_write_time__";function Au(t){return(t?.mapValue?.fields||{})[e_]?.stringValue===Zm}function za(t){const e=t.mapValue.fields[t_];return Au(e)?za(e):e}function xi(t){const e=fr(t.mapValue.fields[n_].timestampValue);return new Me(e.seconds,e.nanos)}class Eb{constructor(e,n,r,s,i,o,c,l,u,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=f}}const ga="(default)";class Li{constructor(e,n){this.projectId=e,this.database=n||ga}static empty(){return new Li("","")}get isDefaultDatabase(){return this.database===ga}isEqual(e){return e instanceof Li&&e.projectId===this.projectId&&e.database===this.database}}const r_="__type__",Tb="__max__",wo={mapValue:{}},s_="__vector__",ma="value";function pr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Au(t)?4:vb(t)?9007199254740991:Ib(t)?10:11:ue(28295,{value:t})}function En(t,e){if(t===e)return!0;const n=pr(t);if(n!==pr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return xi(t).isEqual(xi(e));case 3:return(function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=fr(s.timestampValue),c=fr(i.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,i){return dr(s.bytesValue).isEqual(dr(i.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,i){return $e(s.geoPointValue.latitude)===$e(i.geoPointValue.latitude)&&$e(s.geoPointValue.longitude)===$e(i.geoPointValue.longitude)})(t,e);case 2:return(function(s,i){if("integerValue"in s&&"integerValue"in i)return $e(s.integerValue)===$e(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=$e(s.doubleValue),c=$e(i.doubleValue);return o===c?pa(o)===pa(c):isNaN(o)&&isNaN(c)}return!1})(t,e);case 9:return ws(t.arrayValue.values||[],e.arrayValue.values||[],En);case 10:case 11:return(function(s,i){const o=s.mapValue.fields||{},c=i.mapValue.fields||{};if(bd(o)!==bd(c))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(c[l]===void 0||!En(o[l],c[l])))return!1;return!0})(t,e);default:return ue(52216,{left:t})}}function Mi(t,e){return(t.values||[]).find((n=>En(n,e)))!==void 0}function As(t,e){if(t===e)return 0;const n=pr(t),r=pr(e);if(n!==r)return Ie(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ie(t.booleanValue,e.booleanValue);case 2:return(function(i,o){const c=$e(i.integerValue||i.doubleValue),l=$e(o.integerValue||o.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1})(t,e);case 3:return Cd(t.timestampValue,e.timestampValue);case 4:return Cd(xi(t),xi(e));case 5:return _l(t.stringValue,e.stringValue);case 6:return(function(i,o){const c=dr(i),l=dr(o);return c.compareTo(l)})(t.bytesValue,e.bytesValue);case 7:return(function(i,o){const c=i.split("/"),l=o.split("/");for(let u=0;u<c.length&&u<l.length;u++){const f=Ie(c[u],l[u]);if(f!==0)return f}return Ie(c.length,l.length)})(t.referenceValue,e.referenceValue);case 8:return(function(i,o){const c=Ie($e(i.latitude),$e(o.latitude));return c!==0?c:Ie($e(i.longitude),$e(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return Pd(t.arrayValue,e.arrayValue);case 10:return(function(i,o){const c=i.fields||{},l=o.fields||{},u=c[ma]?.arrayValue,f=l[ma]?.arrayValue,p=Ie(u?.values?.length||0,f?.values?.length||0);return p!==0?p:Pd(u,f)})(t.mapValue,e.mapValue);case 11:return(function(i,o){if(i===wo.mapValue&&o===wo.mapValue)return 0;if(i===wo.mapValue)return 1;if(o===wo.mapValue)return-1;const c=i.fields||{},l=Object.keys(c),u=o.fields||{},f=Object.keys(u);l.sort(),f.sort();for(let p=0;p<l.length&&p<f.length;++p){const g=_l(l[p],f[p]);if(g!==0)return g;const w=As(c[l[p]],u[f[p]]);if(w!==0)return w}return Ie(l.length,f.length)})(t.mapValue,e.mapValue);default:throw ue(23264,{he:n})}}function Cd(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ie(t,e);const n=fr(t),r=fr(e),s=Ie(n.seconds,r.seconds);return s!==0?s:Ie(n.nanos,r.nanos)}function Pd(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=As(n[s],r[s]);if(i)return i}return Ie(n.length,r.length)}function Rs(t){return yl(t)}function yl(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=fr(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return dr(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return re.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=yl(i);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${yl(n.fields[o])}`;return s+"}"})(t.mapValue):ue(61005,{value:t})}function Go(t){switch(pr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=za(t);return e?16+Go(e):16;case 5:return 2*t.stringValue.length;case 6:return dr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,i)=>s+Go(i)),0)})(t.arrayValue);case 10:case 11:return(function(r){let s=0;return Er(r.fields,((i,o)=>{s+=i.length+Go(o)})),s})(t.mapValue);default:throw ue(13486,{value:t})}}function Nd(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function El(t){return!!t&&"integerValue"in t}function Ru(t){return!!t&&"arrayValue"in t}function Dd(t){return!!t&&"nullValue"in t}function Od(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function zo(t){return!!t&&"mapValue"in t}function Ib(t){return(t?.mapValue?.fields||{})[r_]?.stringValue===s_}function Ei(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Er(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Ei(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ei(t.arrayValue.values[n]);return e}return{...t}}function vb(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Tb}class St{constructor(e){this.value=e}static empty(){return new St({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!zo(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ei(n)}setAll(e){let n=ot.emptyPath(),r={},s=[];e.forEach(((o,c)=>{if(!n.isImmediateParentOf(c)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=c.popLast()}o?r[c.lastSegment()]=Ei(o):s.push(c.lastSegment())}));const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());zo(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return En(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];zo(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Er(n,((s,i)=>e[s]=i));for(const s of r)delete e[s]}clone(){return new St(Ei(this.value))}}function i_(t){const e=[];return Er(t.fields,((n,r)=>{const s=new ot([n]);if(zo(r)){const i=i_(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)})),new Vt(e)}class gt{constructor(e,n,r,s,i,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=c}static newInvalidDocument(e){return new gt(e,0,de.min(),de.min(),de.min(),St.empty(),0)}static newFoundDocument(e,n,r,s){return new gt(e,1,n,de.min(),r,s,0)}static newNoDocument(e,n){return new gt(e,2,n,de.min(),de.min(),St.empty(),0)}static newUnknownDocument(e,n){return new gt(e,3,n,de.min(),de.min(),St.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(de.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=St.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=St.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=de.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof gt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new gt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class _a{constructor(e,n){this.position=e,this.inclusive=n}}function kd(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=re.comparator(re.fromName(o.referenceValue),n.key):r=As(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Vd(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!En(t.position[n],e.position[n]))return!1;return!0}class Ui{constructor(e,n="asc"){this.field=e,this.dir=n}}function wb(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class o_{}class ze extends o_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Rb(e,n,r):n==="array-contains"?new Cb(e,r):n==="in"?new Pb(e,r):n==="not-in"?new Nb(e,r):n==="array-contains-any"?new Db(e,r):new ze(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new bb(e,r):new Sb(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(As(n,this.value)):n!==null&&pr(this.value)===pr(n)&&this.matchesComparison(As(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ue(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Xt extends o_{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Xt(e,n)}matches(e){return a_(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function a_(t){return t.op==="and"}function c_(t){return Ab(t)&&a_(t)}function Ab(t){for(const e of t.filters)if(e instanceof Xt)return!1;return!0}function Tl(t){if(t instanceof ze)return t.field.canonicalString()+t.op.toString()+Rs(t.value);if(c_(t))return t.filters.map((e=>Tl(e))).join(",");{const e=t.filters.map((n=>Tl(n))).join(",");return`${t.op}(${e})`}}function l_(t,e){return t instanceof ze?(function(r,s){return s instanceof ze&&r.op===s.op&&r.field.isEqual(s.field)&&En(r.value,s.value)})(t,e):t instanceof Xt?(function(r,s){return s instanceof Xt&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((i,o,c)=>i&&l_(o,s.filters[c])),!0):!1})(t,e):void ue(19439)}function u_(t){return t instanceof ze?(function(n){return`${n.field.canonicalString()} ${n.op} ${Rs(n.value)}`})(t):t instanceof Xt?(function(n){return n.op.toString()+" {"+n.getFilters().map(u_).join(" ,")+"}"})(t):"Filter"}class Rb extends ze{constructor(e,n,r){super(e,n,r),this.key=re.fromName(r.referenceValue)}matches(e){const n=re.comparator(e.key,this.key);return this.matchesComparison(n)}}class bb extends ze{constructor(e,n){super(e,"in",n),this.keys=h_("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class Sb extends ze{constructor(e,n){super(e,"not-in",n),this.keys=h_("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function h_(t,e){return(e.arrayValue?.values||[]).map((n=>re.fromName(n.referenceValue)))}class Cb extends ze{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ru(n)&&Mi(n.arrayValue,this.value)}}class Pb extends ze{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Mi(this.value.arrayValue,n)}}class Nb extends ze{constructor(e,n){super(e,"not-in",n)}matches(e){if(Mi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Mi(this.value.arrayValue,n)}}class Db extends ze{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ru(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Mi(this.value.arrayValue,r)))}}class Ob{constructor(e,n=null,r=[],s=[],i=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=c,this.Te=null}}function xd(t,e=null,n=[],r=[],s=null,i=null,o=null){return new Ob(t,e,n,r,s,i,o)}function bu(t){const e=pe(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>Tl(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(i){return i.field.canonicalString()+i.dir})(r))).join(","),Ga(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>Rs(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>Rs(r))).join(",")),e.Te=n}return e.Te}function Su(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!wb(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!l_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Vd(t.startAt,e.startAt)&&Vd(t.endAt,e.endAt)}function Il(t){return re.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class xs{constructor(e,n=null,r=[],s=[],i=null,o="F",c=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=c,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function kb(t,e,n,r,s,i,o,c){return new xs(t,e,n,r,s,i,o,c)}function f_(t){return new xs(t)}function Ld(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function d_(t){return t.collectionGroup!==null}function Ti(t){const e=pe(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Ze(ot.comparator);return o.filters.forEach((l=>{l.getFlattenedFilters().forEach((u=>{u.isInequality()&&(c=c.add(u.field))}))})),c})(e).forEach((i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Ui(i,r))})),n.has(ot.keyField().canonicalString())||e.Ie.push(new Ui(ot.keyField(),r))}return e.Ie}function dn(t){const e=pe(t);return e.Ee||(e.Ee=Vb(e,Ti(t))),e.Ee}function Vb(t,e){if(t.limitType==="F")return xd(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const i=s.dir==="desc"?"asc":"desc";return new Ui(s.field,i)}));const n=t.endAt?new _a(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new _a(t.startAt.position,t.startAt.inclusive):null;return xd(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function vl(t,e){const n=t.filters.concat([e]);return new xs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function wl(t,e,n){return new xs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ka(t,e){return Su(dn(t),dn(e))&&t.limitType===e.limitType}function p_(t){return`${bu(dn(t))}|lt:${t.limitType}`}function rs(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((s=>u_(s))).join(", ")}]`),Ga(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((s=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(s))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((s=>Rs(s))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((s=>Rs(s))).join(",")),`Target(${r})`})(dn(t))}; limitType=${t.limitType})`}function Qa(t,e){return e.isFoundDocument()&&(function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):re.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)})(t,e)&&(function(r,s){for(const i of Ti(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0})(t,e)&&(function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0})(t,e)&&(function(r,s){return!(r.startAt&&!(function(o,c,l){const u=kd(o,c,l);return o.inclusive?u<=0:u<0})(r.startAt,Ti(r),s)||r.endAt&&!(function(o,c,l){const u=kd(o,c,l);return o.inclusive?u>=0:u>0})(r.endAt,Ti(r),s))})(t,e)}function xb(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function g_(t){return(e,n)=>{let r=!1;for(const s of Ti(t)){const i=Lb(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function Lb(t,e,n){const r=t.field.isKeyField()?re.comparator(e.key,n.key):(function(i,o,c){const l=o.data.field(i),u=c.data.field(i);return l!==null&&u!==null?As(l,u):ue(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ue(19790,{direction:t.dir})}}class zr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Er(this.inner,((n,r)=>{for(const[s,i]of r)e(s,i)}))}isEmpty(){return Jm(this.inner)}size(){return this.innerSize}}const Mb=new Ue(re.comparator);function xn(){return Mb}const m_=new Ue(re.comparator);function ai(...t){let e=m_;for(const n of t)e=e.insert(n.key,n);return e}function __(t){let e=m_;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function Dr(){return Ii()}function y_(){return Ii()}function Ii(){return new zr((t=>t.toString()),((t,e)=>t.isEqual(e)))}const Ub=new Ue(re.comparator),Fb=new Ze(re.comparator);function ve(...t){let e=Fb;for(const n of t)e=e.add(n);return e}const Bb=new Ze(Ie);function jb(){return Bb}function Cu(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pa(e)?"-0":e}}function E_(t){return{integerValue:""+t}}function qb(t,e){return gb(e)?E_(e):Cu(t,e)}class Ya{constructor(){this._=void 0}}function $b(t,e,n){return t instanceof ya?(function(s,i){const o={fields:{[e_]:{stringValue:Zm},[n_]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Au(i)&&(i=za(i)),i&&(o.fields[t_]=i),{mapValue:o}})(n,e):t instanceof Fi?I_(t,e):t instanceof Bi?v_(t,e):(function(s,i){const o=T_(s,i),c=Md(o)+Md(s.Ae);return El(o)&&El(s.Ae)?E_(c):Cu(s.serializer,c)})(t,e)}function Hb(t,e,n){return t instanceof Fi?I_(t,e):t instanceof Bi?v_(t,e):n}function T_(t,e){return t instanceof Ea?(function(r){return El(r)||(function(i){return!!i&&"doubleValue"in i})(r)})(e)?e:{integerValue:0}:null}class ya extends Ya{}class Fi extends Ya{constructor(e){super(),this.elements=e}}function I_(t,e){const n=w_(e);for(const r of t.elements)n.some((s=>En(s,r)))||n.push(r);return{arrayValue:{values:n}}}class Bi extends Ya{constructor(e){super(),this.elements=e}}function v_(t,e){let n=w_(e);for(const r of t.elements)n=n.filter((s=>!En(s,r)));return{arrayValue:{values:n}}}class Ea extends Ya{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Md(t){return $e(t.integerValue||t.doubleValue)}function w_(t){return Ru(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Wb(t,e){return t.field.isEqual(e.field)&&(function(r,s){return r instanceof Fi&&s instanceof Fi||r instanceof Bi&&s instanceof Bi?ws(r.elements,s.elements,En):r instanceof Ea&&s instanceof Ea?En(r.Ae,s.Ae):r instanceof ya&&s instanceof ya})(t.transform,e.transform)}class Gb{constructor(e,n){this.version=e,this.transformResults=n}}class Qt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Qt}static exists(e){return new Qt(void 0,e)}static updateTime(e){return new Qt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ko(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ja{}function A_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Pu(t.key,Qt.none()):new Zi(t.key,t.data,Qt.none());{const n=t.data,r=St.empty();let s=new Ze(ot.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Tr(t.key,r,new Vt(s.toArray()),Qt.none())}}function zb(t,e,n){t instanceof Zi?(function(s,i,o){const c=s.value.clone(),l=Fd(s.fieldTransforms,i,o.transformResults);c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(t,e,n):t instanceof Tr?(function(s,i,o){if(!Ko(s.precondition,i))return void i.convertToUnknownDocument(o.version);const c=Fd(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(R_(s)),l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()})(t,e,n):(function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,n)}function vi(t,e,n,r){return t instanceof Zi?(function(i,o,c,l){if(!Ko(i.precondition,o))return c;const u=i.value.clone(),f=Bd(i.fieldTransforms,l,o);return u.setAll(f),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null})(t,e,n,r):t instanceof Tr?(function(i,o,c,l){if(!Ko(i.precondition,o))return c;const u=Bd(i.fieldTransforms,l,o),f=o.data;return f.setAll(R_(i)),f.setAll(u),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((p=>p.field)))})(t,e,n,r):(function(i,o,c){return Ko(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c})(t,e,n)}function Kb(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=T_(r.transform,s||null);i!=null&&(n===null&&(n=St.empty()),n.set(r.field,i))}return n||null}function Ud(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ws(r,s,((i,o)=>Wb(i,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Zi extends Ja{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Tr extends Ja{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function R_(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function Fd(t,e,n){const r=new Map;Ce(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,c=e.data.field(i.field);r.set(i.field,Hb(o,c,n[s]))}return r}function Bd(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,$b(i,o,e))}return r}class Pu extends Ja{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Qb extends Ja{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Yb{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&zb(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=vi(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=vi(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=y_();return this.mutations.forEach((s=>{const i=e.get(s.key),o=i.overlayedDocument;let c=this.applyToLocalView(o,i.mutatedFields);c=n.has(s.key)?null:c;const l=A_(o,c);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(de.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),ve())}isEqual(e){return this.batchId===e.batchId&&ws(this.mutations,e.mutations,((n,r)=>Ud(n,r)))&&ws(this.baseMutations,e.baseMutations,((n,r)=>Ud(n,r)))}}class Nu{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ce(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return Ub})();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Nu(e,n,r,s)}}class Jb{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class Xb{constructor(e,n){this.count=e,this.unchangedNames=n}}var Ge,we;function Zb(t){switch(t){case x.OK:return ue(64938);case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0;default:return ue(15467,{code:t})}}function b_(t){if(t===void 0)return Vn("GRPC error has no .code"),x.UNKNOWN;switch(t){case Ge.OK:return x.OK;case Ge.CANCELLED:return x.CANCELLED;case Ge.UNKNOWN:return x.UNKNOWN;case Ge.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case Ge.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case Ge.INTERNAL:return x.INTERNAL;case Ge.UNAVAILABLE:return x.UNAVAILABLE;case Ge.UNAUTHENTICATED:return x.UNAUTHENTICATED;case Ge.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case Ge.NOT_FOUND:return x.NOT_FOUND;case Ge.ALREADY_EXISTS:return x.ALREADY_EXISTS;case Ge.PERMISSION_DENIED:return x.PERMISSION_DENIED;case Ge.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case Ge.ABORTED:return x.ABORTED;case Ge.OUT_OF_RANGE:return x.OUT_OF_RANGE;case Ge.UNIMPLEMENTED:return x.UNIMPLEMENTED;case Ge.DATA_LOSS:return x.DATA_LOSS;default:return ue(39323,{code:t})}}(we=Ge||(Ge={}))[we.OK=0]="OK",we[we.CANCELLED=1]="CANCELLED",we[we.UNKNOWN=2]="UNKNOWN",we[we.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",we[we.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",we[we.NOT_FOUND=5]="NOT_FOUND",we[we.ALREADY_EXISTS=6]="ALREADY_EXISTS",we[we.PERMISSION_DENIED=7]="PERMISSION_DENIED",we[we.UNAUTHENTICATED=16]="UNAUTHENTICATED",we[we.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",we[we.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",we[we.ABORTED=10]="ABORTED",we[we.OUT_OF_RANGE=11]="OUT_OF_RANGE",we[we.UNIMPLEMENTED=12]="UNIMPLEMENTED",we[we.INTERNAL=13]="INTERNAL",we[we.UNAVAILABLE=14]="UNAVAILABLE",we[we.DATA_LOSS=15]="DATA_LOSS";function eS(){return new TextEncoder}const tS=new or([4294967295,4294967295],0);function jd(t){const e=eS().encode(t),n=new Bm;return n.update(e),new Uint8Array(n.digest())}function qd(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new or([n,r],0),new or([s,i],0)]}class Du{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ci(`Invalid padding: ${n}`);if(r<0)throw new ci(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ci(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ci(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=or.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(or.fromNumber(r)));return s.compare(tS)===1&&(s=new or([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=jd(e),[r,s]=qd(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Du(i,s,n);return r.forEach((c=>o.insert(c))),o}insert(e){if(this.ge===0)return;const n=jd(e),[r,s]=qd(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ci extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Xa{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,eo.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Xa(de.min(),s,new Ue(Ie),xn(),ve())}}class eo{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new eo(r,n,ve(),ve(),ve())}}class Qo{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class S_{constructor(e,n){this.targetId=e,this.Ce=n}}class C_{constructor(e,n,r=ct.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class $d{constructor(){this.ve=0,this.Fe=Hd(),this.Me=ct.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ve(),n=ve(),r=ve();return this.Fe.forEach(((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ue(38017,{changeType:i})}})),new eo(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Hd()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ce(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class nS{constructor(e){this.Ge=e,this.ze=new Map,this.je=xn(),this.Je=Ao(),this.He=Ao(),this.Ye=new Ue(Ie)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ue(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,s)=>{this.rt(s)&&n(s)}))}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(Il(i))if(r===0){const o=new re(i.path);this.et(n,o,gt.newNoDocument(o,de.min()))}else Ce(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const c=this.ut(e),l=c?this.ct(c,e,o):1;if(l!==0){this.it(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,c;try{o=dr(r).toUint8Array()}catch(l){if(l instanceof Xm)return vs("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new Du(o,s,i)}catch(l){return vs(l instanceof ci?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.ge===0?null:c}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach((i=>{const o=this.Ge.ht(),c=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.et(n,i,null),s++)})),s}Tt(e){const n=new Map;this.ze.forEach(((i,o)=>{const c=this.ot(o);if(c){if(i.current&&Il(c.target)){const l=new re(c.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,gt.newNoDocument(l,e))}i.Be&&(n.set(o,i.ke()),i.qe())}}));let r=ve();this.He.forEach(((i,o)=>{let c=!0;o.forEachWhile((l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(r=r.add(i))})),this.je.forEach(((i,o)=>o.setReadTime(e)));const s=new Xa(e,n,this.Ye,this.je,r);return this.je=xn(),this.Je=Ao(),this.He=Ao(),this.Ye=new Ue(Ie),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new $d,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ze(Ie),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ze(Ie),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Z("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new $d),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Ao(){return new Ue(re.comparator)}function Hd(){return new Ue(re.comparator)}const rS={asc:"ASCENDING",desc:"DESCENDING"},sS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},iS={and:"AND",or:"OR"};class oS{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Al(t,e){return t.useProto3Json||Ga(e)?e:{value:e}}function Ta(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function P_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function aS(t,e){return Ta(t,e.toTimestamp())}function pn(t){return Ce(!!t,49232),de.fromTimestamp((function(n){const r=fr(n);return new Me(r.seconds,r.nanos)})(t))}function Ou(t,e){return Rl(t,e).canonicalString()}function Rl(t,e){const n=(function(s){return new Ve(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?n:n.child(e)}function N_(t){const e=Ve.fromString(t);return Ce(x_(e),10190,{key:e.toString()}),e}function bl(t,e){return Ou(t.databaseId,e.path)}function Bc(t,e){const n=N_(e);if(n.get(1)!==t.databaseId.projectId)throw new J(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new J(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new re(O_(n))}function D_(t,e){return Ou(t.databaseId,e)}function cS(t){const e=N_(t);return e.length===4?Ve.emptyPath():O_(e)}function Sl(t){return new Ve(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function O_(t){return Ce(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Wd(t,e,n){return{name:bl(t,e),fields:n.value.mapValue.fields}}function lS(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ue(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=(function(u,f){return u.useProto3Json?(Ce(f===void 0||typeof f=="string",58123),ct.fromBase64String(f||"")):(Ce(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),ct.fromUint8Array(f||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&(function(u){const f=u.code===void 0?x.UNKNOWN:b_(u.code);return new J(f,u.message||"")})(o);n=new C_(r,s,i,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Bc(t,r.document.name),i=pn(r.document.updateTime),o=r.document.createTime?pn(r.document.createTime):de.min(),c=new St({mapValue:{fields:r.document.fields}}),l=gt.newFoundDocument(s,i,o,c),u=r.targetIds||[],f=r.removedTargetIds||[];n=new Qo(u,f,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Bc(t,r.document),i=r.readTime?pn(r.readTime):de.min(),o=gt.newNoDocument(s,i),c=r.removedTargetIds||[];n=new Qo([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Bc(t,r.document),i=r.removedTargetIds||[];n=new Qo([],i,s,null)}else{if(!("filter"in e))return ue(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new Xb(s,i),c=r.targetId;n=new S_(c,o)}}return n}function uS(t,e){let n;if(e instanceof Zi)n={update:Wd(t,e.key,e.value)};else if(e instanceof Pu)n={delete:bl(t,e.key)};else if(e instanceof Tr)n={update:Wd(t,e.key,e.data),updateMask:ES(e.fieldMask)};else{if(!(e instanceof Qb))return ue(16599,{Vt:e.type});n={verify:bl(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(i,o){const c=o.transform;if(c instanceof ya)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Fi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Bi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Ea)return{fieldPath:o.field.canonicalString(),increment:c.Ae};throw ue(20930,{transform:o.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(s,i){return i.updateTime!==void 0?{updateTime:aS(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ue(27497)})(t,e.precondition)),n}function hS(t,e){return t&&t.length>0?(Ce(e!==void 0,14353),t.map((n=>(function(s,i){let o=s.updateTime?pn(s.updateTime):pn(i);return o.isEqual(de.min())&&(o=pn(i)),new Gb(o,s.transformResults||[])})(n,e)))):[]}function fS(t,e){return{documents:[D_(t,e.path)]}}function dS(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=D_(t,s);const i=(function(u){if(u.length!==0)return V_(Xt.create(u,"and"))})(e.filters);i&&(n.structuredQuery.where=i);const o=(function(u){if(u.length!==0)return u.map((f=>(function(g){return{field:ss(g.field),direction:mS(g.dir)}})(f)))})(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=Al(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{ft:n,parent:s}}function pS(t){let e=cS(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ce(r===1,65062);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=(function(p){const g=k_(p);return g instanceof Xt&&c_(g)?g.getFilters():[g]})(n.where));let o=[];n.orderBy&&(o=(function(p){return p.map((g=>(function(P){return new Ui(is(P.field),(function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(P.direction))})(g)))})(n.orderBy));let c=null;n.limit&&(c=(function(p){let g;return g=typeof p=="object"?p.value:p,Ga(g)?null:g})(n.limit));let l=null;n.startAt&&(l=(function(p){const g=!!p.before,w=p.values||[];return new _a(w,g)})(n.startAt));let u=null;return n.endAt&&(u=(function(p){const g=!p.before,w=p.values||[];return new _a(w,g)})(n.endAt)),kb(e,s,o,i,c,"F",l,u)}function gS(t,e){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ue(28987,{purpose:s})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function k_(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=is(n.unaryFilter.field);return ze.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=is(n.unaryFilter.field);return ze.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=is(n.unaryFilter.field);return ze.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=is(n.unaryFilter.field);return ze.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ue(61313);default:return ue(60726)}})(t):t.fieldFilter!==void 0?(function(n){return ze.create(is(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ue(58110);default:return ue(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Xt.create(n.compositeFilter.filters.map((r=>k_(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ue(1026)}})(n.compositeFilter.op))})(t):ue(30097,{filter:t})}function mS(t){return rS[t]}function _S(t){return sS[t]}function yS(t){return iS[t]}function ss(t){return{fieldPath:t.canonicalString()}}function is(t){return ot.fromServerFormat(t.fieldPath)}function V_(t){return t instanceof ze?(function(n){if(n.op==="=="){if(Od(n.value))return{unaryFilter:{field:ss(n.field),op:"IS_NAN"}};if(Dd(n.value))return{unaryFilter:{field:ss(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Od(n.value))return{unaryFilter:{field:ss(n.field),op:"IS_NOT_NAN"}};if(Dd(n.value))return{unaryFilter:{field:ss(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ss(n.field),op:_S(n.op),value:n.value}}})(t):t instanceof Xt?(function(n){const r=n.getFilters().map((s=>V_(s)));return r.length===1?r[0]:{compositeFilter:{op:yS(n.op),filters:r}}})(t):ue(54877,{filter:t})}function ES(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function x_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}class er{constructor(e,n,r,s,i=de.min(),o=de.min(),c=ct.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(e){return new er(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new er(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new er(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new er(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class TS{constructor(e){this.yt=e}}function IS(t){const e=pS({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?wl(e,e.limit,"L"):e}class vS{constructor(){this.Cn=new wS}addToCollectionParentIndex(e,n){return this.Cn.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(hr.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(hr.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}}class wS{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ze(Ve.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ze(Ve.comparator)).toArray()}}const Gd={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},L_=41943040;class bt{static withCacheSize(e){return new bt(e,bt.DEFAULT_COLLECTION_PERCENTILE,bt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}bt.DEFAULT_COLLECTION_PERCENTILE=10,bt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bt.DEFAULT=new bt(L_,bt.DEFAULT_COLLECTION_PERCENTILE,bt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bt.DISABLED=new bt(-1,0,0);class bs{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new bs(0)}static cr(){return new bs(-1)}}const zd="LruGarbageCollector",AS=1048576;function Kd([t,e],[n,r]){const s=Ie(t,n);return s===0?Ie(e,r):s}class RS{constructor(e){this.Ir=e,this.buffer=new Ze(Kd),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Kd(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class bS{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Z(zd,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Vs(n)?Z(zd,"Ignoring IndexedDB error during garbage collection: ",n):await ks(n)}await this.Vr(3e5)}))}}class SS{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return M.resolve(Wa.ce);const r=new RS(n);return this.mr.forEachTarget(e,(s=>r.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>r.Ar(s))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Z("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(Gd)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Z("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Gd):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,c,l,u;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((p=>(p>this.params.maximumSequenceNumbersToCollect?(Z("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,o=Date.now(),this.nthSequenceNumber(e,s)))).next((p=>(r=p,c=Date.now(),this.removeTargets(e,r,n)))).next((p=>(i=p,l=Date.now(),this.removeOrphanedDocuments(e,r)))).next((p=>(u=Date.now(),ns()<=Te.DEBUG&&Z("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${s} in `+(c-o)+`ms
	Removed ${i} targets in `+(l-c)+`ms
	Removed ${p} documents in `+(u-l)+`ms
Total Duration: ${u-f}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p}))))}}function CS(t,e){return new SS(t,e)}class PS{constructor(){this.changes=new zr((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,gt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class NS{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class DS{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(r!==null&&vi(r.mutation,s,Vt.empty(),Me.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,ve()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=ve()){const s=Dr();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,r).next((i=>{let o=ai();return i.forEach(((c,l)=>{o=o.insert(c,l.overlayedDocument)})),o}))))}getOverlayedDocuments(e,n){const r=Dr();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,ve())))}populateOverlays(e,n,r){const s=[];return r.forEach((i=>{n.has(i)||s.push(i)})),this.documentOverlayCache.getOverlays(e,s).next((i=>{i.forEach(((o,c)=>{n.set(o,c)}))}))}computeViews(e,n,r,s){let i=xn();const o=Ii(),c=(function(){return Ii()})();return n.forEach(((l,u)=>{const f=r.get(u.key);s.has(u.key)&&(f===void 0||f.mutation instanceof Tr)?i=i.insert(u.key,u):f!==void 0?(o.set(u.key,f.mutation.getFieldMask()),vi(f.mutation,u,f.mutation.getFieldMask(),Me.now())):o.set(u.key,Vt.empty())})),this.recalculateAndSaveOverlays(e,i).next((l=>(l.forEach(((u,f)=>o.set(u,f))),n.forEach(((u,f)=>c.set(u,new NS(f,o.get(u)??null)))),c)))}recalculateAndSaveOverlays(e,n){const r=Ii();let s=new Ue(((o,c)=>o-c)),i=ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((o=>{for(const c of o)c.keys().forEach((l=>{const u=n.get(l);if(u===null)return;let f=r.get(l)||Vt.empty();f=c.applyToLocalView(u,f),r.set(l,f);const p=(s.get(c.batchId)||ve()).add(l);s=s.insert(c.batchId,p)}))})).next((()=>{const o=[],c=s.getReverseIterator();for(;c.hasNext();){const l=c.getNext(),u=l.key,f=l.value,p=y_();f.forEach((g=>{if(!i.has(g)){const w=A_(n.get(g),r.get(g));w!==null&&p.set(g,w),i=i.add(g)}})),o.push(this.documentOverlayCache.saveOverlays(e,u,p))}return M.waitFor(o)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,s){return(function(o){return re.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):d_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next((i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):M.resolve(Dr());let c=Vi,l=i;return o.next((u=>M.forEach(u,((f,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),i.get(f)?M.resolve():this.remoteDocumentCache.getEntry(e,f).next((g=>{l=l.insert(f,g)}))))).next((()=>this.populateOverlays(e,u,i))).next((()=>this.computeViews(e,l,u,ve()))).next((f=>({batchId:c,changes:__(f)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new re(n)).next((r=>{let s=ai();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=ai();return this.indexManager.getCollectionParents(e,i).next((c=>M.forEach(c,(l=>{const u=(function(p,g){return new xs(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next((f=>{f.forEach(((p,g)=>{o=o.insert(p,g)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s)))).next((o=>{i.forEach(((l,u)=>{const f=u.getKey();o.get(f)===null&&(o=o.insert(f,gt.newInvalidDocument(f)))}));let c=ai();return o.forEach(((l,u)=>{const f=i.get(l);f!==void 0&&vi(f.mutation,u,Vt.empty(),Me.now()),Qa(n,u)&&(c=c.insert(l,u))})),c}))}}class OS{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return M.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:pn(s.createTime)}})(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(s){return{name:s.name,query:IS(s.bundledQuery),readTime:pn(s.readTime)}})(n)),M.resolve()}}class kS{constructor(){this.overlays=new Ue(re.comparator),this.qr=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Dr();return M.forEach(n,(s=>this.getOverlay(e,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((s,i)=>{this.St(e,n,i)})),M.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach((i=>this.overlays=this.overlays.remove(i))),this.qr.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){const s=Dr(),i=n.length+1,o=new re(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const l=c.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return M.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ue(((u,f)=>u-f));const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let f=i.get(u.largestBatchId);f===null&&(f=Dr(),i=i.insert(u.largestBatchId,f)),f.set(u.getKey(),u)}}const c=Dr(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((u,f)=>c.set(u,f))),!(c.size()>=s)););return M.resolve(c)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Jb(n,r));let i=this.qr.get(n);i===void 0&&(i=ve(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}class VS{constructor(){this.sessionToken=ct.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}}class ku{constructor(){this.Qr=new Ze(nt.$r),this.Ur=new Ze(nt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new nt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new nt(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new re(new Ve([])),r=new nt(n,e),s=new nt(n,e+1),i=[];return this.Ur.forEachInRange([r,s],(o=>{this.Gr(o),i.push(o.key)})),i}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new re(new Ve([])),r=new nt(n,e),s=new nt(n,e+1);let i=ve();return this.Ur.forEachInRange([r,s],(o=>{i=i.add(o.key)})),i}containsKey(e){const n=new nt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class nt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return re.comparator(e.key,n.key)||Ie(e.Yr,n.Yr)}static Kr(e,n){return Ie(e.Yr,n.Yr)||re.comparator(e.key,n.key)}}class xS{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ze(nt.$r)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Yb(i,n,r,s);this.mutationQueue.push(o);for(const c of s)this.Zr=this.Zr.add(new nt(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return M.resolve(o)}lookupMutationBatch(e,n){return M.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return M.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?wu:this.tr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new nt(n,0),s=new nt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],(o=>{const c=this.Xr(o.Yr);i.push(c)})),M.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ze(Ie);return n.forEach((s=>{const i=new nt(s,0),o=new nt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],(c=>{r=r.add(c.Yr)}))})),M.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;re.isDocumentKey(i)||(i=i.child(""));const o=new nt(new re(i),0);let c=new Ze(Ie);return this.Zr.forEachWhile((l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(c=c.add(l.Yr)),!0)}),o),M.resolve(this.ti(c))}ti(e){const n=[];return e.forEach((r=>{const s=this.Xr(r);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){Ce(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return M.forEach(n.mutations,(s=>{const i=new nt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new nt(n,0),s=this.Zr.firstAfterOrEqual(r);return M.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class LS{constructor(e){this.ri=e,this.docs=(function(){return new Ue(re.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():gt.newInvalidDocument(n))}getEntries(e,n){let r=xn();return n.forEach((s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():gt.newInvalidDocument(s))})),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=xn();const o=n.path,c=new re(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){const{key:u,value:{document:f}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||hb(ub(f),r)<=0||(s.has(f.key)||Qa(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return M.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ue(9500)}ii(e,n){return M.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new MS(this)}getSize(e){return M.resolve(this.size)}}class MS extends PS{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)})),M.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class US{constructor(e){this.persistence=e,this.si=new zr((n=>bu(n)),Su),this.lastRemoteSnapshotVersion=de.min(),this.highestTargetId=0,this.oi=0,this._i=new ku,this.targetCount=0,this.ai=bs.ur()}forEachTarget(e,n){return this.si.forEach(((r,s)=>n(s))),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),M.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new bs(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.Pr(n),M.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach(((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)})),M.waitFor(i).next((()=>s))}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach((o=>{i.push(s.markPotentiallyOrphaned(e,o))})),M.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),M.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this._i.containsKey(n))}}class M_{constructor(e,n){this.ui={},this.overlays={},this.ci=new Wa(0),this.li=!1,this.li=!0,this.hi=new VS,this.referenceDelegate=e(this),this.Pi=new US(this),this.indexManager=new vS,this.remoteDocumentCache=(function(s){return new LS(s)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new TS(n),this.Ii=new OS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new kS,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new xS(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){Z("MemoryPersistence","Starting transaction:",e);const s=new FS(this.ci.next());return this.referenceDelegate.Ei(),r(s).next((i=>this.referenceDelegate.di(s).next((()=>i)))).toPromise().then((i=>(s.raiseOnCommittedEvent(),i)))}Ai(e,n){return M.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class FS extends db{constructor(e){super(),this.currentSequenceNumber=e}}class Vu{constructor(e){this.persistence=e,this.Ri=new ku,this.Vi=null}static mi(e){return new Vu(e)}get fi(){if(this.Vi)return this.Vi;throw ue(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),M.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((s=>this.fi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((i=>this.fi.add(i.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.fi,(r=>{const s=re.fromPath(r);return this.gi(e,s).next((i=>{i||n.removeEntry(s,de.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return M.or([()=>M.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Ia{constructor(e,n){this.persistence=e,this.pi=new zr((r=>mb(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=CS(this,n)}static mi(e,n){return new Ia(e,n)}Ei(){}di(e){return M.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((s=>r+s))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return M.forEach(this.pi,((r,s)=>this.br(e,r,s).next((i=>i?M.resolve():n(s)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,(o=>this.br(e,o,n).next((c=>{c||(r++,i.removeEntry(o,de.min()))})))).next((()=>i.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),M.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),M.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),M.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),M.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Go(e.data.value)),n}br(e,n,r){return M.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return M.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class xu{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=ve(),s=ve();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new xu(e,n.fromCache,r,s)}}class BS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class jS{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Ev()?8:pb(Et())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next((o=>{i.result=o})).next((()=>{if(!i.result)return this.ws(e,n,s,r).next((o=>{i.result=o}))})).next((()=>{if(i.result)return;const o=new BS;return this.Ss(e,n,o).next((c=>{if(i.result=c,this.Vs)return this.bs(e,n,o,c.size)}))})).next((()=>i.result))}bs(e,n,r,s){return r.documentReadCount<this.fs?(ns()<=Te.DEBUG&&Z("QueryEngine","SDK will not create cache indexes for query:",rs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),M.resolve()):(ns()<=Te.DEBUG&&Z("QueryEngine","Query:",rs(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(ns()<=Te.DEBUG&&Z("QueryEngine","The SDK decides to create cache indexes for query:",rs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,dn(n))):M.resolve())}ys(e,n){if(Ld(n))return M.resolve(null);let r=dn(n);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=wl(n,null,"F"),r=dn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((i=>{const o=ve(...i);return this.ps.getDocuments(e,o).next((c=>this.indexManager.getMinOffset(e,r).next((l=>{const u=this.Ds(n,c);return this.Cs(n,u,o,l.readTime)?this.ys(e,wl(n,null,"F")):this.vs(e,u,n,l)}))))})))))}ws(e,n,r,s){return Ld(n)||s.isEqual(de.min())?M.resolve(null):this.ps.getDocuments(e,r).next((i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?M.resolve(null):(ns()<=Te.DEBUG&&Z("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),rs(n)),this.vs(e,o,n,lb(s,Vi)).next((c=>c)))}))}Ds(e,n){let r=new Ze(g_(e));return n.forEach(((s,i)=>{Qa(e,i)&&(r=r.add(i))})),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return ns()<=Te.DEBUG&&Z("QueryEngine","Using full collection scan to execute query:",rs(n)),this.ps.getDocumentsMatchingQuery(e,n,hr.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next((i=>(n.forEach((o=>{i=i.insert(o.key,o)})),i)))}}const Lu="LocalStore",qS=3e8;class $S{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Ue(Ie),this.xs=new zr((i=>bu(i)),Su),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new DS(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function HS(t,e,n,r){return new $S(t,e,n,r)}async function U_(t,e){const n=pe(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next((i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((i=>{const o=[],c=[];let l=ve();for(const u of s){o.push(u.batchId);for(const f of u.mutations)l=l.add(f.key)}for(const u of i){c.push(u.batchId);for(const f of u.mutations)l=l.add(f.key)}return n.localDocuments.getDocuments(r,l).next((u=>({Ls:u,removedBatchIds:o,addedBatchIds:c})))}))}))}function WS(t,e){const n=pe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(c,l,u,f){const p=u.batch,g=p.keys();let w=M.resolve();return g.forEach((P=>{w=w.next((()=>f.getEntry(l,P))).next((O=>{const N=u.docVersions.get(P);Ce(N!==null,48541),O.version.compareTo(N)<0&&(p.applyToRemoteDocument(O,u),O.isValidDocument()&&(O.setReadTime(u.commitVersion),f.addEntry(O)))}))})),w.next((()=>c.mutationQueue.removeMutationBatch(l,p)))})(n,r,e,i).next((()=>i.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let l=ve();for(let u=0;u<c.mutationResults.length;++u)c.mutationResults[u].transformResults.length>0&&(l=l.add(c.batch.mutations[u].key));return l})(e)))).next((()=>n.localDocuments.getDocuments(r,s)))}))}function F_(t){const e=pe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function GS(t,e){const n=pe(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const c=[];e.targetChanges.forEach(((f,p)=>{const g=s.get(p);if(!g)return;c.push(n.Pi.removeMatchingKeys(i,f.removedDocuments,p).next((()=>n.Pi.addMatchingKeys(i,f.addedDocuments,p))));let w=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?w=w.withResumeToken(ct.EMPTY_BYTE_STRING,de.min()).withLastLimboFreeSnapshotVersion(de.min()):f.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(f.resumeToken,r)),s=s.insert(p,w),(function(O,N,F){return O.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=qS?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0})(g,w,f)&&c.push(n.Pi.updateTargetData(i,w))}));let l=xn(),u=ve();if(e.documentUpdates.forEach((f=>{e.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))})),c.push(zS(i,o,e.documentUpdates).next((f=>{l=f.ks,u=f.qs}))),!r.isEqual(de.min())){const f=n.Pi.getLastRemoteSnapshotVersion(i).next((p=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r)));c.push(f)}return M.waitFor(c).next((()=>o.apply(i))).next((()=>n.localDocuments.getLocalViewOfDocuments(i,l,u))).next((()=>l))})).then((i=>(n.Ms=s,i)))}function zS(t,e,n){let r=ve(),s=ve();return n.forEach((i=>r=r.add(i))),e.getEntries(t,r).next((i=>{let o=xn();return n.forEach(((c,l)=>{const u=i.get(c);l.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(c)),l.isNoDocument()&&l.version.isEqual(de.min())?(e.removeEntry(c,l.readTime),o=o.insert(c,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(c,l)):Z(Lu,"Ignoring outdated watch update for ",c,". Current version:",u.version," Watch version:",l.version)})),{ks:o,qs:s}}))}function KS(t,e){const n=pe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=wu),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function QS(t,e){const n=pe(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return n.Pi.getTargetData(r,e).next((i=>i?(s=i,M.resolve(s)):n.Pi.allocateTargetId(r).next((o=>(s=new er(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function Cl(t,e,n){const r=pe(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,(o=>r.persistence.referenceDelegate.removeTarget(o,s)))}catch(o){if(!Vs(o))throw o;Z(Lu,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function Qd(t,e,n){const r=pe(t);let s=de.min(),i=ve();return r.persistence.runTransaction("Execute query","readwrite",(o=>(function(l,u,f){const p=pe(l),g=p.xs.get(f);return g!==void 0?M.resolve(p.Ms.get(g)):p.Pi.getTargetData(u,f)})(r,o,dn(e)).next((c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,c.targetId).next((l=>{i=l}))})).next((()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:de.min(),n?i:ve()))).next((c=>(YS(r,xb(e),c),{documents:c,Qs:i})))))}function YS(t,e,n){let r=t.Os.get(e)||de.min();n.forEach(((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)})),t.Os.set(e,r)}class Yd{constructor(){this.activeTargetIds=jb()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class JS{constructor(){this.Mo=new Yd,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Yd,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class XS{Oo(e){}shutdown(){}}const Jd="ConnectivityMonitor";class Xd{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Z(Jd,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Z(Jd,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Ro=null;function Pl(){return Ro===null?Ro=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ro++,"0x"+Ro.toString(16)}const jc="RestConnection",ZS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class eC{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===ga?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=Pl(),c=this.zo(e,n.toUriEncodedString());Z(jc,`Sending RPC '${e}' ${o}:`,c,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,s,i);const{host:u}=new URL(c),f=_r(u);return this.Jo(e,c,l,r,f).then((p=>(Z(jc,`Received RPC '${e}' ${o}: `,p),p)),(p=>{throw vs(jc,`RPC '${e}' ${o} failed with error: `,p,"url: ",c,"request:",r),p}))}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Os})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,i)=>e[i]=s)),r&&r.headers.forEach(((s,i)=>e[i]=s))}zo(e,n){const r=ZS[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}class tC{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const ft="WebChannelConnection";class nC extends eC{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=Pl();return new Promise(((c,l)=>{const u=new jm;u.setWithCredentials(!0),u.listenOnce(qm.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case Wo.NO_ERROR:const p=u.getResponseJson();Z(ft,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),c(p);break;case Wo.TIMEOUT:Z(ft,`RPC '${e}' ${o} timed out`),l(new J(x.DEADLINE_EXCEEDED,"Request time out"));break;case Wo.HTTP_ERROR:const g=u.getStatus();if(Z(ft,`RPC '${e}' ${o} failed with status:`,g,"response text:",u.getResponseText()),g>0){let w=u.getResponseJson();Array.isArray(w)&&(w=w[0]);const P=w?.error;if(P&&P.status&&P.message){const O=(function(F){const B=F.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(B)>=0?B:x.UNKNOWN})(P.status);l(new J(O,P.message))}else l(new J(x.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new J(x.UNAVAILABLE,"Connection failed."));break;default:ue(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{Z(ft,`RPC '${e}' ${o} completed.`)}}));const f=JSON.stringify(s);Z(ft,`RPC '${e}' ${o} sending request:`,s),u.send(n,"POST",f,r,15)}))}T_(e,n,r){const s=Pl(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Wm(),c=Hm(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const f=i.join("");Z(ft,`Creating RPC '${e}' stream ${s}: ${f}`,l);const p=o.createWebChannel(f,l);this.I_(p);let g=!1,w=!1;const P=new tC({Yo:N=>{w?Z(ft,`Not sending because RPC '${e}' stream ${s} is closed:`,N):(g||(Z(ft,`Opening RPC '${e}' stream ${s} transport.`),p.open(),g=!0),Z(ft,`RPC '${e}' stream ${s} sending:`,N),p.send(N))},Zo:()=>p.close()}),O=(N,F,B)=>{N.listen(F,(q=>{try{B(q)}catch($){setTimeout((()=>{throw $}),0)}}))};return O(p,oi.EventType.OPEN,(()=>{w||(Z(ft,`RPC '${e}' stream ${s} transport opened.`),P.o_())})),O(p,oi.EventType.CLOSE,(()=>{w||(w=!0,Z(ft,`RPC '${e}' stream ${s} transport closed`),P.a_(),this.E_(p))})),O(p,oi.EventType.ERROR,(N=>{w||(w=!0,vs(ft,`RPC '${e}' stream ${s} transport errored. Name:`,N.name,"Message:",N.message),P.a_(new J(x.UNAVAILABLE,"The operation could not be completed")))})),O(p,oi.EventType.MESSAGE,(N=>{if(!w){const F=N.data[0];Ce(!!F,16349);const B=F,q=B?.error||B[0]?.error;if(q){Z(ft,`RPC '${e}' stream ${s} received error:`,q);const $=q.status;let te=(function(E){const v=Ge[E];if(v!==void 0)return b_(v)})($),G=q.message;te===void 0&&(te=x.INTERNAL,G="Unknown error status: "+$+" with message "+q.message),w=!0,P.a_(new J(te,G)),p.close()}else Z(ft,`RPC '${e}' stream ${s} received:`,F),P.u_(F)}})),O(c,$m.STAT_EVENT,(N=>{N.stat===ml.PROXY?Z(ft,`RPC '${e}' stream ${s} detected buffering proxy`):N.stat===ml.NOPROXY&&Z(ft,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{P.__()}),0),P}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function qc(){return typeof document<"u"?document:null}function Za(t){return new oS(t,!0)}class B_{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&Z("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Zd="PersistentStream";class j_{constructor(e,n,r,s,i,o,c,l){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new B_(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===x.RESOURCE_EXHAUSTED?(Vn(n.toString()),Vn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===n&&this.G_(r,s)}),(r=>{e((()=>{const s=new J(x.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Z(Zd,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(Z(Zd,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class rC extends j_{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=lS(this.serializer,e),r=(function(i){if(!("targetChange"in i))return de.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?de.min():o.readTime?pn(o.readTime):de.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Sl(this.serializer),n.addTarget=(function(i,o){let c;const l=o.target;if(c=Il(l)?{documents:fS(i,l)}:{query:dS(i,l).ft},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=P_(i,o.resumeToken);const u=Al(i,o.expectedCount);u!==null&&(c.expectedCount=u)}else if(o.snapshotVersion.compareTo(de.min())>0){c.readTime=Ta(i,o.snapshotVersion.toTimestamp());const u=Al(i,o.expectedCount);u!==null&&(c.expectedCount=u)}return c})(this.serializer,e);const r=gS(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Sl(this.serializer),n.removeTarget=e,this.q_(n)}}class sC extends j_{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ce(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ce(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ce(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=hS(e.writeResults,e.commitTime),r=pn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Sl(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>uS(this.serializer,r)))};this.q_(n)}}class iC{}class oC extends iC{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new J(x.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,o])=>this.connection.Go(e,Rl(n,r),s,i,o))).catch((i=>{throw i.name==="FirebaseError"?(i.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new J(x.UNKNOWN,i.toString())}))}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.Ho(e,Rl(n,r),s,o,c,i))).catch((o=>{throw o.name==="FirebaseError"?(o.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new J(x.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class aC{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Vn(n),this.aa=!1):Z("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const qr="RemoteStore";class cC{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((o=>{r.enqueueAndForget((async()=>{Kr(this)&&(Z(qr,"Restarting streams for network reachability change."),await(async function(l){const u=pe(l);u.Ea.add(4),await to(u),u.Ra.set("Unknown"),u.Ea.delete(4),await ec(u)})(this))}))})),this.Ra=new aC(r,s)}}async function ec(t){if(Kr(t))for(const e of t.da)await e(!0)}async function to(t){for(const e of t.da)await e(!1)}function q_(t,e){const n=pe(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Bu(n)?Fu(n):Ls(n).O_()&&Uu(n,e))}function Mu(t,e){const n=pe(t),r=Ls(n);n.Ia.delete(e),r.O_()&&$_(n,e),n.Ia.size===0&&(r.O_()?r.L_():Kr(n)&&n.Ra.set("Unknown"))}function Uu(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(de.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ls(t).Y_(e)}function $_(t,e){t.Va.Ue(e),Ls(t).Z_(e)}function Fu(t){t.Va=new nS({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Ls(t).start(),t.Ra.ua()}function Bu(t){return Kr(t)&&!Ls(t).x_()&&t.Ia.size>0}function Kr(t){return pe(t).Ea.size===0}function H_(t){t.Va=void 0}async function lC(t){t.Ra.set("Online")}async function uC(t){t.Ia.forEach(((e,n)=>{Uu(t,e)}))}async function hC(t,e){H_(t),Bu(t)?(t.Ra.ha(e),Fu(t)):t.Ra.set("Unknown")}async function fC(t,e,n){if(t.Ra.set("Online"),e instanceof C_&&e.state===2&&e.cause)try{await(async function(s,i){const o=i.cause;for(const c of i.targetIds)s.Ia.has(c)&&(await s.remoteSyncer.rejectListen(c,o),s.Ia.delete(c),s.Va.removeTarget(c))})(t,e)}catch(r){Z(qr,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await va(t,r)}else if(e instanceof Qo?t.Va.Ze(e):e instanceof S_?t.Va.st(e):t.Va.tt(e),!n.isEqual(de.min()))try{const r=await F_(t.localStore);n.compareTo(r)>=0&&await(function(i,o){const c=i.Va.Tt(o);return c.targetChanges.forEach(((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const f=i.Ia.get(u);f&&i.Ia.set(u,f.withResumeToken(l.resumeToken,o))}})),c.targetMismatches.forEach(((l,u)=>{const f=i.Ia.get(l);if(!f)return;i.Ia.set(l,f.withResumeToken(ct.EMPTY_BYTE_STRING,f.snapshotVersion)),$_(i,l);const p=new er(f.target,l,u,f.sequenceNumber);Uu(i,p)})),i.remoteSyncer.applyRemoteEvent(c)})(t,n)}catch(r){Z(qr,"Failed to raise snapshot:",r),await va(t,r)}}async function va(t,e,n){if(!Vs(e))throw e;t.Ea.add(1),await to(t),t.Ra.set("Offline"),n||(n=()=>F_(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Z(qr,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await ec(t)}))}function W_(t,e){return e().catch((n=>va(t,n,e)))}async function tc(t){const e=pe(t),n=gr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:wu;for(;dC(e);)try{const s=await KS(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,pC(e,s)}catch(s){await va(e,s)}G_(e)&&z_(e)}function dC(t){return Kr(t)&&t.Ta.length<10}function pC(t,e){t.Ta.push(e);const n=gr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function G_(t){return Kr(t)&&!gr(t).x_()&&t.Ta.length>0}function z_(t){gr(t).start()}async function gC(t){gr(t).ra()}async function mC(t){const e=gr(t);for(const n of t.Ta)e.ea(n.mutations)}async function _C(t,e,n){const r=t.Ta.shift(),s=Nu.from(r,e,n);await W_(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await tc(t)}async function yC(t,e){e&&gr(t).X_&&await(async function(r,s){if((function(o){return Zb(o)&&o!==x.ABORTED})(s.code)){const i=r.Ta.shift();gr(r).B_(),await W_(r,(()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s))),await tc(r)}})(t,e),G_(t)&&z_(t)}async function ep(t,e){const n=pe(t);n.asyncQueue.verifyOperationInProgress(),Z(qr,"RemoteStore received new credentials");const r=Kr(n);n.Ea.add(3),await to(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await ec(n)}async function EC(t,e){const n=pe(t);e?(n.Ea.delete(2),await ec(n)):e||(n.Ea.add(2),await to(n),n.Ra.set("Unknown"))}function Ls(t){return t.ma||(t.ma=(function(n,r,s){const i=pe(n);return i.sa(),new rC(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(t.datastore,t.asyncQueue,{Xo:lC.bind(null,t),t_:uC.bind(null,t),r_:hC.bind(null,t),H_:fC.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),Bu(t)?Fu(t):t.Ra.set("Unknown")):(await t.ma.stop(),H_(t))}))),t.ma}function gr(t){return t.fa||(t.fa=(function(n,r,s){const i=pe(n);return i.sa(),new sC(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:gC.bind(null,t),r_:yC.bind(null,t),ta:mC.bind(null,t),na:_C.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await tc(t)):(await t.fa.stop(),t.Ta.length>0&&(Z(qr,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}class ju{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new ar,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,c=new ju(e,n,o,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new J(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function qu(t,e){if(Vn("AsyncQueue",`${e}: ${t}`),Vs(t))return new J(x.UNAVAILABLE,`${e}: ${t}`);throw t}class ms{static emptySet(e){return new ms(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||re.comparator(n.key,r.key):(n,r)=>re.comparator(n.key,r.key),this.keyedMap=ai(),this.sortedSet=new Ue(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ms)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ms;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class tp{constructor(){this.ga=new Ue(re.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ue(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class Ss{constructor(e,n,r,s,i,o,c,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach((c=>{o.push({type:0,doc:c})})),new Ss(e,n,ms.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ka(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}class TC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class IC{constructor(){this.queries=np(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=pe(n),i=s.queries;s.queries=np(),i.forEach(((o,c)=>{for(const l of c.Sa)l.onError(r)}))})(this,new J(x.ABORTED,"Firestore shutting down"))}}function np(){return new zr((t=>p_(t)),Ka)}async function vC(t,e){const n=pe(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new TC,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const c=qu(o,`Initialization of query '${rs(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&$u(n)}async function wC(t,e){const n=pe(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function AC(t,e){const n=pe(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const c of o.Sa)c.Fa(s)&&(r=!0);o.wa=s}}r&&$u(n)}function RC(t,e,n){const r=pe(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function $u(t){t.Ca.forEach((e=>{e.next()}))}var Nl,rp;(rp=Nl||(Nl={})).Ma="default",rp.Cache="cache";class bC{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ss(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ss.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Nl.Cache}}class K_{constructor(e){this.key=e}}class Q_{constructor(e){this.key=e}}class SC{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ve(),this.mutatedKeys=ve(),this.eu=g_(e),this.tu=new ms(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new tp,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,c=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((f,p)=>{const g=s.get(f),w=Qa(this.query,p)?p:null,P=!!g&&this.mutatedKeys.has(g.key),O=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let N=!1;g&&w?g.data.isEqual(w.data)?P!==O&&(r.track({type:3,doc:w}),N=!0):this.su(g,w)||(r.track({type:2,doc:w}),N=!0,(l&&this.eu(w,l)>0||u&&this.eu(w,u)<0)&&(c=!0)):!g&&w?(r.track({type:0,doc:w}),N=!0):g&&!w&&(r.track({type:1,doc:g}),N=!0,(l||u)&&(c=!0)),N&&(w?(o=o.add(w),i=O?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{tu:o,iu:r,Cs:c,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((f,p)=>(function(w,P){const O=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ue(20277,{Rt:N})}};return O(w)-O(P)})(f.type,p.type)||this.eu(f.doc,p.doc))),this.ou(r),s=s??!1;const c=n&&!s?this._u():[],l=this.Xa.size===0&&this.current&&!s?1:0,u=l!==this.Za;return this.Za=l,o.length!==0||u?{snapshot:new Ss(this.query,e.tu,i,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new tp,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ve(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new Q_(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new K_(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=ve();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ss.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Hu="SyncEngine";class CC{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class PC{constructor(e){this.key=e,this.hu=!1}}class NC{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new zr((c=>p_(c)),Ka),this.Iu=new Map,this.Eu=new Set,this.du=new Ue(re.comparator),this.Au=new Map,this.Ru=new ku,this.Vu={},this.mu=new Map,this.fu=bs.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function DC(t,e,n=!0){const r=ty(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await Y_(r,e,n,!0),s}async function OC(t,e){const n=ty(t);await Y_(n,e,!0,!1)}async function Y_(t,e,n,r){const s=await QS(t.localStore,dn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let c;return r&&(c=await kC(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&q_(t.remoteStore,s),c}async function kC(t,e,n,r,s){t.pu=(p,g,w)=>(async function(O,N,F,B){let q=N.view.ru(F);q.Cs&&(q=await Qd(O.localStore,N.query,!1).then((({documents:T})=>N.view.ru(T,q))));const $=B&&B.targetChanges.get(N.targetId),te=B&&B.targetMismatches.get(N.targetId)!=null,G=N.view.applyChanges(q,O.isPrimaryClient,$,te);return ip(O,N.targetId,G.au),G.snapshot})(t,p,g,w);const i=await Qd(t.localStore,e,!0),o=new SC(e,i.Qs),c=o.ru(i.documents),l=eo.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(c,t.isPrimaryClient,l);ip(t,n,u.au);const f=new CC(e,n,o);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function VC(t,e,n){const r=pe(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter((o=>!Ka(o,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Cl(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Mu(r.remoteStore,s.targetId),Dl(r,s.targetId)})).catch(ks)):(Dl(r,s.targetId),await Cl(r.localStore,s.targetId,!0))}async function xC(t,e){const n=pe(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Mu(n.remoteStore,r.targetId))}async function LC(t,e,n){const r=$C(t);try{const s=await(function(o,c){const l=pe(o),u=Me.now(),f=c.reduce(((w,P)=>w.add(P.key)),ve());let p,g;return l.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let P=xn(),O=ve();return l.Ns.getEntries(w,f).next((N=>{P=N,P.forEach(((F,B)=>{B.isValidDocument()||(O=O.add(F))}))})).next((()=>l.localDocuments.getOverlayedDocuments(w,P))).next((N=>{p=N;const F=[];for(const B of c){const q=Kb(B,p.get(B.key).overlayedDocument);q!=null&&F.push(new Tr(B.key,q,i_(q.value.mapValue),Qt.exists(!0)))}return l.mutationQueue.addMutationBatch(w,u,F,c)})).next((N=>{g=N;const F=N.applyToLocalDocumentSet(p,O);return l.documentOverlayCache.saveOverlays(w,N.batchId,F)}))})).then((()=>({batchId:g.batchId,changes:__(p)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(o,c,l){let u=o.Vu[o.currentUser.toKey()];u||(u=new Ue(Ie)),u=u.insert(c,l),o.Vu[o.currentUser.toKey()]=u})(r,s.batchId,n),await no(r,s.changes),await tc(r.remoteStore)}catch(s){const i=qu(s,"Failed to persist write");n.reject(i)}}async function J_(t,e){const n=pe(t);try{const r=await GS(n.localStore,e);e.targetChanges.forEach(((s,i)=>{const o=n.Au.get(i);o&&(Ce(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?Ce(o.hu,14607):s.removedDocuments.size>0&&(Ce(o.hu,42227),o.hu=!1))})),await no(n,r,e)}catch(r){await ks(r)}}function sp(t,e,n){const r=pe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach(((i,o)=>{const c=o.view.va(e);c.snapshot&&s.push(c.snapshot)})),(function(o,c){const l=pe(o);l.onlineState=c;let u=!1;l.queries.forEach(((f,p)=>{for(const g of p.Sa)g.va(c)&&(u=!0)})),u&&$u(l)})(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function MC(t,e,n){const r=pe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Ue(re.comparator);o=o.insert(i,gt.newNoDocument(i,de.min()));const c=ve().add(i),l=new Xa(de.min(),new Map,new Ue(Ie),o,c);await J_(r,l),r.du=r.du.remove(i),r.Au.delete(e),Wu(r)}else await Cl(r.localStore,e,!1).then((()=>Dl(r,e,n))).catch(ks)}async function UC(t,e){const n=pe(t),r=e.batch.batchId;try{const s=await WS(n.localStore,e);Z_(n,r,null),X_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await no(n,s)}catch(s){await ks(s)}}async function FC(t,e,n){const r=pe(t);try{const s=await(function(o,c){const l=pe(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",(u=>{let f;return l.mutationQueue.lookupMutationBatch(u,c).next((p=>(Ce(p!==null,37113),f=p.keys(),l.mutationQueue.removeMutationBatch(u,p)))).next((()=>l.mutationQueue.performConsistencyCheck(u))).next((()=>l.documentOverlayCache.removeOverlaysForBatchId(u,f,c))).next((()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,f))).next((()=>l.localDocuments.getDocuments(u,f)))}))})(r.localStore,e);Z_(r,e,n),X_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await no(r,s)}catch(s){await ks(s)}}function X_(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function Z_(t,e,n){const r=pe(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function Dl(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||ey(t,r)}))}function ey(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Mu(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Wu(t))}function ip(t,e,n){for(const r of n)r instanceof K_?(t.Ru.addReference(r.key,e),BC(t,r)):r instanceof Q_?(Z(Hu,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||ey(t,r.key)):ue(19791,{wu:r})}function BC(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(Z(Hu,"New document in limbo: "+n),t.Eu.add(r),Wu(t))}function Wu(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new re(Ve.fromString(e)),r=t.fu.next();t.Au.set(r,new PC(n)),t.du=t.du.insert(n,r),q_(t.remoteStore,new er(dn(f_(n.path)),r,"TargetPurposeLimboResolution",Wa.ce))}}async function no(t,e,n){const r=pe(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((c,l)=>{o.push(r.pu(l,e,n).then((u=>{if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:n?.targetChanges.get(l.targetId)?.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(u){s.push(u);const f=xu.As(l.targetId,u);i.push(f)}})))})),await Promise.all(o),r.Pu.H_(s),await(async function(l,u){const f=pe(l);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",(p=>M.forEach(u,(g=>M.forEach(g.Es,(w=>f.persistence.referenceDelegate.addReference(p,g.targetId,w))).next((()=>M.forEach(g.ds,(w=>f.persistence.referenceDelegate.removeReference(p,g.targetId,w)))))))))}catch(p){if(!Vs(p))throw p;Z(Lu,"Failed to update sequence numbers: "+p)}for(const p of u){const g=p.targetId;if(!p.fromCache){const w=f.Ms.get(g),P=w.snapshotVersion,O=w.withLastLimboFreeSnapshotVersion(P);f.Ms=f.Ms.insert(g,O)}}})(r.localStore,i))}async function jC(t,e){const n=pe(t);if(!n.currentUser.isEqual(e)){Z(Hu,"User change. New user:",e.toKey());const r=await U_(n.localStore,e);n.currentUser=e,(function(i,o){i.mu.forEach((c=>{c.forEach((l=>{l.reject(new J(x.CANCELLED,o))}))})),i.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await no(n,r.Ls)}}function qC(t,e){const n=pe(t),r=n.Au.get(e);if(r&&r.hu)return ve().add(r.key);{let s=ve();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const c=n.Tu.get(o);s=s.unionWith(c.view.nu)}return s}}function ty(t){const e=pe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=J_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=MC.bind(null,e),e.Pu.H_=AC.bind(null,e.eventManager),e.Pu.yu=RC.bind(null,e.eventManager),e}function $C(t){const e=pe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=UC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=FC.bind(null,e),e}class wa{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Za(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return HS(this.persistence,new jS,e.initialUser,this.serializer)}Cu(e){return new M_(Vu.mi,this.serializer)}Du(e){return new JS}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wa.provider={build:()=>new wa};class HC extends wa{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ce(this.persistence.referenceDelegate instanceof Ia,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new bS(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?bt.withCacheSize(this.cacheSizeBytes):bt.DEFAULT;return new M_((r=>Ia.mi(r,n)),this.serializer)}}class Ol{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>sp(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=jC.bind(null,this.syncEngine),await EC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new IC})()}createDatastore(e){const n=Za(e.databaseInfo.databaseId),r=(function(i){return new nC(i)})(e.databaseInfo);return(function(i,o,c,l){return new oC(i,o,c,l)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,s,i,o,c){return new cC(r,s,i,o,c)})(this.localStore,this.datastore,e.asyncQueue,(n=>sp(this.syncEngine,n,0)),(function(){return Xd.v()?new Xd:new XS})())}createSyncEngine(e,n){return(function(s,i,o,c,l,u,f){const p=new NC(s,i,o,c,l,u);return f&&(p.gu=!0),p})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=pe(n);Z(qr,"RemoteStore shutting down."),r.Ea.add(5),await to(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Ol.provider={build:()=>new Ol};class WC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Vn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const mr="FirestoreClient";class GC{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=dt.UNAUTHENTICATED,this.clientId=vu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,(async o=>{Z(mr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,(o=>(Z(mr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ar;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=qu(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function $c(t,e){t.asyncQueue.verifyOperationInProgress(),Z(mr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async s=>{r.isEqual(s)||(await U_(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function op(t,e){t.asyncQueue.verifyOperationInProgress();const n=await zC(t);Z(mr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>ep(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,s)=>ep(e.remoteStore,s))),t._onlineComponents=e}async function zC(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Z(mr,"Using user provided OfflineComponentProvider");try{await $c(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(s){return s.name==="FirebaseError"?s.code===x.FAILED_PRECONDITION||s.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;vs("Error using user provided cache. Falling back to memory cache: "+n),await $c(t,new wa)}}else Z(mr,"Using default OfflineComponentProvider"),await $c(t,new HC(void 0));return t._offlineComponents}async function ny(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Z(mr,"Using user provided OnlineComponentProvider"),await op(t,t._uninitializedComponentsProvider._online)):(Z(mr,"Using default OnlineComponentProvider"),await op(t,new Ol))),t._onlineComponents}function KC(t){return ny(t).then((e=>e.syncEngine))}async function QC(t){const e=await ny(t),n=e.eventManager;return n.onListen=DC.bind(null,e.syncEngine),n.onUnlisten=VC.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=OC.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=xC.bind(null,e.syncEngine),n}function YC(t,e,n={}){const r=new ar;return t.asyncQueue.enqueueAndForget((async()=>(function(i,o,c,l,u){const f=new WC({next:g=>{f.Nu(),o.enqueueAndForget((()=>wC(i,p))),g.fromCache&&l.source==="server"?u.reject(new J(x.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(g)},error:g=>u.reject(g)}),p=new bC(c,f,{includeMetadataChanges:!0,qa:!0});return vC(i,p)})(await QC(t),t.asyncQueue,e,n,r))),r.promise}function ry(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}const ap=new Map;const sy="firestore.googleapis.com",cp=!0;class lp{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new J(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=sy,this.ssl=cp}else this.host=e.host,this.ssl=e.ssl??cp;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=L_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<AS)throw new J(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}cb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ry(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new J(x.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new J(x.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new J(x.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class nc{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lp({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new J(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new J(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lp(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new XR;switch(r.type){case"firstParty":return new nb(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new J(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=ap.get(n);r&&(Z("ComponentProvider","Removing Datastore"),ap.delete(n),r.terminate())})(this),Promise.resolve()}}function JC(t,e,n,r={}){t=jr(t,nc);const s=_r(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${n}`;s&&(cu(`https://${c}`),lu("Firestore",!0)),i.host!==sy&&i.host!==c&&vs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:c,ssl:s,emulatorOptions:r};if(!Mr(l,o)&&(t._setSettings(l),r.mockUserToken)){let u,f;if(typeof r.mockUserToken=="string")u=r.mockUserToken,f=dt.MOCK_USER;else{u=tm(r.mockUserToken,t._app?.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new J(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new dt(p)}t._authCredentials=new ZR(new zm(u,f))}}class Qr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Qr(this.firestore,e,this._query)}}class Xe{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Xe(this.firestore,e,this._key)}toJSON(){return{type:Xe._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Xi(n,Xe._jsonSchema))return new Xe(e,r||null,new re(Ve.fromString(n.referencePath)))}}Xe._jsonSchemaVersion="firestore/documentReference/1.0",Xe._jsonSchema={type:Ke("string",Xe._jsonSchemaVersion),referencePath:Ke("string")};class cr extends Qr{constructor(e,n,r){super(e,n,f_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Xe(this.firestore,null,new re(e))}withConverter(e){return new cr(this.firestore,e,this._path)}}function oD(t,e,...n){if(t=He(t),Km("collection","path",e),t instanceof nc){const r=Ve.fromString(e,...n);return vd(r),new cr(t,null,r)}{if(!(t instanceof Xe||t instanceof cr))throw new J(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ve.fromString(e,...n));return vd(r),new cr(t.firestore,null,r)}}function XC(t,e,...n){if(t=He(t),arguments.length===1&&(e=vu.newId()),Km("doc","path",e),t instanceof nc){const r=Ve.fromString(e,...n);return Id(r),new Xe(t,null,new re(r))}{if(!(t instanceof Xe||t instanceof cr))throw new J(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ve.fromString(e,...n));return Id(r),new Xe(t.firestore,t instanceof cr?t.converter:null,new re(r))}}const up="AsyncQueue";class hp{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new B_(this,"async_queue_retry"),this._c=()=>{const r=qc();r&&Z(up,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=qc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=qc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new ar;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Vs(e))throw e;Z(up,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Vn("INTERNAL UNHANDLED ERROR: ",fp(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=ju.createAndSchedule(this,e,n,r,(i=>this.hc(i)));return this.tc.push(s),s}uc(){this.nc&&ue(47125,{Pc:fp(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function fp(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class ro extends nc{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new hp,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new hp(e),this._firestoreClient=void 0,await e}}}function ZC(t,e){const n=typeof t=="object"?t:fu(),r=typeof t=="string"?t:ga,s=Fa(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Xg("firestore");i&&JC(s,...i)}return s}function iy(t){if(t._terminated)throw new J(x.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||eP(t),t._firestoreClient}function eP(t){const e=t._freezeSettings(),n=(function(s,i,o,c){return new Eb(s,i,o,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,ry(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new GC(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(s){const i=s?._online.build();return{_offline:s?._offline.build(i),_online:i}})(t._componentsProvider))}class Ut{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ut(ct.fromBase64String(e))}catch(n){throw new J(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ut(ct.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ut._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Xi(e,Ut._jsonSchema))return Ut.fromBase64String(e.bytes)}}Ut._jsonSchemaVersion="firestore/bytes/1.0",Ut._jsonSchema={type:Ke("string",Ut._jsonSchemaVersion),bytes:Ke("string")};class rc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new J(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ot(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Gu{constructor(e){this._methodName=e}}class gn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new J(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new J(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ie(this._lat,e._lat)||Ie(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:gn._jsonSchemaVersion}}static fromJSON(e){if(Xi(e,gn._jsonSchema))return new gn(e.latitude,e.longitude)}}gn._jsonSchemaVersion="firestore/geoPoint/1.0",gn._jsonSchema={type:Ke("string",gn._jsonSchemaVersion),latitude:Ke("number"),longitude:Ke("number")};class mn{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0})(this._values,e._values)}toJSON(){return{type:mn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Xi(e,mn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new mn(e.vectorValues);throw new J(x.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}mn._jsonSchemaVersion="firestore/vectorValue/1.0",mn._jsonSchema={type:Ke("string",mn._jsonSchemaVersion),vectorValues:Ke("object")};const tP=/^__.*__$/;class nP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Tr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Zi(e,this.data,n,this.fieldTransforms)}}class oy{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Tr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function ay(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ue(40011,{Ac:t})}}class zu{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new zu({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Aa(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(ay(this.Ac)&&tP.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class rP{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Za(e)}Cc(e,n,r,s=!1){return new zu({Ac:e,methodName:n,Dc:r,path:ot.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ku(t){const e=t._freezeSettings(),n=Za(t._databaseId);return new rP(t._databaseId,!!e.ignoreUndefinedProperties,n)}function sP(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);Qu("Data must be an object, but it was:",o,r);const c=cy(r,o);let l,u;if(i.merge)l=new Vt(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const p of i.mergeFields){const g=kl(e,p,n);if(!o.contains(g))throw new J(x.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);uy(f,g)||f.push(g)}l=new Vt(f),u=o.fieldTransforms.filter((p=>l.covers(p.field)))}else l=null,u=o.fieldTransforms;return new nP(new St(c),l,u)}class sc extends Gu{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof sc}}function iP(t,e,n,r){const s=t.Cc(1,e,n);Qu("Data must be an object, but it was:",s,r);const i=[],o=St.empty();Er(r,((l,u)=>{const f=Yu(e,l,n);u=He(u);const p=s.yc(f);if(u instanceof sc)i.push(f);else{const g=so(u,p);g!=null&&(i.push(f),o.set(f,g))}}));const c=new Vt(i);return new oy(o,c,s.fieldTransforms)}function oP(t,e,n,r,s,i){const o=t.Cc(1,e,n),c=[kl(e,r,n)],l=[s];if(i.length%2!=0)throw new J(x.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)c.push(kl(e,i[g])),l.push(i[g+1]);const u=[],f=St.empty();for(let g=c.length-1;g>=0;--g)if(!uy(u,c[g])){const w=c[g];let P=l[g];P=He(P);const O=o.yc(w);if(P instanceof sc)u.push(w);else{const N=so(P,O);N!=null&&(u.push(w),f.set(w,N))}}const p=new Vt(u);return new oy(f,p,o.fieldTransforms)}function aP(t,e,n,r=!1){return so(n,t.Cc(r?4:3,e))}function so(t,e){if(ly(t=He(t)))return Qu("Unsupported field value:",e,t),cy(t,e);if(t instanceof Gu)return(function(r,s){if(!ay(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,s){const i=[];let o=0;for(const c of r){let l=so(c,s.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}})(t,e)}return(function(r,s){if((r=He(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return qb(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Me.fromDate(r);return{timestampValue:Ta(s.serializer,i)}}if(r instanceof Me){const i=new Me(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ta(s.serializer,i)}}if(r instanceof gn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ut)return{bytesValue:P_(s.serializer,r._byteString)};if(r instanceof Xe){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Ou(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof mn)return(function(o,c){return{mapValue:{fields:{[r_]:{stringValue:s_},[ma]:{arrayValue:{values:o.toArray().map((u=>{if(typeof u!="number")throw c.Sc("VectorValues must only contain numeric values.");return Cu(c.serializer,u)}))}}}}}})(r,s);throw s.Sc(`Unsupported field value: ${Ha(r)}`)})(t,e)}function cy(t,e){const n={};return Jm(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Er(t,((r,s)=>{const i=so(s,e.mc(r));i!=null&&(n[r]=i)})),{mapValue:{fields:n}}}function ly(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Me||t instanceof gn||t instanceof Ut||t instanceof Xe||t instanceof Gu||t instanceof mn)}function Qu(t,e,n){if(!ly(n)||!Qm(n)){const r=Ha(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function kl(t,e,n){if((e=He(e))instanceof rc)return e._internalPath;if(typeof e=="string")return Yu(t,e);throw Aa("Field path arguments must be of type string or ",t,!1,void 0,n)}const cP=new RegExp("[~\\*/\\[\\]]");function Yu(t,e,n){if(e.search(cP)>=0)throw Aa(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new rc(...e.split("."))._internalPath}catch{throw Aa(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Aa(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new J(x.INVALID_ARGUMENT,c+t+l)}function uy(t,e){return t.some((n=>n.isEqual(e)))}class hy{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Xe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new lP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ic("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class lP extends hy{data(){return super.data()}}function ic(t,e){return typeof e=="string"?Yu(t,e):e instanceof rc?e._internalPath:e._delegate._internalPath}function uP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new J(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ju{}class fy extends Ju{}function aD(t,e,...n){let r=[];e instanceof Ju&&r.push(e),r=r.concat(n),(function(i){const o=i.filter((l=>l instanceof Xu)).length,c=i.filter((l=>l instanceof oc)).length;if(o>1||o>0&&c>0)throw new J(x.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)t=s._apply(t);return t}class oc extends fy{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new oc(e,n,r)}_apply(e){const n=this._parse(e);return dy(e._query,n),new Qr(e.firestore,e.converter,vl(e._query,n))}_parse(e){const n=Ku(e.firestore);return(function(i,o,c,l,u,f,p){let g;if(u.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new J(x.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){pp(p,f);const P=[];for(const O of p)P.push(dp(l,i,O));g={arrayValue:{values:P}}}else g=dp(l,i,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||pp(p,f),g=aP(c,o,p,f==="in"||f==="not-in");return ze.create(u,f,g)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function cD(t,e,n){const r=e,s=ic("where",t);return oc._create(s,r,n)}class Xu extends Ju{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Xu(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Xt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(s,i){let o=s;const c=i.getFlattenedFilters();for(const l of c)dy(o,l),o=vl(o,l)})(e._query,n),new Qr(e.firestore,e.converter,vl(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Zu extends fy{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Zu(e,n)}_apply(e){const n=(function(s,i,o){if(s.startAt!==null)throw new J(x.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new J(x.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ui(i,o)})(e._query,this._field,this._direction);return new Qr(e.firestore,e.converter,(function(s,i){const o=s.explicitOrderBy.concat([i]);return new xs(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,n))}}function lD(t,e="asc"){const n=e,r=ic("orderBy",t);return Zu._create(r,n)}function dp(t,e,n){if(typeof(n=He(n))=="string"){if(n==="")throw new J(x.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!d_(e)&&n.indexOf("/")!==-1)throw new J(x.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ve.fromString(n));if(!re.isDocumentKey(r))throw new J(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Nd(t,new re(r))}if(n instanceof Xe)return Nd(t,n._key);throw new J(x.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ha(n)}.`)}function pp(t,e){if(!Array.isArray(t)||t.length===0)throw new J(x.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function dy(t,e){const n=(function(s,i){for(const o of s)for(const c of o.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null})(t.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new J(x.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new J(x.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class hP{convertValue(e,n="none"){switch(pr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $e(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(dr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ue(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Er(e,((s,i)=>{r[s]=this.convertValue(i,n)})),r}convertVectorValue(e){const n=e.fields?.[ma].arrayValue?.values?.map((r=>$e(r.doubleValue)));return new mn(n)}convertGeoPoint(e){return new gn($e(e.latitude),$e(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=za(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(xi(e));default:return null}}convertTimestamp(e){const n=fr(e);return new Me(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ve.fromString(e);Ce(x_(r),9688,{name:e});const s=new Li(r.get(1),r.get(3)),i=new re(r.popFirst(5));return s.isEqual(n)||Vn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}function fP(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class bo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class _s extends hy{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Yo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(ic("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new J(x.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=_s._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}_s._jsonSchemaVersion="firestore/documentSnapshot/1.0",_s._jsonSchema={type:Ke("string",_s._jsonSchemaVersion),bundleSource:Ke("string","DocumentSnapshot"),bundleName:Ke("string"),bundle:Ke("string")};class Yo extends _s{data(e={}){return super.data(e)}}class ys{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new bo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new Yo(this._firestore,this._userDataWriter,r.key,r,new bo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new J(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map((c=>{const l=new Yo(s._firestore,s._userDataWriter,c.doc.key,c.doc,new bo(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}}))}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((c=>i||c.type!==3)).map((c=>{const l=new Yo(s._firestore,s._userDataWriter,c.doc.key,c.doc,new bo(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,f=-1;return c.type!==0&&(u=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:dP(c.type),doc:l,oldIndex:u,newIndex:f}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new J(x.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ys._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=vu.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach((i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function dP(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ue(61501,{type:t})}}ys._jsonSchemaVersion="firestore/querySnapshot/1.0",ys._jsonSchema={type:Ke("string",ys._jsonSchemaVersion),bundleSource:Ke("string","QuerySnapshot"),bundleName:Ke("string"),bundle:Ke("string")};class pP extends hP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ut(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Xe(this.firestore,null,n)}}function uD(t){t=jr(t,Qr);const e=jr(t.firestore,ro),n=iy(e),r=new pP(e);return uP(t._query),YC(n,t._query).then((s=>new ys(e,r,t,s)))}function hD(t,e,n,...r){t=jr(t,Xe);const s=jr(t.firestore,ro),i=Ku(s);let o;return o=typeof(e=He(e))=="string"||e instanceof rc?oP(i,"updateDoc",t._key,e,n,r):iP(i,"updateDoc",t._key,e),eh(s,[o.toMutation(t._key,Qt.exists(!0))])}function fD(t){return eh(jr(t.firestore,ro),[new Pu(t._key,Qt.none())])}function dD(t,e){const n=jr(t.firestore,ro),r=XC(t),s=fP(t.converter,e);return eh(n,[sP(Ku(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Qt.exists(!1))]).then((()=>r))}function eh(t,e){return(function(r,s){const i=new ar;return r.asyncQueue.enqueueAndForget((async()=>LC(await KC(r),s,i))),i.promise})(iy(t),e)}(function(e,n=!0){(function(s){Os=s})(Wr),Ur(new ur("firestore",((r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),c=new ro(new eb(r.getProvider("auth-internal")),new rb(o,r.getProvider("app-check-internal")),(function(u,f){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new J(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Li(u.options.projectId,f)})(o,s),o);return i={useFetchStreams:n,...i},c._setSettings(i),c}),"PUBLIC").setMultipleInstances(!0)),un(_d,yd,e),un(_d,yd,"esm2020")})();const py="firebasestorage.googleapis.com",gy="storageBucket",gP=120*1e3,mP=600*1e3;class qe extends Tn{constructor(e,n,r=0){super(Hc(e),`Firebase Storage: ${n} (${Hc(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,qe.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Hc(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var je;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(je||(je={}));function Hc(t){return"storage/"+t}function th(){const t="An unknown error occurred, please check the error payload for server response.";return new qe(je.UNKNOWN,t)}function _P(t){return new qe(je.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function yP(t){return new qe(je.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function EP(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new qe(je.UNAUTHENTICATED,t)}function TP(){return new qe(je.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function IP(t){return new qe(je.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function vP(){return new qe(je.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function wP(){return new qe(je.CANCELED,"User canceled the upload/download.")}function AP(t){return new qe(je.INVALID_URL,"Invalid URL '"+t+"'.")}function RP(t){return new qe(je.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function bP(){return new qe(je.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+gy+"' property when initializing the app?")}function SP(){return new qe(je.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function CP(){return new qe(je.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function PP(t){return new qe(je.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Vl(t){return new qe(je.INVALID_ARGUMENT,t)}function my(){return new qe(je.APP_DELETED,"The Firebase app was deleted.")}function NP(t){return new qe(je.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function wi(t,e){return new qe(je.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function ei(t){throw new qe(je.INTERNAL_ERROR,"Internal error: "+t)}class xt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=xt.makeFromUrl(e,n)}catch{return new xt(e,"")}if(r.path==="")return r;throw RP(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i($){$.path.charAt($.path.length-1)==="/"&&($.path_=$.path_.slice(0,-1))}const o="(/(.*))?$",c=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function u($){$.path_=decodeURIComponent($.path)}const f="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",w=new RegExp(`^https?://${p}/${f}/b/${s}/o${g}`,"i"),P={bucket:1,path:3},O=n===py?"(?:storage.googleapis.com|storage.cloud.google.com)":n,N="([^?#]*)",F=new RegExp(`^https?://${O}/${s}/${N}`,"i"),q=[{regex:c,indices:l,postModify:i},{regex:w,indices:P,postModify:u},{regex:F,indices:{bucket:1,path:2},postModify:u}];for(let $=0;$<q.length;$++){const te=q[$],G=te.regex.exec(e);if(G){const T=G[te.indices.bucket];let E=G[te.indices.path];E||(E=""),r=new xt(T,E),te.postModify(r);break}}if(r==null)throw AP(e);return r}}class DP{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function OP(t,e,n){let r=1,s=null,i=null,o=!1,c=0;function l(){return c===2}let u=!1;function f(...N){u||(u=!0,e.apply(null,N))}function p(N){s=setTimeout(()=>{s=null,t(w,l())},N)}function g(){i&&clearTimeout(i)}function w(N,...F){if(u){g();return}if(N){g(),f.call(null,N,...F);return}if(l()||o){g(),f.call(null,N,...F);return}r<64&&(r*=2);let q;c===1?(c=2,q=0):q=(r+Math.random())*1e3,p(q)}let P=!1;function O(N){P||(P=!0,g(),!u&&(s!==null?(N||(c=2),clearTimeout(s),p(0)):N||(c=1)))}return p(0),i=setTimeout(()=>{o=!0,O(!0)},n),O}function kP(t){t(!1)}function VP(t){return t!==void 0}function xP(t){return typeof t=="object"&&!Array.isArray(t)}function nh(t){return typeof t=="string"||t instanceof String}function gp(t){return rh()&&t instanceof Blob}function rh(){return typeof Blob<"u"}function mp(t,e,n,r){if(r<e)throw Vl(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Vl(`Invalid value for '${t}'. Expected ${n} or less.`)}function sh(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function _y(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Lr;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Lr||(Lr={}));function LP(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}class MP{constructor(e,n,r,s,i,o,c,l,u,f,p,g=!0,w=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=f,this.connectionFactory_=p,this.retry=g,this.isUsingEmulator=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((P,O)=>{this.resolve_=P,this.reject_=O,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new So(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=c=>{const l=c.loaded,u=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const c=i.getErrorCode()===Lr.NO_ERROR,l=i.getStatus();if(!c||LP(l,this.additionalRetryCodes_)&&this.retry){const f=i.getErrorCode()===Lr.ABORT;r(!1,new So(!1,null,f));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new So(u,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,c=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(c,c.getResponse());VP(l)?i(l):i()}catch(l){o(l)}else if(c!==null){const l=th();l.serverResponse=c.getErrorText(),this.errorCallback_?o(this.errorCallback_(c,l)):o(l)}else if(s.canceled){const l=this.appDelete_?my():wP();o(l)}else{const l=vP();o(l)}};this.canceled_?n(!1,new So(!1,null,!0)):this.backoffId_=OP(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&kP(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class So{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function UP(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function FP(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function BP(t,e){e&&(t["X-Firebase-GMPID"]=e)}function jP(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function qP(t,e,n,r,s,i,o=!0,c=!1){const l=_y(t.urlParams),u=t.url+l,f=Object.assign({},t.headers);return BP(f,e),UP(f,n),FP(f,i),jP(f,r),new MP(u,t.method,f,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,c)}function $P(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function HP(...t){const e=$P();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(rh())return new Blob(t);throw new qe(je.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function WP(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}function GP(t){if(typeof atob>"u")throw PP("base-64");return atob(t)}const cn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Wc{constructor(e,n){this.data=e,this.contentType=n||null}}function zP(t,e){switch(t){case cn.RAW:return new Wc(yy(e));case cn.BASE64:case cn.BASE64URL:return new Wc(Ey(t,e));case cn.DATA_URL:return new Wc(QP(e),YP(e))}throw th()}function yy(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function KP(t){let e;try{e=decodeURIComponent(t)}catch{throw wi(cn.DATA_URL,"Malformed data URL.")}return yy(e)}function Ey(t,e){switch(t){case cn.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw wi(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case cn.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw wi(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=GP(e)}catch(s){throw s.message.includes("polyfill")?s:wi(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class Ty{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw wi(cn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=JP(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function QP(t){const e=new Ty(t);return e.base64?Ey(cn.BASE64,e.rest):KP(e.rest)}function YP(t){return new Ty(t).contentType}function JP(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}class Zn{constructor(e,n){let r=0,s="";gp(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(gp(this.data_)){const r=this.data_,s=WP(r,e,n);return s===null?null:new Zn(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Zn(r,!0)}}static getBlob(...e){if(rh()){const n=e.map(r=>r instanceof Zn?r.data_:r);return new Zn(HP.apply(null,n))}else{const n=e.map(o=>nh(o)?zP(cn.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let c=0;c<o.length;c++)s[i++]=o[c]}),new Zn(s,!0)}}uploadData(){return this.data_}}function Iy(t){let e;try{e=JSON.parse(t)}catch{return null}return xP(e)?e:null}function XP(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function ZP(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function vy(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}function e0(t,e){return e}class It{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||e0}}let Co=null;function t0(t){return!nh(t)||t.length<2?t:vy(t)}function wy(){if(Co)return Co;const t=[];t.push(new It("bucket")),t.push(new It("generation")),t.push(new It("metageneration")),t.push(new It("name","fullPath",!0));function e(i,o){return t0(o)}const n=new It("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new It("size");return s.xform=r,t.push(s),t.push(new It("timeCreated")),t.push(new It("updated")),t.push(new It("md5Hash",null,!0)),t.push(new It("cacheControl",null,!0)),t.push(new It("contentDisposition",null,!0)),t.push(new It("contentEncoding",null,!0)),t.push(new It("contentLanguage",null,!0)),t.push(new It("contentType",null,!0)),t.push(new It("metadata","customMetadata",!0)),Co=t,Co}function n0(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new xt(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function r0(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return n0(r,t),r}function Ay(t,e,n){const r=Iy(e);return r===null?null:r0(t,r,n)}function s0(t,e,n,r){const s=Iy(e);if(s===null||!nh(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(u=>{const f=t.bucket,p=t.fullPath,g="/b/"+o(f)+"/o/"+o(p),w=sh(g,n,r),P=_y({alt:"media",token:u});return w+P})[0]}function i0(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class Ry{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function by(t){if(!t)throw th()}function o0(t,e){function n(r,s){const i=Ay(t,s,e);return by(i!==null),i}return n}function a0(t,e){function n(r,s){const i=Ay(t,s,e);return by(i!==null),s0(i,s,t.host,t._protocol)}return n}function Sy(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=TP():s=EP():n.getStatus()===402?s=yP(t.bucket):n.getStatus()===403?s=IP(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function c0(t){const e=Sy(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=_P(t.path)),i.serverResponse=s.serverResponse,i}return n}function l0(t,e,n){const r=e.fullServerUrl(),s=sh(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,c=new Ry(s,i,a0(t,n),o);return c.errorHandler=c0(e),c}function u0(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function h0(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=u0(null,e)),r}function f0(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function c(){let q="";for(let $=0;$<2;$++)q=q+Math.random().toString().slice(2);return q}const l=c();o["Content-Type"]="multipart/related; boundary="+l;const u=h0(e,r,s),f=i0(u,n),p="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,g=`\r
--`+l+"--",w=Zn.getBlob(p,r,g);if(w===null)throw SP();const P={name:u.fullPath},O=sh(i,t.host,t._protocol),N="POST",F=t.maxUploadRetryTime,B=new Ry(O,N,o0(t,n),F);return B.urlParams=P,B.headers=o,B.body=w.uploadData(),B.errorHandler=Sy(e),B}class d0{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Lr.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Lr.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Lr.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw ei("cannot .send() more than once");if(_r(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ei("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ei("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ei("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ei("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class p0 extends d0{initXhr(){this.xhr_.responseType="text"}}function Cy(){return new p0}class $r{constructor(e,n){this._service=e,n instanceof xt?this._location=n:this._location=xt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new $r(e,n)}get root(){const e=new xt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return vy(this._location.path)}get storage(){return this._service}get parent(){const e=XP(this._location.path);if(e===null)return null;const n=new xt(this._location.bucket,e);return new $r(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw NP(e)}}function g0(t,e,n){t._throwIfRoot("uploadBytes");const r=f0(t.storage,t._location,wy(),new Zn(e,!0),n);return t.storage.makeRequestWithTokens(r,Cy).then(s=>({metadata:s,ref:t}))}function m0(t){t._throwIfRoot("getDownloadURL");const e=l0(t.storage,t._location,wy());return t.storage.makeRequestWithTokens(e,Cy).then(n=>{if(n===null)throw CP();return n})}function _0(t,e){const n=ZP(t._location.path,e),r=new xt(t._location.bucket,n);return new $r(t.storage,r)}function y0(t){return/^[A-Za-z]+:\/\//.test(t)}function E0(t,e){return new $r(t,e)}function Py(t,e){if(t instanceof ih){const n=t;if(n._bucket==null)throw bP();const r=new $r(n,n._bucket);return e!=null?Py(r,e):r}else return e!==void 0?_0(t,e):t}function T0(t,e){if(e&&y0(e)){if(t instanceof ih)return E0(t,e);throw Vl("To use ref(service, url), the first argument must be a Storage instance.")}else return Py(t,e)}function _p(t,e){const n=e?.[gy];return n==null?null:xt.makeFromBucketSpec(n,t)}function I0(t,e,n,r={}){t.host=`${e}:${n}`;const s=_r(e);s&&(cu(`https://${t.host}/b`),lu("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:tm(i,t.app.options.projectId))}class ih{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=py,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=gP,this._maxUploadRetryTime=mP,this._requests=new Set,s!=null?this._bucket=xt.makeFromBucketSpec(s,this._host):this._bucket=_p(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=xt.makeFromBucketSpec(this._url,e):this._bucket=_p(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){mp("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){mp("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Mt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new $r(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new DP(my());{const o=qP(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const yp="@firebase/storage",Ep="0.14.0";const Ny="storage";function pD(t,e,n){return t=He(t),g0(t,e,n)}function gD(t){return t=He(t),m0(t)}function mD(t,e){return t=He(t),T0(t,e)}function v0(t=fu(),e){t=He(t);const r=Fa(t,Ny).getImmediate({identifier:e}),s=Xg("storage");return s&&w0(r,...s),r}function w0(t,e,n,r={}){I0(t,e,n,r)}function A0(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new ih(n,r,s,e,Wr)}function R0(){Ur(new ur(Ny,A0,"PUBLIC").setMultipleInstances(!0)),un(yp,Ep,""),un(yp,Ep,"esm2020")}R0();const b0={apiKey:"AIzaSyBFqJ4Ocln1C_BxpJf9Xo9NS-0nSM-SQXo",authDomain:"ts-yoga.firebaseapp.com",projectId:"ts-yoga",storageBucket:"ts-yoga.firebasestorage.app",messagingSenderId:"583686504676",appId:"1:583686504676:web:ba01470af6aa15986decf1"},oh=sm(b0),Dy=KR(oh),_D=ZC(oh),yD=v0(oh),ED=async t=>{try{const e=await VA(Dy,t.username,t.password);return{data:{success:!0,token:await e.user.getIdToken(),expired:Date.now()+36e5,uid:e.user.uid}}}catch(e){throw new Error(e.message)}},S0=async()=>(await MA(Dy),{data:{success:!0,message:""}}),Oy=[{path:"/product-management",name:""},{path:"/order-management",name:""},{path:"/coupon-management",name:""}];const os=typeof document<"u";function ky(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function C0(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&ky(t.default)}const Re=Object.assign;function Gc(t,e){const n={};for(const r in e){const s=e[r];n[r]=Zt(s)?s.map(t):t(s)}return n}const Ai=()=>{},Zt=Array.isArray;function Tp(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}const Vy=/#/g,P0=/&/g,N0=/\//g,D0=/=/g,O0=/\?/g,xy=/\+/g,k0=/%5B/g,V0=/%5D/g,Ly=/%5E/g,x0=/%60/g,My=/%7B/g,L0=/%7C/g,Uy=/%7D/g,M0=/%20/g;function ah(t){return t==null?"":encodeURI(""+t).replace(L0,"|").replace(k0,"[").replace(V0,"]")}function U0(t){return ah(t).replace(My,"{").replace(Uy,"}").replace(Ly,"^")}function xl(t){return ah(t).replace(xy,"%2B").replace(M0,"+").replace(Vy,"%23").replace(P0,"%26").replace(x0,"`").replace(My,"{").replace(Uy,"}").replace(Ly,"^")}function F0(t){return xl(t).replace(D0,"%3D")}function B0(t){return ah(t).replace(Vy,"%23").replace(O0,"%3F")}function j0(t){return B0(t).replace(N0,"%2F")}function ji(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const q0=/\/$/,$0=t=>t.replace(q0,"");function zc(t,e,n="/"){let r,s={},i="",o="";const c=e.indexOf("#");let l=e.indexOf("?");return l=c>=0&&l>c?-1:l,l>=0&&(r=e.slice(0,l),i=e.slice(l,c>0?c:e.length),s=t(i.slice(1))),c>=0&&(r=r||e.slice(0,c),o=e.slice(c,e.length)),r=z0(r??e,n),{fullPath:r+i+o,path:r,query:s,hash:ji(o)}}function H0(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Ip(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function W0(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&Cs(e.matched[r],n.matched[s])&&Fy(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Cs(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Fy(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!G0(t[n],e[n]))return!1;return!0}function G0(t,e){return Zt(t)?vp(t,e):Zt(e)?vp(e,t):t===e}function vp(t,e){return Zt(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function z0(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,c;for(o=0;o<r.length;o++)if(c=r[o],c!==".")if(c==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o).join("/")}const Hn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let Ll=(function(t){return t.pop="pop",t.push="push",t})({}),Kc=(function(t){return t.back="back",t.forward="forward",t.unknown="",t})({});function K0(t){if(!t)if(os){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),$0(t)}const Q0=/^[^#]+#/;function Y0(t,e){return t.replace(Q0,"#")+e}function J0(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const ac=()=>({left:window.scrollX,top:window.scrollY});function X0(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=J0(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function wp(t,e){return(history.state?history.state.position-e:-1)+t}const Ml=new Map;function Z0(t,e){Ml.set(t,e)}function eN(t){const e=Ml.get(t);return Ml.delete(t),e}function tN(t){return typeof t=="string"||t&&typeof t=="object"}function By(t){return typeof t=="string"||typeof t=="symbol"}let Be=(function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t})({});const jy=Symbol("");Be.MATCHER_NOT_FOUND+"",Be.NAVIGATION_GUARD_REDIRECT+"",Be.NAVIGATION_ABORTED+"",Be.NAVIGATION_CANCELLED+"",Be.NAVIGATION_DUPLICATED+"";function Ps(t,e){return Re(new Error,{type:t,[jy]:!0},e)}function wn(t,e){return t instanceof Error&&jy in t&&(e==null||!!(t.type&e))}const nN=["params","query","hash"];function rN(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const n of nN)n in t&&(e[n]=t[n]);return JSON.stringify(e,null,2)}function sN(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let r=0;r<n.length;++r){const s=n[r].replace(xy," "),i=s.indexOf("="),o=ji(i<0?s:s.slice(0,i)),c=i<0?null:ji(s.slice(i+1));if(o in e){let l=e[o];Zt(l)||(l=e[o]=[l]),l.push(c)}else e[o]=c}return e}function Ap(t){let e="";for(let n in t){const r=t[n];if(n=F0(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(Zt(r)?r.map(s=>s&&xl(s)):[r&&xl(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function iN(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=Zt(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const oN=Symbol(""),Rp=Symbol(""),cc=Symbol(""),ch=Symbol(""),Ul=Symbol("");function ti(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Kn(t,e,n,r,s,i=o=>o()){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((c,l)=>{const u=g=>{g===!1?l(Ps(Be.NAVIGATION_ABORTED,{from:n,to:e})):g instanceof Error?l(g):tN(g)?l(Ps(Be.NAVIGATION_GUARD_REDIRECT,{from:e,to:g})):(o&&r.enterCallbacks[s]===o&&typeof g=="function"&&o.push(g),c())},f=i(()=>t.call(r&&r.instances[s],e,n,u));let p=Promise.resolve(f);t.length<3&&(p=p.then(u)),p.catch(g=>l(g))})}function Qc(t,e,n,r,s=i=>i()){const i=[];for(const o of t)for(const c in o.components){let l=o.components[c];if(!(e!=="beforeRouteEnter"&&!o.instances[c]))if(ky(l)){const u=(l.__vccOpts||l)[e];u&&i.push(Kn(u,n,r,o,c,s))}else{let u=l();i.push(()=>u.then(f=>{if(!f)throw new Error(`Couldn't resolve component "${c}" at "${o.path}"`);const p=C0(f)?f.default:f;o.mods[c]=f,o.components[c]=p;const g=(p.__vccOpts||p)[e];return g&&Kn(g,n,r,o,c,s)()}))}}return i}function aN(t,e){const n=[],r=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const c=e.matched[o];c&&(t.matched.find(u=>Cs(u,c))?r.push(c):n.push(c));const l=t.matched[o];l&&(e.matched.find(u=>Cs(u,l))||s.push(l))}return[n,r,s]}let cN=()=>location.protocol+"//"+location.host;function qy(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){let o=s.includes(t.slice(i))?t.slice(i).length:1,c=s.slice(o);return c[0]!=="/"&&(c="/"+c),Ip(c,"")}return Ip(n,t)+r+s}function lN(t,e,n,r){let s=[],i=[],o=null;const c=({state:g})=>{const w=qy(t,location),P=n.value,O=e.value;let N=0;if(g){if(n.value=w,e.value=g,o&&o===P){o=null;return}N=O?g.position-O.position:0}else r(w);s.forEach(F=>{F(n.value,P,{delta:N,type:Ll.pop,direction:N?N>0?Kc.forward:Kc.back:Kc.unknown})})};function l(){o=n.value}function u(g){s.push(g);const w=()=>{const P=s.indexOf(g);P>-1&&s.splice(P,1)};return i.push(w),w}function f(){if(document.visibilityState==="hidden"){const{history:g}=window;if(!g.state)return;g.replaceState(Re({},g.state,{scroll:ac()}),"")}}function p(){for(const g of i)g();i=[],window.removeEventListener("popstate",c),window.removeEventListener("pagehide",f),document.removeEventListener("visibilitychange",f)}return window.addEventListener("popstate",c),window.addEventListener("pagehide",f),document.addEventListener("visibilitychange",f),{pauseListeners:l,listen:u,destroy:p}}function bp(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?ac():null}}function uN(t){const{history:e,location:n}=window,r={value:qy(t,n)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,u,f){const p=t.indexOf("#"),g=p>-1?(n.host&&document.querySelector("base")?t:t.slice(p))+l:cN()+t+l;try{e[f?"replaceState":"pushState"](u,"",g),s.value=u}catch(w){console.error(w),n[f?"replace":"assign"](g)}}function o(l,u){i(l,Re({},e.state,bp(s.value.back,l,s.value.forward,!0),u,{position:s.value.position}),!0),r.value=l}function c(l,u){const f=Re({},s.value,e.state,{forward:l,scroll:ac()});i(f.current,f,!0),i(l,Re({},bp(r.value,l,null),{position:f.position+1},u),!1),r.value=l}return{location:r,state:s,push:c,replace:o}}function hN(t){t=K0(t);const e=uN(t),n=lN(t,e.state,e.location,e.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=Re({location:"",base:t,go:r,createHref:Y0.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function fN(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),hN(t)}let Or=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t})({});var Je=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t})(Je||{});const dN={type:Or.Static,value:""},pN=/[a-zA-Z0-9_]/;function gN(t){if(!t)return[[]];if(t==="/")return[[dN]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(w){throw new Error(`ERR (${n})/"${u}": ${w}`)}let n=Je.Static,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let c=0,l,u="",f="";function p(){u&&(n===Je.Static?i.push({type:Or.Static,value:u}):n===Je.Param||n===Je.ParamRegExp||n===Je.ParamRegExpEnd?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:Or.Param,value:u,regexp:f,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),u="")}function g(){u+=l}for(;c<t.length;){if(l=t[c++],l==="\\"&&n!==Je.ParamRegExp){r=n,n=Je.EscapeNext;continue}switch(n){case Je.Static:l==="/"?(u&&p(),o()):l===":"?(p(),n=Je.Param):g();break;case Je.EscapeNext:g(),n=r;break;case Je.Param:l==="("?n=Je.ParamRegExp:pN.test(l)?g():(p(),n=Je.Static,l!=="*"&&l!=="?"&&l!=="+"&&c--);break;case Je.ParamRegExp:l===")"?f[f.length-1]=="\\"?f=f.slice(0,-1)+l:n=Je.ParamRegExpEnd:f+=l;break;case Je.ParamRegExpEnd:p(),n=Je.Static,l!=="*"&&l!=="?"&&l!=="+"&&c--,f="";break;default:e("Unknown state");break}}return n===Je.ParamRegExp&&e(`Unfinished custom RegExp for param "${u}"`),p(),o(),s}const Sp="[^/]+?",mN={sensitive:!1,strict:!1,start:!0,end:!0};var wt=(function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t})(wt||{});const _N=/[.+*?^${}()[\]/\\]/g;function yN(t,e){const n=Re({},mN,e),r=[];let s=n.start?"^":"";const i=[];for(const u of t){const f=u.length?[]:[wt.Root];n.strict&&!u.length&&(s+="/");for(let p=0;p<u.length;p++){const g=u[p];let w=wt.Segment+(n.sensitive?wt.BonusCaseSensitive:0);if(g.type===Or.Static)p||(s+="/"),s+=g.value.replace(_N,"\\$&"),w+=wt.Static;else if(g.type===Or.Param){const{value:P,repeatable:O,optional:N,regexp:F}=g;i.push({name:P,repeatable:O,optional:N});const B=F||Sp;if(B!==Sp){w+=wt.BonusCustomRegExp;try{`${B}`}catch($){throw new Error(`Invalid custom RegExp for param "${P}" (${B}): `+$.message)}}let q=O?`((?:${B})(?:/(?:${B}))*)`:`(${B})`;p||(q=N&&u.length<2?`(?:/${q})`:"/"+q),N&&(q+="?"),s+=q,w+=wt.Dynamic,N&&(w+=wt.BonusOptional),O&&(w+=wt.BonusRepeatable),B===".*"&&(w+=wt.BonusWildcard)}f.push(w)}r.push(f)}if(n.strict&&n.end){const u=r.length-1;r[u][r[u].length-1]+=wt.BonusStrict}n.strict||(s+="/?"),n.end?s+="$":n.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function c(u){const f=u.match(o),p={};if(!f)return null;for(let g=1;g<f.length;g++){const w=f[g]||"",P=i[g-1];p[P.name]=w&&P.repeatable?w.split("/"):w}return p}function l(u){let f="",p=!1;for(const g of t){(!p||!f.endsWith("/"))&&(f+="/"),p=!1;for(const w of g)if(w.type===Or.Static)f+=w.value;else if(w.type===Or.Param){const{value:P,repeatable:O,optional:N}=w,F=P in u?u[P]:"";if(Zt(F)&&!O)throw new Error(`Provided param "${P}" is an array but it is not repeatable (* or + modifiers)`);const B=Zt(F)?F.join("/"):F;if(!B)if(N)g.length<2&&(f.endsWith("/")?f=f.slice(0,-1):p=!0);else throw new Error(`Missing required param "${P}"`);f+=B}}return f||"/"}return{re:o,score:r,keys:i,parse:c,stringify:l}}function EN(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===wt.Static+wt.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===wt.Static+wt.Segment?1:-1:0}function $y(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const i=EN(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(Cp(r))return 1;if(Cp(s))return-1}return s.length-r.length}function Cp(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const TN={strict:!1,end:!0,sensitive:!1};function IN(t,e,n){const r=yN(gN(t.path),n),s=Re(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function vN(t,e){const n=[],r=new Map;e=Tp(TN,e);function s(p){return r.get(p)}function i(p,g,w){const P=!w,O=Np(p);O.aliasOf=w&&w.record;const N=Tp(e,p),F=[O];if("alias"in p){const $=typeof p.alias=="string"?[p.alias]:p.alias;for(const te of $)F.push(Np(Re({},O,{components:w?w.record.components:O.components,path:te,aliasOf:w?w.record:O})))}let B,q;for(const $ of F){const{path:te}=$;if(g&&te[0]!=="/"){const G=g.record.path,T=G[G.length-1]==="/"?"":"/";$.path=g.record.path+(te&&T+te)}if(B=IN($,g,N),w?w.alias.push(B):(q=q||B,q!==B&&q.alias.push(B),P&&p.name&&!Dp(B)&&o(p.name)),Hy(B)&&l(B),O.children){const G=O.children;for(let T=0;T<G.length;T++)i(G[T],B,w&&w.children[T])}w=w||B}return q?()=>{o(q)}:Ai}function o(p){if(By(p)){const g=r.get(p);g&&(r.delete(p),n.splice(n.indexOf(g),1),g.children.forEach(o),g.alias.forEach(o))}else{const g=n.indexOf(p);g>-1&&(n.splice(g,1),p.record.name&&r.delete(p.record.name),p.children.forEach(o),p.alias.forEach(o))}}function c(){return n}function l(p){const g=RN(p,n);n.splice(g,0,p),p.record.name&&!Dp(p)&&r.set(p.record.name,p)}function u(p,g){let w,P={},O,N;if("name"in p&&p.name){if(w=r.get(p.name),!w)throw Ps(Be.MATCHER_NOT_FOUND,{location:p});N=w.record.name,P=Re(Pp(g.params,w.keys.filter(q=>!q.optional).concat(w.parent?w.parent.keys.filter(q=>q.optional):[]).map(q=>q.name)),p.params&&Pp(p.params,w.keys.map(q=>q.name))),O=w.stringify(P)}else if(p.path!=null)O=p.path,w=n.find(q=>q.re.test(O)),w&&(P=w.parse(O),N=w.record.name);else{if(w=g.name?r.get(g.name):n.find(q=>q.re.test(g.path)),!w)throw Ps(Be.MATCHER_NOT_FOUND,{location:p,currentLocation:g});N=w.record.name,P=Re({},g.params,p.params),O=w.stringify(P)}const F=[];let B=w;for(;B;)F.unshift(B.record),B=B.parent;return{name:N,path:O,params:P,matched:F,meta:AN(F)}}t.forEach(p=>i(p));function f(){n.length=0,r.clear()}return{addRoute:i,resolve:u,removeRoute:o,clearRoutes:f,getRoutes:c,getRecordMatcher:s}}function Pp(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function Np(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:wN(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function wN(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function Dp(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function AN(t){return t.reduce((e,n)=>Re(e,n.meta),{})}function RN(t,e){let n=0,r=e.length;for(;n!==r;){const i=n+r>>1;$y(t,e[i])<0?r=i:n=i+1}const s=bN(t);return s&&(r=e.lastIndexOf(s,r-1)),r}function bN(t){let e=t;for(;e=e.parent;)if(Hy(e)&&$y(t,e)===0)return e}function Hy({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function Op(t){const e=Kt(cc),n=Kt(ch),r=Wt(()=>{const l=xr(t.to);return e.resolve(l)}),s=Wt(()=>{const{matched:l}=r.value,{length:u}=l,f=l[u-1],p=n.matched;if(!f||!p.length)return-1;const g=p.findIndex(Cs.bind(null,f));if(g>-1)return g;const w=kp(l[u-2]);return u>1&&kp(f)===w&&p[p.length-1].path!==w?p.findIndex(Cs.bind(null,l[u-2])):g}),i=Wt(()=>s.value>-1&&DN(n.params,r.value.params)),o=Wt(()=>s.value>-1&&s.value===n.matched.length-1&&Fy(n.params,r.value.params));function c(l={}){if(NN(l)){const u=e[xr(t.replace)?"replace":"push"](xr(t.to)).catch(Ai);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:r,href:Wt(()=>r.value.href),isActive:i,isExactActive:o,navigate:c}}function SN(t){return t.length===1?t[0]:t}const CN=Hi({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Op,setup(t,{slots:e}){const n=Oa(Op(t)),{options:r}=Kt(cc),s=Wt(()=>({[Vp(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Vp(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&SN(e.default(n));return t.custom?i:Hg("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),PN=CN;function NN(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function DN(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!Zt(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function kp(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Vp=(t,e,n)=>t??e??n,ON=Hi({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=Kt(Ul),s=Wt(()=>t.route||r.value),i=Kt(Rp,0),o=Wt(()=>{let u=xr(i);const{matched:f}=s.value;let p;for(;(p=f[u])&&!p.components;)u++;return u}),c=Wt(()=>s.value.matched[o.value]);No(Rp,Wt(()=>o.value+1)),No(oN,c),No(Ul,s);const l=tl();return gi(()=>[l.value,c.value,t.name],([u,f,p],[g,w,P])=>{f&&(f.instances[p]=u,w&&w!==f&&u&&u===g&&(f.leaveGuards.size||(f.leaveGuards=w.leaveGuards),f.updateGuards.size||(f.updateGuards=w.updateGuards))),u&&f&&(!w||!Cs(f,w)||!g)&&(f.enterCallbacks[p]||[]).forEach(O=>O(u))},{flush:"post"}),()=>{const u=s.value,f=t.name,p=c.value,g=p&&p.components[f];if(!g)return xp(n.default,{Component:g,route:u});const w=p.props[f],P=w?w===!0?u.params:typeof w=="function"?w(u):w:null,N=Hg(g,Re({},P,e,{onVnodeUnmounted:F=>{F.component.isUnmounted&&(p.instances[f]=null)},ref:l}));return xp(n.default,{Component:N,route:u})||N}}});function xp(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const kN=ON;function VN(t){const e=vN(t.routes,t),n=t.parseQuery||sN,r=t.stringifyQuery||Ap,s=t.history,i=ti(),o=ti(),c=ti(),l=og(Hn);let u=Hn;os&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const f=Gc.bind(null,V=>""+V),p=Gc.bind(null,j0),g=Gc.bind(null,ji);function w(V,X){let Q,ne;return By(V)?(Q=e.getRecordMatcher(V),ne=X):ne=V,e.addRoute(ne,Q)}function P(V){const X=e.getRecordMatcher(V);X&&e.removeRoute(X)}function O(){return e.getRoutes().map(V=>V.record)}function N(V){return!!e.getRecordMatcher(V)}function F(V,X){if(X=Re({},X||l.value),typeof V=="string"){const S=zc(n,V,X.path),L=e.resolve({path:S.path},X),U=s.createHref(S.fullPath);return Re(S,L,{params:g(L.params),hash:ji(S.hash),redirectedFrom:void 0,href:U})}let Q;if(V.path!=null)Q=Re({},V,{path:zc(n,V.path,X.path).path});else{const S=Re({},V.params);for(const L in S)S[L]==null&&delete S[L];Q=Re({},V,{params:p(S)}),X.params=p(X.params)}const ne=e.resolve(Q,X),Ee=V.hash||"";ne.params=f(g(ne.params));const A=H0(r,Re({},V,{hash:U0(Ee),path:ne.path})),b=s.createHref(A);return Re({fullPath:A,hash:Ee,query:r===Ap?iN(V.query):V.query||{}},ne,{redirectedFrom:void 0,href:b})}function B(V){return typeof V=="string"?zc(n,V,l.value.path):Re({},V)}function q(V,X){if(u!==V)return Ps(Be.NAVIGATION_CANCELLED,{from:X,to:V})}function $(V){return T(V)}function te(V){return $(Re(B(V),{replace:!0}))}function G(V,X){const Q=V.matched[V.matched.length-1];if(Q&&Q.redirect){const{redirect:ne}=Q;let Ee=typeof ne=="function"?ne(V,X):ne;return typeof Ee=="string"&&(Ee=Ee.includes("?")||Ee.includes("#")?Ee=B(Ee):{path:Ee},Ee.params={}),Re({query:V.query,hash:V.hash,params:Ee.path!=null?{}:V.params},Ee)}}function T(V,X){const Q=u=F(V),ne=l.value,Ee=V.state,A=V.force,b=V.replace===!0,S=G(Q,ne);if(S)return T(Re(B(S),{state:typeof S=="object"?Re({},Ee,S.state):Ee,force:A,replace:b}),X||Q);const L=Q;L.redirectedFrom=X;let U;return!A&&W0(r,ne,Q)&&(U=Ps(Be.NAVIGATION_DUPLICATED,{to:L,from:ne}),We(ne,ne,!0,!1)),(U?Promise.resolve(U):_(L,ne)).catch(k=>wn(k)?wn(k,Be.NAVIGATION_GUARD_REDIRECT)?k:Lt(k):ce(k,L,ne)).then(k=>{if(k){if(wn(k,Be.NAVIGATION_GUARD_REDIRECT))return T(Re({replace:b},B(k.to),{state:typeof k.to=="object"?Re({},Ee,k.to.state):Ee,force:A}),X||L)}else k=R(L,ne,!0,b,Ee);return I(L,ne,k),k})}function E(V,X){const Q=q(V,X);return Q?Promise.reject(Q):Promise.resolve()}function v(V){const X=jt.values().next().value;return X&&typeof X.runWithContext=="function"?X.runWithContext(V):V()}function _(V,X){let Q;const[ne,Ee,A]=aN(V,X);Q=Qc(ne.reverse(),"beforeRouteLeave",V,X);for(const S of ne)S.leaveGuards.forEach(L=>{Q.push(Kn(L,V,X))});const b=E.bind(null,V,X);return Q.push(b),lt(Q).then(()=>{Q=[];for(const S of i.list())Q.push(Kn(S,V,X));return Q.push(b),lt(Q)}).then(()=>{Q=Qc(Ee,"beforeRouteUpdate",V,X);for(const S of Ee)S.updateGuards.forEach(L=>{Q.push(Kn(L,V,X))});return Q.push(b),lt(Q)}).then(()=>{Q=[];for(const S of A)if(S.beforeEnter)if(Zt(S.beforeEnter))for(const L of S.beforeEnter)Q.push(Kn(L,V,X));else Q.push(Kn(S.beforeEnter,V,X));return Q.push(b),lt(Q)}).then(()=>(V.matched.forEach(S=>S.enterCallbacks={}),Q=Qc(A,"beforeRouteEnter",V,X,v),Q.push(b),lt(Q))).then(()=>{Q=[];for(const S of o.list())Q.push(Kn(S,V,X));return Q.push(b),lt(Q)}).catch(S=>wn(S,Be.NAVIGATION_CANCELLED)?S:Promise.reject(S))}function I(V,X,Q){c.list().forEach(ne=>v(()=>ne(V,X,Q)))}function R(V,X,Q,ne,Ee){const A=q(V,X);if(A)return A;const b=X===Hn,S=os?history.state:{};Q&&(ne||b?s.replace(V.fullPath,Re({scroll:b&&S&&S.scroll},Ee)):s.push(V.fullPath,Ee)),l.value=V,We(V,X,Q,b),Lt()}let y;function ee(){y||(y=s.listen((V,X,Q)=>{if(!qt.listening)return;const ne=F(V),Ee=G(ne,qt.currentRoute.value);if(Ee){T(Re(Ee,{replace:!0,force:!0}),ne).catch(Ai);return}u=ne;const A=l.value;os&&Z0(wp(A.fullPath,Q.delta),ac()),_(ne,A).catch(b=>wn(b,Be.NAVIGATION_ABORTED|Be.NAVIGATION_CANCELLED)?b:wn(b,Be.NAVIGATION_GUARD_REDIRECT)?(T(Re(B(b.to),{force:!0}),ne).then(S=>{wn(S,Be.NAVIGATION_ABORTED|Be.NAVIGATION_DUPLICATED)&&!Q.delta&&Q.type===Ll.pop&&s.go(-1,!1)}).catch(Ai),Promise.reject()):(Q.delta&&s.go(-Q.delta,!1),ce(b,ne,A))).then(b=>{b=b||R(ne,A,!1),b&&(Q.delta&&!wn(b,Be.NAVIGATION_CANCELLED)?s.go(-Q.delta,!1):Q.type===Ll.pop&&wn(b,Be.NAVIGATION_ABORTED|Be.NAVIGATION_DUPLICATED)&&s.go(-1,!1)),I(ne,A,b)}).catch(Ai)}))}let ie=ti(),me=ti(),fe;function ce(V,X,Q){Lt(V);const ne=me.list();return ne.length?ne.forEach(Ee=>Ee(V,X,Q)):console.error(V),Promise.reject(V)}function xe(){return fe&&l.value!==Hn?Promise.resolve():new Promise((V,X)=>{ie.add([V,X])})}function Lt(V){return fe||(fe=!V,ee(),ie.list().forEach(([X,Q])=>V?Q(V):X()),ie.reset()),V}function We(V,X,Q,ne){const{scrollBehavior:Ee}=t;if(!os||!Ee)return Promise.resolve();const A=!Q&&eN(wp(V.fullPath,0))||(ne||!Q)&&history.state&&history.state.scroll||null;return ug().then(()=>Ee(V,X,A)).then(b=>b&&X0(b)).catch(b=>ce(b,V,X))}const rt=V=>s.go(V);let In;const jt=new Set,qt={currentRoute:l,listening:!0,addRoute:w,removeRoute:P,clearRoutes:e.clearRoutes,hasRoute:N,getRoutes:O,resolve:F,options:t,push:$,replace:te,go:rt,back:()=>rt(-1),forward:()=>rt(1),beforeEach:i.add,beforeResolve:o.add,afterEach:c.add,onError:me.add,isReady:xe,install(V){V.component("RouterLink",PN),V.component("RouterView",kN),V.config.globalProperties.$router=qt,Object.defineProperty(V.config.globalProperties,"$route",{enumerable:!0,get:()=>xr(l)}),os&&!In&&l.value===Hn&&(In=!0,$(s.location).catch(ne=>{}));const X={};for(const ne in Hn)Object.defineProperty(X,ne,{get:()=>l.value[ne],enumerable:!0});V.provide(cc,qt),V.provide(ch,ig(X)),V.provide(Ul,l);const Q=V.unmount;jt.add(V),V.unmount=function(){jt.delete(V),jt.size<1&&(u=Hn,y&&y(),y=null,l.value=Hn,In=!1,fe=!1),Q()}}};function lt(V){return V.reduce((X,Q)=>X.then(()=>v(Q)),Promise.resolve())}return qt}function xN(){return Kt(cc)}function LN(t){return Kt(ch)}const MN={class:"navbar navbar-expand-lg bg-white shadow-sm rounded-lg mb-4"},UN={class:"container-fluid"},FN={class:"breadcrumb m-0"},BN={key:0,class:"breadcrumb-item active"},jN={class:"d-flex align-items-center"},qN=["disabled"],$N=Hi({__name:"Header",setup(t){const e=tl(""),n=LN(),r=xN(),s=()=>{Oy.forEach(c=>{c.path===n.path&&(e.value=c.name)})};Eg(()=>{s()}),gi(()=>n.path,()=>{s()});const i=tl(!1),o=async()=>{i.value=!0;try{await S0()}catch{}finally{i.value=!0,r.push("/login")}};return(c,l)=>(nr(),Pi("nav",MN,[Ht("div",UN,[Ht("ol",FN,[l[0]||(l[0]=Ht("li",{class:"breadcrumb-item"},"",-1)),e.value!==""?(nr(),Pi("li",BN,Gl(e.value),1)):JT("",!0)]),Ht("div",jN,[Ht("button",{onClick:o,disabled:i.value,class:"btn btn-outline-dark rounded-lg me-2"},"  ",8,qN)])])]))}}),HN={class:"sidebar d-flex flex-column"},WN={class:"nav nav-pills flex-column"},GN=Hi({__name:"Sidebar",setup(t){return(e,n)=>{const r=nu("RouterLink");return nr(),Pi("div",HN,[n[1]||(n[1]=Ht("h4",{class:"text-white text-center mb-5"},"",-1)),Ht("nav",WN,[(nr(!0),Pi(on,null,yT(xr(Oy),s=>(nr(),iu(r,{key:s.path,to:s.path,activeClass:"active",class:"nav-link"},{default:gg(()=>[n[0]||(n[0]=Ht("i",{class:"fas fa-box-open me-3",style:{width:"1rem"}},null,-1)),Bg(Gl(s.name),1)]),_:2},1032,["to"]))),128))])])}}}),zN=au(GN,[["__scopeId","data-v-4ba6a20a"]]),KN={class:"d-flex"},QN={class:"main-content d-flex flex-column"},YN=Hi({__name:"Dashboard",setup(t){return(e,n)=>{const r=nu("RouterView");return nr(),Pi("div",KN,[at(zN),Ht("div",QN,[at($N),at(r)])])}}}),JN=au(YN,[["__scopeId","data-v-4a9d1c61"]]),XN=VN({history:fN("/TS-yogab/"),routes:[{path:"/",name:"dashboard",component:JN,children:[{path:"/product-management",name:"product-management",component:()=>Eo(()=>import("./ProductManagement-C5Utwqij.js"),__vite__mapDeps([0,1]))},{path:"/order-management",name:"order-management",component:()=>Eo(()=>import("./OrderManagement-CRkhG4l4.js"),__vite__mapDeps([2,1]))},{path:"/coupon-management",name:"coupon-management",component:()=>Eo(()=>import("./CouponManagement-CTTcI_Ta.js"),__vite__mapDeps([3,1]))}]},{path:"/login",name:"login",component:()=>Eo(()=>import("./Login-DelS8mYs.js"),__vite__mapDeps([4,5]))}],scrollBehavior(t,e,n){return n||{top:0,left:0,behavior:"smooth"}}}),Wy=VI(ZI);Wy.use(XN);Wy.mount("#app");export{nD as A,rD as B,_t as C,JT as D,Bg as E,on as F,yT as G,Wl as H,nr as I,at as J,tD as K,sD as L,xN as M,ED as N,au as _,XC as a,fD as b,oD as c,_D as d,dD as e,pD as f,uD as g,gD as h,tl as i,Hi as j,eD as k,Eg as l,Tg as m,gi as n,lD as o,Wt as p,aD as q,mD as r,yD as s,Pi as t,hD as u,Ht as v,cD as w,Gl as x,xr as y,ZN as z};
